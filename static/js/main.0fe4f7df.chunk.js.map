{"version":3,"sources":["components/DarkModeToggle.js","components/UrlBar.js","components/ShareButton.js","components/InfoButton.js","components/DebugButton.js","components/FilterSelector.js","components/SearchBar.js","components/LogLines.js","components/LogView.js","util/time.js","components/SystemInfo.js","components/BundleView.js","components/NothingLoaded.js","util/remote.js","util/zip.js","util/bundle.js","App.js","hooks/useLocalStorage.js","serviceWorkerRegistration.js","index.js"],"names":["DarkModeToggle","props","useState","darkMode","setDarkMode","Tooltip","title","IconButton","onClick","onChange","color","size","useStyles","makeStyles","theme","grow","flexGrow","url","position","borderRadius","shape","backgroundColor","alpha","palette","common","white","breakpoints","up","marginRight","spacing","marginLeft","urlIcon","padding","height","pointerEvents","display","alignItems","justifyContent","inputRoot","width","inputInput","paddingLeft","transitions","create","UrlBar","classes","setUrl","filename","mode","className","Hidden","lgDown","InputBase","placeholder","root","input","event","target","value","onKeyDown","key","handleUrlChange","defaultValue","inputProps","readOnly","ShareButton","enqueueSnackbar","useSnackbar","shareModalOpen","setShareModalOpen","shareUrl","window","location","origin","pathname","encodeURIComponent","handleClose","Dialog","open","onClose","fullWidth","DialogTitle","DialogContent","TextField","InputProps","onFocus","select","DialogActions","navigator","share","Button","document","clipboard","writeText","InfoButton","infoModalOpen","setInfoModalOpen","Link","href","rel","underline","style","textAlign","src","alt","debugModalOpen","setDebugModalOpen","shared","text","FilterSelector","filters","active","handleFilterChange","activeFilters","setActiveFilters","anchor","setAnchor","Boolean","console","log","currentTarget","length","Select","multiple","MenuProps","anchorEl","map","f","index","MenuItem","pattern","checked","find","element","source","ListItemText","primary","query","transition","result","secondary","fontSize","typography","pxToRem","SearchBar","pos","count","handlePerformQuery","handlePerformFilter","setQuery","regexMode","setRegexMode","caseSensitive","setCaseSensitive","inputRef","React","createRef","handlePerform","handleCancel","current","onCancel","handleToggleRegex","handleToggleCaseSensitive","SearchStartAdornment","InputAdornment","disabled","SearchEndAdornment","onPrev","onNext","handleQueryChange","startAdornment","endAdornment","LogLines","lines","maxLength","reduce","s","t","lineCount","highlighted","filtered","scrollTo","displayLines","setDisplayLines","listRef","useEffect","scrollToItem","inFiltered","i","includes","push","LineComponent","pre","margin","down","linewrap","line","content","toString","warning","main","error","info","getStream","charAt","language","split","itemCount","itemSize","overflow","ref","idx","languages","patterns","getFilters","l","LogView","trim","trimEnd","match","guessLanguage","setScrollTo","cursor","setCursor","setHighlighted","setFiltered","background","accordionbar","flexWrap","accordiondetails","flexDirection","icon","secondaryHeading","flexBasis","nextResult","c","serialAndDisabled","setSerialAndDisabled","throttled","setThrottled","filter","undervoltage","overheating","piSupportLines","piSupportDisabled","variant","persist","Accordion","defaultExpanded","expanded","AccordionSummary","expandIcon","id","Typography","heading","millify","AccordionDetails","q","r","cs","matcher","qLower","toLowerCase","ind","utils","diffInSeconds","d1","d2","Math","floor","abs","formatTimeDiff","seconds","factor","unit1","unitn","n","UNRECOMMENDED_MODELS","SystemInfo","join","p","InfoField","checkField","func","checkBoolean","safemode","throttle_check_disabled","marlin_bugfix","unrecommended_model","model","m","arg","endsWith","checkModel","still_python_2","semver","satisfies","python_too_old","pip_too_old","setuptools_too_old","issue_4392","last_safe_mode_date","generation_date","last_safe_mode_date_obj","Date","generation_date_obj","setTime","parse","formattedDiff","timeutils","checkLastSafeMode","list","BundleView","bundle","systeminfo","logs","NothingLoaded","dropzoneText","files","onUpload","filesLimit","acceptedFiles","maxFileSize","showPreviewsInDropzone","showAlerts","a","fetch","response","ok","Error","status","blob","header","headers","get","contentdispositionutils","parameters","substring","lastIndexOf","name","loadRemote","remoteutils","loadZip","JSZip","loadAsync","zip","file","format","async","loadRemoteZip","containsFile","getFileContents","ziputils","contents","startsWith","Object","keys","sort","hasContent","loadBundle","loadLog","defaultBundle","appBar","toolbar","urlbar","order","paddingBottom","offset","mixins","minHeight","container","paddingTop","footer","App","initialValue","item","localStorage","getItem","JSON","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","useLocalStorage","useMediaQuery","noSsr","setFilename","bundleutils","setBundle","setError","loading","setLoading","pallet","darkModeTheme","createTheme","adaptV4Theme","notistackRef","dismissSnack","closeSnackbar","newUrl","updateHistory","replace","corsRewrite","then","handleFileChange","catch","handleError","handleReset","handleZipChange","contentType","contenttypeutils","type","err","windowUrl","URL","searchParams","set","delete","history","replaceState","currentVersion","version","isEnabled","process","isVerboseMode","StyledEngineProvider","injectFirst","ThemeProvider","action","maxSnack","anchorOrigin","vertical","horizontal","dense","preventDuplicate","Main","handleUpload","handleDarkModeToggle","MainView","Alert","severity","AlertTitle","CircularProgress","Navbar","AppBar","Toolbar","mdUp","CssBaseline","Container","maxWidth","isLocalhost","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","search","params","URLSearchParams","ReactDOM","render","querySelector","addEventListener","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"4fAOe,SAASA,EAAeC,GACnC,MAAgCC,mBAASD,EAAME,UAA/C,mBAAOA,EAAP,KAAiBC,EAAjB,KAOA,OACI,cAACC,EAAA,EAAD,CAASC,MAAM,mBAAf,SACI,cAACC,EAAA,EAAD,CAAYC,QAPS,WACzBP,EAAMQ,UAAUN,GAChBC,GAAaD,IAKkCO,MAAM,UAAUC,KAAK,QAAhE,SACMR,EAAW,cAAC,IAAD,IAAoB,cAAC,IAAD,Q,wDCP3CS,EAAYC,aAAW,SAAAC,GAAK,cAAK,CACnCC,KAAM,CACJC,SAAU,GAEZC,KAAG,GACDC,SAAU,WACVC,aAAcL,EAAMM,MAAMD,aAC1BE,gBAAiBC,YAAMR,EAAMS,QAAQC,OAAOC,MAAO,KACnD,UAAW,CACTJ,gBAAiBC,YAAMR,EAAMS,QAAQC,OAAOC,MAAO,OALpD,cAOAX,EAAMY,YAAYC,GAAG,MAAQ,CAC5BC,YAAad,EAAMe,QAAQ,GAC3BC,WAAYhB,EAAMe,QAAQ,KAT3B,yBAWS,GAXT,GAaHE,QAAS,CACPC,QAASlB,EAAMe,QAAQ,EAAG,GAC1BI,OAAQ,OACRf,SAAU,WACVgB,cAAe,OACfC,QAAS,OACTC,WAAY,SACZC,eAAgB,UAElBC,UAAW,CACT5B,MAAO,UACP6B,MAAO,QAETC,YAAU,GACRR,QAASlB,EAAMe,QAAQ,EAAG,EAAG,EAAG,IADxB,cAEPf,EAAMY,YAAYC,GAAG,MAAQ,CAC5Bc,YAAY,cAAD,OAAgB3B,EAAMe,QAAQ,GAA9B,OAHL,2BAKIf,EAAM4B,YAAYC,OAAO,UAL7B,sBAMD,QANC,OAWC,SAASC,EAAO3C,GAC3B,IAAM4C,EAAUjC,IAEhB,EAAsBV,mBAASD,EAAMgB,KAArC,mBAAOA,EAAP,KAAY6B,EAAZ,KACA,EAAe5C,mBAASD,EAAM8C,SAAW,SAAW,OAA7CC,EAAP,oBAcA,OACI,sBAAKC,UAAWJ,EAAQ5B,IAAxB,UACI,cAACiC,EAAA,EAAD,CAAQC,QAAM,EAAd,SACI,qBAAKF,UAAWJ,EAAQd,QAAxB,SACC9B,EAAM8C,SACH,cAAC,IAAD,IAEA,cAAC,IAAD,QAIR,cAACK,EAAA,EAAD,CACIC,YAAY,SACZR,QAAS,CACLS,KAAMT,EAAQP,UACdiB,MAAOV,EAAQL,YAEnB/B,SA7BS,SAAC+C,GACL,QAATR,GACAF,EAAOU,EAAMC,OAAOC,QA4BhBC,UAxBU,SAACH,GACN,QAATR,GAAgC,UAAdQ,EAAMI,KACxB3D,EAAM4D,gBAAgB5C,IAuBlB6C,aAAwB,WAATd,EAAoB/C,EAAM8C,SAAW9C,EAAMgB,IAC1D8C,WAAY,CAAEC,SAAmB,WAAThB,Q,mEC1EzB,SAASiB,EAAYhE,GAChC,IAAQiE,EAAoBC,cAApBD,gBACR,EAA8ChE,oBAAS,GAAvD,mBAAQkE,EAAR,KAAwBC,EAAxB,KACMC,EAAWC,OAAOC,SAASC,OAASF,OAAOC,SAASE,SAAW,QAAUC,mBAAmB1E,EAAMgB,KAwBlG2D,EAAc,WAChBP,GAAkB,IAIlB,OAAO,qCACP,cAAChE,EAAA,EAAD,CAASC,MAAM,qBAAf,SACI,cAACC,EAAA,EAAD,CAAYC,QA7BK,WACrB6D,GAAkB,IA4ByB3D,MAAM,UAAUC,KAAK,QAA5D,SACI,cAAC,IAAD,QAIR,eAACkE,EAAA,EAAD,CAAQC,KAAMV,EAAgBW,QAASH,EAAaI,WAAS,EAA7D,UACI,cAACC,EAAA,EAAD,6BACA,cAACC,EAAA,EAAD,UACI,cAACC,EAAA,EAAD,CAAWzB,MAAOY,EAAUc,WAAY,CAAEpB,UAAU,GAASqB,QAAS,SAAA7B,GAAUA,EAAMC,OAAO6B,UAAWN,WAAS,MAErH,eAACO,EAAA,EAAD,WACMC,UAAUC,MACR,cAACC,EAAA,EAAD,CAAQlF,QArCJ,WACZgF,UAAUC,QACVD,UAAUC,MAAM,CACZnF,MAAOqF,SAASrF,MAChBW,IAAKqD,IAETM,MA+BQ,mBAIC,KAEHY,UAAUI,UACR,cAACF,EAAA,EAAD,CAAQlF,QAlCL,WACXgF,UAAUI,YACVJ,UAAUI,UAAUC,UAAUvB,GAC9BJ,EAAgB,4BAChBU,MA8BQ,kBAIC,KAEL,cAACc,EAAA,EAAD,CAAQlF,QAASoE,EAAjB,4B,yBC7DD,SAASkB,GAAW7F,GAC/B,MAA4CC,oBAAS,GAArD,mBAAQ6F,EAAR,KAAuBC,EAAvB,KAMMpB,EAAc,WAChBoB,GAAiB,IAIjB,OAAO,qCACP,cAAC3F,EAAA,EAAD,CAASC,MAAM,sBAAf,SACI,cAACC,EAAA,EAAD,CAAYC,QAXI,WACpBwF,GAAiB,IAUyBtF,MAAM,UAAUC,KAAK,QAA3D,SACI,cAAC,KAAD,QAIR,eAACkE,EAAA,EAAD,CAAQC,KAAMiB,EAAehB,QAASH,EAAaI,WAAS,EAA5D,UACI,cAACC,EAAA,EAAD,kCACA,eAACC,EAAA,EAAD,WACI,+DACkC,cAACe,EAAA,EAAD,CAAMC,KAAK,wBAAwBzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAAvG,uBADlC,yCAGA,iEACoC,cAACH,EAAA,EAAD,CAAMC,KAAK,0DAA0DzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAAzI,6DADpC,OAGA,uBACA,2GAGA,uBACA,6LAIA,oBAAGC,MAAO,CAACC,UAAW,UAAtB,UACI,cAACL,EAAA,EAAD,CAAMC,KAAK,wEAAwEzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAAvJ,SAAgK,qBAAKG,IAAI,yFAAyFC,IAAI,qBAD1Q,IACqS,cAACP,EAAA,EAAD,CAAMC,KAAK,mGAAmGzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAAlL,SAA2L,qBAAKG,IAAI,2HAA2HC,IAAI,0BAExmB,iEACoC,cAACP,EAAA,EAAD,CAAMC,KAAK,qDAAqDzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAApI,wDADpC,OAGA,8DACiC,cAACH,EAAA,EAAD,CAAMC,KAAK,kFAAkFzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAAjK,0BADjC,UAIJ,cAACb,EAAA,EAAD,UACI,cAACG,EAAA,EAAD,CAAQlF,QAASoE,EAAjB,2B,yBCjDD,SAASkB,GAAW7F,GAC/B,MAA8CC,oBAAS,GAAvD,mBAAQuG,EAAR,KAAwBC,EAAxB,KAMM9B,EAAc,WAChB8B,GAAkB,IAIlB,OAAO,qCACP,cAACrG,EAAA,EAAD,CAASC,MAAM,sBAAf,SACI,cAACC,EAAA,EAAD,CAAYC,QAXK,WACrBkG,GAAkB,IAUyBhG,MAAM,UAAUC,KAAK,QAA5D,SACI,cAAC,KAAD,QAIR,eAACkE,EAAA,EAAD,CAAQC,KAAM2B,EAAgB1B,QAASH,EAAaI,WAAS,EAA7D,UACI,cAACC,EAAA,EAAD,yBACA,cAACC,EAAA,EAAD,UACI,+BACI,6CACA,6BAAKjF,EAAM0G,OAAOC,OAClB,4CACA,6BAAK3G,EAAM0G,OAAO1F,MAClB,8CACA,6BAAKhB,EAAM0G,OAAOrG,QAClB,qCACA,6BAAKL,EAAMgB,WAGnB,cAACsE,EAAA,EAAD,UACI,cAACG,EAAA,EAAD,CAAQlF,QAASoE,EAAjB,2B,yPCpCD,SAASiC,GAAe5G,GACnC,IAAM6G,EAAU7G,EAAM6G,QAChBC,EAAS9G,EAAM8G,OACfC,EAAqB/G,EAAM+G,mBAEjC,EAA0C9G,mBAAS6G,GAAU,IAA7D,mBAAOE,EAAP,KAAsBC,EAAtB,KAEA,EAA4BhH,oBAAS,GAArC,mBAAOiH,EAAP,KAAeC,EAAf,KACMtC,EAAOuC,QAAQF,GAoBrB,OAHAG,QAAQC,IAAI,WAAYT,GACxBQ,QAAQC,IAAI,kBAAmBN,GAG3B,qCACI,cAAC5G,EAAA,EAAD,CAASC,MAAM,UAAf,SAAyB,cAACC,EAAA,EAAD,CAAYC,QArB1B,SAACgD,GAChB4D,EAAU5D,EAAMgE,gBAoB8C9G,MAAOuG,EAAcQ,OAAS,UAAY,UAAW9G,KAAK,QAA3F,SAAmG,cAAC,KAAD,QAC5H,cAAC+G,GAAA,EAAD,CACIC,UAAQ,EACRjE,MAAOuD,EACPZ,MAAO,CAAClE,QAAS,QACjB2C,KAAMA,EACNC,QAxBQ,WAChBqC,GAAU,IAwBF3G,SArBS,SAAC+C,GAClB0D,GAAiB,WAIb,OAHIF,GACAA,EAAmBxD,EAAMC,OAAOC,OAE7BF,EAAMC,OAAOC,UAiBhBkE,UAAW,CACPC,SAAUV,GARlB,SAWKL,EAAQgB,KAAI,SAACC,EAAGC,GAAJ,OACT,eAACC,GAAA,EAAD,CAAsBvE,MAAOqE,EAAEG,QAA/B,UACI,cAAC,KAAD,CAAUC,UAAWlB,EAAcmB,MAAK,SAAAC,GAAO,OAAIA,EAAQC,SAAWP,EAAEG,QAAQI,YAChF,cAACC,GAAA,EAAD,CAAcC,QAAST,EAAEzH,UAFd0H,WCpCnC,IAAMpH,GAAYC,aAAW,SAAAC,GAAK,YAAK,CACnCC,KAAM,CACJC,SAAU,GAEZyH,OAAK,GACHvH,SAAU,WACVC,aAAcL,EAAMM,MAAMD,aAC1BE,gBAAiBC,YAAMR,EAAMS,QAAQC,OAAOC,MAAO,KACnD,UAAW,CACTJ,gBAAiBC,YAAMR,EAAMS,QAAQC,OAAOC,MAAO,OALlD,cAOFX,EAAMY,YAAYC,GAAG,MAAQ,CAC5BC,YAAad,EAAMe,QAAQ,GAC3BC,WAAYhB,EAAMe,QAAQ,KATzB,yBAWO,GAXP,0BAYQf,EAAMe,QAAQ,IAZtB,6BAaWf,EAAMe,QAAQ,IAbzB,GAeLS,UAAW,CACT5B,MAAO,UACP6B,MAAO,QAETC,WAAY,CACVR,QAASlB,EAAMe,QAAQ,GACvB6G,WAAY5H,EAAM4B,YAAYC,OAAO,SACrCJ,MAAO,QAEToG,OAAQ,CACNjI,MAAOI,EAAMS,QAAQqH,UACrBC,SAAU/H,EAAMgI,WAAWC,QAAQ,SAK1B,SAASC,GAAU/I,GAC9B,IAAMgJ,EAAMhJ,EAAMgJ,IACZC,EAAQjJ,EAAMiJ,MACdC,EAAqBlJ,EAAMkJ,mBAC3BC,EAAsBnJ,EAAMmJ,oBAC5BtC,EAAU7G,EAAM6G,QAEhBjE,EAAUjC,KAEhB,EAA0BV,mBAASD,EAAMwI,OAAzC,mBAAOA,EAAP,KAAcY,EAAd,KACA,EAAkCnJ,oBAAS,GAA3C,mBAAOoJ,EAAP,KAAkBC,EAAlB,KACA,EAA0CrJ,oBAAS,GAAnD,mBAAOsJ,EAAP,KAAsBC,EAAtB,KACA,EAA0CvJ,mBAAS,IAAnD,mBAAO+G,EAAP,KAAsBC,EAAtB,KAEMwC,EAAWC,IAAMC,YAejBC,EAAgB,WAChBV,GACFA,EAAmBV,EAAOa,EAAWE,IAInCM,EAAe,WACnBT,EAAS,IACTK,EAASK,QAAQrG,MAAQ,GACrBzD,EAAM+J,UACR/J,EAAM+J,YAIJC,EAAoB,WACxBV,GAAa,SAAAD,GACX,IAAMX,GAAUW,EAEhB,OADAH,EAAmBV,EAAOE,EAAQa,GAC3Bb,MAILuB,EAA4B,WAChCT,GAAiB,SAAAD,GACf,IAAMb,GAAUa,EAEhB,OADAL,EAAmBV,EAAOa,EAAWX,GAC9BA,MAIL3B,EAAqB,SAACe,GAE1Bb,EADAa,EAAIA,GAAK,IAELqB,GACFA,EAAoBrB,IAIlBoC,EAAuB,kBAC3B,cAACC,GAAA,EAAD,CAAgBlJ,SAAS,QAAzB,SACE,cAACb,EAAA,EAAD,CAASC,MAAM,SAAf,SAAwB,+BAAM,cAACC,EAAA,EAAD,CAAYC,QAASqJ,EAAeQ,SAAoB,KAAV5B,EAAc9H,KAAK,QAAjE,SAAyE,cAAC,KAAD,aAIrG2J,EAAqB,SAACrK,GACxB,OACI,eAACmK,GAAA,EAAD,CAAgBlJ,SAAS,MAAzB,UACGgI,EAAQ,uBAAMjG,UAAWJ,EAAQ8F,OAAzB,UAAkCM,EAAlC,MAA0CC,KAAiB,KACnEpC,EAAQW,OAAS,cAACZ,GAAD,CAAgBC,QAASA,EAASC,OAAQE,EAAeD,mBAAoBA,IAA0B,KACzH,cAAC3G,EAAA,EAAD,CAASC,MAAM,iCAAf,SAAgD,cAACC,EAAA,EAAD,CAAYC,QAASyJ,EAAmBvJ,MAAO4I,EAAY,UAAY,UAAW3I,KAAK,QAAvF,SAA+F,cAAC,KAAD,QAC/I,cAACN,EAAA,EAAD,CAASC,MAAM,0BAAf,SAAyC,cAACC,EAAA,EAAD,CAAYC,QAAS0J,EAA2BxJ,MAAO8I,EAAgB,UAAY,UAAW7I,KAAK,QAAnG,SAA2G,cAAC,KAAD,QACpJ,cAACN,EAAA,EAAD,CAASC,MAAM,2BAAf,SAA0C,+BAAM,cAACC,EAAA,EAAD,CAAYC,QAASP,EAAMsK,OAAQF,SAAoB,IAAVnB,EAAavI,KAAK,QAA/D,SAAuE,cAAC,KAAD,UACvH,cAACN,EAAA,EAAD,CAASC,MAAM,uBAAf,SAAsC,+BAAM,cAACC,EAAA,EAAD,CAAYC,QAASP,EAAMuK,OAAQH,SAAoB,IAAVnB,EAAavI,KAAK,QAA/D,SAAuE,cAAC,KAAD,UACnH,cAACN,EAAA,EAAD,CAASC,MAAM,sBAAf,SAAqC,+BAAM,cAACC,EAAA,EAAD,CAAYC,QAASsJ,EAAcO,SAAoB,KAAV5B,EAAc9H,KAAK,QAAhE,SAAwE,cAAC,KAAD,cAI7H,OACI,qBAAKsC,UAAWJ,EAAQ4F,MAAxB,SACI,cAACrF,EAAA,EAAD,CACIC,YAAY,YACZR,QAAS,CACLS,KAAMT,EAAQP,UACdiB,MAAOV,EAAQL,YAEnB/B,SA9ES,SAAC+C,GACpB6F,EAAS7F,EAAMC,OAAOC,OAClBzD,EAAMwK,mBACRxK,EAAMwK,kBAAkBhC,IA4EhB9E,UAxEU,SAACH,GACH,UAAdA,EAAMI,KACRiG,KAuEQ/F,aAAc7D,EAAMwI,MACpBiC,eAAgB,cAACP,EAAD,IAChBQ,aAAc,cAACL,EAAD,IACdZ,SAAUA,M,cCpJX,SAASkB,GAAS3K,GAC7B,IAAM4K,EAAQ5K,EAAM4K,MACdC,EAAYD,EAAME,QAAO,SAACC,EAAGC,GAAJ,OAAWA,EAAExD,OAASuD,EAAEvD,OAASwD,EAAID,IAAI,IAAIvD,OACtEyD,EAAYL,EAAMpD,OAClB0D,EAAclL,EAAMkL,YACpBC,EAAWnL,EAAMmL,SAEjBC,EAAWpL,EAAMoL,SAEvB,EAAwCnL,mBAAS,IAAjD,mBAAOoL,EAAP,KAAqBC,EAArB,KAEMC,EAAU7B,IAAMC,YAEtB6B,qBAAU,WACc,IAAD,EAAfJ,GAAY,IACZ,UAAAG,EAAQzB,eAAR,SAAiB2B,aAAaL,EAAU,aAE7C,CAACG,EAASH,IAEbI,qBAAU,WAGN,IAFA,IAAM9C,EAAS,GACXgD,GAAa,EACRC,EAAI,EAAGA,EAAIf,EAAMpD,OAAQmE,IAC1BR,EAASS,SAASD,GACbD,IACDA,GAAa,EACbhD,EAAOmD,MAAM,KAGbH,IACAA,GAAa,GAEjBhD,EAAOmD,KAAKF,IAGpBL,EAAgB5C,KACjB,CAACkC,EAAOO,IAEX,IAsGIW,EAtGElJ,EAAUhC,aAAW,SAAAC,GAAK,MAAK,CACjCyG,IAAK,CACDvG,SAAU,GAEdgL,IAAI,aACAC,OAAQ,EACR,cAAe,kDACdnL,EAAMY,YAAYwK,KAAK,MAAQ,CAC5BrD,SAAU/H,EAAMgI,WAAWC,QAAQ,MAG3CoD,SAAU,CACN5J,MAAM,GAAD,OAAMuI,EAAN,iBACL,yBAA4B,CACxB,mBAAoB,0BAG5BsB,KAAM,CACF3J,YAAa3B,EAAMe,QAAQ,GAE3B,YAAa,CACTwK,QAAS,wBACTlK,QAAS,eACTI,MAAM,GAAD,OAAK2I,EAAUoB,WAAW7E,OAA1B,MACL,aAAc,QACd,eAAgB,MAChB,MAAS3G,EAAMS,QAAQqF,KAAKyD,UAEhC,2BAA8B,CAC1B,MAASvJ,EAAMS,QAAQqF,KAAKgC,WAEhC,6BAAgC,CAC5B,MAAS9H,EAAMS,QAAQgL,QAAQC,MAEnC,2BAA8B,CAC1B,MAAS1L,EAAMS,QAAQkL,MAAMD,MAEjC,yBAA4B,CACxB,MAAS1L,EAAMS,QAAQmL,KAAKF,MAEhC,0BAA6B,CACzB,MAAS1L,EAAMS,QAAQkL,MAAMD,MAEjC,gCAAmC,CAC/B,MAAS1L,EAAMS,QAAQkL,MAAMD,OAGrCpB,SAAU,CACN3I,YAAa3B,EAAMe,QAAQ,GAC3BnB,MAAOI,EAAMS,QAAQqF,KAAKgC,UAC1B,aAAc,SACd,YAAa,CACTyD,QAAS,KACTlK,QAAS,eACTI,MAAM,GAAD,OAAK2I,EAAUoB,WAAW7E,OAA1B,MACL,aAAc,QACd,eAAgB,WAxDZ5G,GAkEV8L,EAAY,SAACP,GAEf,OADeA,EAAKQ,OAAO,KAEvB,IAAK,IAAK,MAAO,QACjB,IAAK,IAAK,MAAO,SACjB,IAAK,IAAK,MAAO,SACjB,QAAS,MAAO,UA+BxB,OAAQ3M,EAAM4M,UACV,IAAK,MACDd,EAnBQ,SAAC,GAAD,IAzBKK,EAyBFpE,EAAH,EAAGA,MAAO3B,EAAV,EAAUA,MAAV,OACZ,sBAAM,eAAc8E,EAAYU,SAAS7D,GAAQ3B,MAAOA,EAAOpD,UAAWJ,EAAQsJ,SAAlF,SAA4F,sBAAM,kBAAiBnE,EAAQ,EAAG,iBA1B7GoE,EA0BwIvB,EAAM7C,GAzBnJoE,EAAKU,MAAM,KACV,IAwB2J7J,UAAWJ,EAAQuJ,KAA/F,SAAsGvB,EAAM7C,QAmBpM,MAEJ,IAAK,MACD+D,EAnBQ,SAAC,GAAD,IAAG/D,EAAH,EAAGA,MAAO3B,EAAV,EAAUA,MAAV,OACZ,sBAAM,eAAc8E,EAAYU,SAAS7D,GAAQ3B,MAAOA,EAAOpD,UAAWJ,EAAQsJ,SAAlF,SAA4F,sBAAM,kBAAiBnE,EAAQ,EAAG,cAAa2E,EAAU9B,EAAM7C,IAAS/E,UAAWJ,EAAQuJ,KAA3F,SAAkGvB,EAAM7C,QAmBhM,MAEJ,IAAK,YACD+D,EAnBc,SAAC,GAAD,IAlBGK,EAkBApE,EAAH,EAAGA,MAAO3B,EAAV,EAAUA,MAAV,OAClB,sBAAM,eAAc8E,EAAYU,SAAS7D,GAAQ3B,MAAOA,EAAOpD,UAAWJ,EAAQsJ,SAAlF,SAA4F,sBAAM,kBAAiBnE,EAAQ,EAAG,qBAnBzGoE,EAmB4IvB,EAAM7C,GAlBnKoE,EAAKP,SAAS,cACP,SACAO,EAAKP,SAAS,eACd,UAEA,SAaqK5I,UAAWJ,EAAQuJ,KAAvG,SAA8GvB,EAAM7C,QAmB5M,MAEJ,QACI+D,EAnBU,SAAC,GAAD,IAAG/D,EAAH,EAAGA,MAAO3B,EAAV,EAAUA,MAAV,OACd,sBAAM,eAAc8E,EAAYU,SAAS7D,GAAQ3B,MAAOA,EAAOpD,UAAWJ,EAAQsJ,SAAlF,SAA4F,sBAAM,kBAAiBnE,EAAQ,EAAG/E,UAAWJ,EAAQuJ,KAArD,SAA4DvB,EAAM7C,QAgClK,OACG,sBAAM/E,UAAWJ,EAAQ0E,IAAzB,SACK,qBAAKtE,UAAWJ,EAAQmJ,IAAxB,SACI,cAAC,KAAD,CACI/J,OAAQ,IACR8K,UAAWzB,EAAa7D,OACxBuF,SAAU,GACV3G,MAAO,CAAC4G,SAAU,UAClBC,IAAK1B,EALT,SAZC,SAAC,GAAsB,IAApBxD,EAAmB,EAAnBA,MAAO3B,EAAY,EAAZA,MACb8G,EAAM7B,EAAatD,GACzB,OAAa,IAATmF,EACO,sBAAM9G,MAAOA,EAAOpD,UAAWJ,EAAQsJ,SAAvC,SAAiD,sBAAMlJ,UAAWJ,EAAQuI,SAAzB,SAAoC,YAErF,cAACW,EAAD,CAAe/D,MAAOmF,EAAK9G,MAAOA,W,mECxJ/C+G,GAAY,CACd,CACIP,SAAU,SACVQ,SAAU,CAAC,iBACXvG,QAAS,CACL,CACIxG,MAAO,uBACP4H,QAAS,+EAEb,CACI5H,MAAO,qBACP4H,QAAS,0EAEb,CACI5H,MAAO,oBACP4H,QAAS,iKAEb,CACI5H,MAAO,iBACP4H,QAAS,gBAEb,CACI5H,MAAO,uBACP4H,QAAS,yCAIrB,CACI2E,SAAU,MACVQ,SAAU,CAAC,uBACXvG,QAAS,IAEb,CACI+F,SAAU,YACVQ,SAAU,CAAC,oBACXvG,QAAS,IAEb,CACI+F,SAAU,MACVQ,SAAU,CAAC,aACXvG,QAAS,CACL,CACIxG,MAAO,QAAS4H,QAAS,aAC1B,CACC5H,MAAO,OAAQ4H,QAAS,eAkBlCoF,GAAa,SAACC,GAAO,IAAD,iBACcH,IADd,IACtB,2BAA+C,CAAC,IAAD,UAAlCP,EAAkC,EAAlCA,SAAU/F,EAAwB,EAAxBA,QACnB,GAAIyG,IAAMV,EACN,OAAO/F,GAHO,8BAMtB,MAAO,IAGI,SAAS0G,GAAQvN,GAC5B,IAAQiE,EAAoBC,cAApBD,gBAEFqD,EAAMtH,EAAMsH,IACZ8E,EAAUpM,EAAMoM,QAChBxB,EAAQwB,EAAQoB,OAAOX,MAAM,MAAMhF,KAAI,SAACsE,GAAD,OAAWA,EAAKsB,UAAY,QACnExC,EAAYL,EAAMpD,OAClBoF,EAAW5M,EAAM4M,UA5BL,SAAC9J,GAAc,IAAD,iBACKqK,IADL,IAChC,2BAAgD,CAAC,IAAD,YAAnCP,EAAmC,EAAnCA,SAAUQ,EAAyB,EAAzBA,SAAyB,eACtBA,GADsB,IAC5C,2BAAgC,CAAC,IAAtBnF,EAAqB,QAC5B,GAAInF,EAAS4K,MAAMzF,GAEf,OADAZ,QAAQC,IAAR,iBAAsBW,EAAtB,eAAoCnF,IAC7B8J,GAJ6B,gCADhB,8BAShC,MAAO,QAmB4Be,CAAcrG,GAEjD,EAA0BrH,mBAAS,IAAnC,mBAAOuI,EAAP,KAAcY,EAAd,KACA,EAAkCnJ,oBAAS,GAA3C,mBAAOoJ,EAAP,KAAkBC,EAAlB,KACA,EAA0CrJ,oBAAS,GAAnD,mBAAOsJ,EAAP,KAAsBC,EAAtB,KACA,EAAgCvJ,mBAAS,GAAzC,mBAAOmL,EAAP,KAAiBwC,EAAjB,KACA,EAA4B3N,mBAAS,GAArC,mBAAO4N,EAAP,KAAeC,EAAf,KACA,EAAsC7N,mBAAS,IAA/C,mBAAOiL,EAAP,KAAoB6C,EAApB,KAEA,EAAgC9N,mBAAS,IAAzC,mBAAOkL,EAAP,KAAiB6C,EAAjB,KAEMpL,EAAUhC,aAAW,SAAAC,GAAK,MAAK,CACjCoN,WAAY,GAEZC,aAAa,aACThM,QAAS,OACTnB,SAAU,EACVoB,WAAY,UACXtB,EAAMY,YAAYwK,KAAK,MAAQ,CAC5BkC,SAAU,SAGlBC,iBAAkB,CACdlM,QAAS,OACTnB,SAAU,EACVsN,cAAe,UAEnBvN,KAAM,CACFC,SAAU,GAEduN,KAAM,CACFvM,QAASlB,EAAMe,QAAQ,EAAG,GAC1BgH,SAAU,UAEd2F,iBAAiB,aACb3F,SAAU/H,EAAMgI,WAAWC,QAAQ,IACnCrI,MAAOI,EAAMS,QAAQqF,KAAKgC,UAC1B5G,QAASlB,EAAMe,QAAQ,EAAG,GAC1ByE,UAAW,SACVxF,EAAMY,YAAYwK,KAAK,MAAQ,CAC5B5F,UAAW,OACXtE,QAASlB,EAAMe,QAAQ,EAAG,KAGlCvB,MAAM,aACFU,SAAU,EACVoB,WAAY,UACXtB,EAAMY,YAAYwK,KAAK,MAAQ,CAC5BuC,UAAW,SAGnB/B,KAAK,eACA5L,EAAMY,YAAYwK,KAAK,MAAQ,CAC5BuC,UAAW,YA1CP5N,GAgHV6N,EAAa,WACf,GAAIvD,EAAY1D,OAAQ,CACpB,IAAMkH,EAAIb,EAAS3C,EAAY1D,OAAS,EAAIqG,EAAS,EAAI,EACzDD,EAAY1C,EAAYwD,IACxBZ,EAAUY,KAWlB,EAAkDzO,oBAAS,GAA3D,mBAAO0O,EAAP,KAA0BC,EAA1B,KACA,EAAkC3O,oBAAS,GAA3C,mBAAO4O,EAAP,KAAkBC,EAAlB,KAuBA,OArBAtD,qBAAU,WACNoD,EAA8B,eAARtH,GAA8H,IAAtGsD,EAAMmE,QAAO,SAAA5C,GAAI,OAAIA,EAAKqB,SAAWrB,EAAKP,SAAS,0CAAwCpE,QAEzI,IAAMwH,EAAe5C,EAAQR,SAAS,iCAChCqD,EAAc7C,EAAQR,SAAS,yDACrCkD,EAAaE,GAAgBC,GAE7B,IAAMC,EAAiBtE,EAAMmE,QAAO,SAAA5C,GAAI,OAAIA,EAAKP,SAAS,yBAA2BO,EAAKP,SAAS,2BAC7FuD,EAAoBD,EAAe1H,QAAU0H,EAAeA,EAAe1H,OAAS,GAAGoE,SAAS,wBAElG+C,GACA1K,EAAgB,iGAAkG,CAAEmL,QAAS,SAE7HD,GACAlL,EAAgB,6GAA8G,CAAEmL,QAAS,QAASC,SAAS,EAAM1L,IAAK,wBAEtKkL,GACA5K,EAAgB,2FAA4F,CAAEmL,QAAS,QAASC,SAAS,EAAM1L,IAAK,gBAEzJ,CAAC2D,EAAKsD,EAAOwB,EAASnI,EAAiB0K,EAAmBE,IAGzD,eAACS,GAAA,EAAD,CAAqBC,gBAAiBvP,EAAMwP,SAA5C,UACI,cAACC,GAAA,EAAD,CAAkBC,WAAY,cAAC,KAAD,IAAoB,gBAAe,aAAe1P,EAAM+H,MAAQ,WAAY4H,GAAI,aAAe3P,EAAM+H,MAAQ,UAA3I,SACI,sBAAK/E,UAAWJ,EAAQsL,aAAxB,UACI,qBAAKlL,UAAWJ,EAAQvC,MAAxB,SACI,eAACuP,GAAA,EAAD,CAAY5M,UAAWJ,EAAQiN,QAASzJ,MAAO,CAAElE,QAAS,OAAQC,WAAY,UAA9E,UACKmF,EACAuH,EAAY,cAAC,KAAD,CAAe7L,UAAWJ,EAAQ0L,KAAM5N,KAAK,UAAc,KACvEiO,EAAoB,cAAC,KAAD,CAAW3L,UAAWJ,EAAQ0L,KAAM5N,KAAK,UAAc,UAGpF,sBAAKsC,UAAWJ,EAAQ6J,KAAxB,UACI,cAACmD,GAAA,EAAD,CAAY5M,UAAWJ,EAAQ2L,iBAA/B,SACKuB,KAAQ1D,EAAQ5E,QAAU,KAA0B,IAAnB4E,EAAQ5E,OAAe,OAAS,WAEtE,cAACoI,GAAA,EAAD,CAAY5M,UAAWJ,EAAQ2L,iBAA/B,SACKuB,KAAQ7E,GAAa,KAAqB,IAAdA,EAAkB,OAAS,mBAKxE,eAAC8E,GAAA,EAAD,CAAkB/M,UAAWJ,EAAQwL,iBAArC,UACI,cAACrF,GAAD,CACI/F,UAAWJ,EAAQ9B,KACnBkI,IAAK6E,EAAS,EACd5E,MAAOiC,EAAY1D,OACnB6B,UAAWA,EACXkB,OAAQkE,EACRnE,OA5DO,WACnB,GAAIY,EAAY1D,OAAQ,CACpB,IAAMkH,EAAIb,EAAS,EAAKA,EAAS,EAAM3C,EAAY1D,OAAS,EAC5DoG,EAAY1C,EAAYwD,IACxBZ,EAAUY,KAyDF3E,SArIM,WAClBgE,EAAe,IACfD,EAAU,GACV1E,EAAS,KAmIGF,mBA1GO,SAAC8G,EAAGC,EAAGC,GAC1B,GAAKF,EAGL,GADA3I,QAAQC,IAAI,kBAAmB0I,GAC3BA,IAAMxH,GAASyH,IAAM5G,GAAa6G,IAAO3G,EAAe,CACxDlC,QAAQC,IAAR,qCAA0C0I,EAA1C,qBAAwDC,EAAxD,6BAA8EC,IAC9E,IAEIC,EAFEC,EAASJ,EAAEK,cAIbF,EADAF,EACU,SAAA9D,GAAI,OAAIA,EAAKuB,MAAMsC,IAEnB,SAAA7D,GAAI,OAAIA,EAAKP,SAASsE,EAAKF,EAAII,IAG7C,IAAME,EAAM1F,EAAME,QAAO,SAACpC,EAAQyD,EAAMpE,GAIpC,OAHIoI,EAAQD,EAAK/D,EAAOA,EAAKkE,gBACrB3H,EAAOmD,KAAK9D,GAEbW,IACR,IAEC4H,EAAI9I,QACJoG,EAAY0C,EAAI,IAGpBvC,EAAeuC,GACfxC,EAAU,GACV1E,EAAS4G,GACT1G,EAAa2G,GACbzG,EAAiB0G,GACjB7I,QAAQC,IAAI,eAAgBgJ,EAAK,YAAa,QAE9C7B,KA0EQtF,oBAjIQ,SAACrB,GACrBT,QAAQC,IAAI,mBAAoBQ,GAChC,IASMwI,EAAM1F,EAAME,QAAO,SAACpC,EAAQyD,EAAMpE,GAIpC,OAbY,SAACoE,GAAU,IAAD,iBACDrE,GADC,IACtB,2BAAwB,CAAC,IAAdiH,EAAa,QACpB,GAAI5C,EAAKuB,MAAMqB,GACX,OAAO,GAHO,8BAMtB,OAAO,EAIHoB,CAAQhE,IACRzD,EAAOmD,KAAK9D,GAETW,IACR,IAEHsF,EAAYsC,GACZjJ,QAAQC,IAAI,YAAagJ,IA+GbzJ,QAASwG,GAAWT,KAGxB,cAACjC,GAAD,CAAUC,MAAOA,EAAOM,YAAaA,EAAaC,SAAUA,EAAUC,SAAUA,EAAUwB,SAAUA,SAlC5FtF,G,6EC1OxB,IAIeiJ,GAJD,CACVC,cAxBJ,SAAuBC,EAAIC,GACvB,OAAOC,KAAKC,MAAMD,KAAKE,IAAIJ,EAAKC,GAAM,MAwBtCI,eArBJ,SAAwBC,GAUpB,IATA,IASA,MATmB,CACf,CAAEC,OAAQ,QAAoBC,MAAO,OAAQC,MAAO,SACpD,CAAEF,OAAQ,OAAmBC,MAAO,QAASC,MAAO,UACpD,CAAEF,OAAQ,OAAkBC,MAAO,OAAQC,MAAO,SAClD,CAAEF,OAAQ,MAAcC,MAAO,MAAOC,MAAO,QAC7C,CAAEF,OAAQ,KAASC,MAAO,OAAQC,MAAO,SACzC,CAAEF,OAAQ,GAAIC,MAAO,SAAUC,MAAO,YAG1C,eAA4B,CAAvB,IAAMxC,EAAC,KACFyC,EAAIR,KAAKC,MAAMG,EAAUrC,EAAEsC,QACjC,GAAIG,EAAI,EACJ,OAAOA,EAAI,KAAa,IAANA,EAAUzC,EAAEuC,MAAQvC,EAAEwC,OAGhD,OAAOH,EAAU,KAAmB,IAAZA,EAAgB,SAAW,aCDjDK,GAAuB,CAAC,OAAQ,UAEhCzQ,GAAYC,aAAW,SAACC,GAAD,MAAY,CACrCqN,aAAa,aACThM,QAAS,OACTnB,SAAU,EACVoB,WAAY,UACXtB,EAAMY,YAAYwK,KAAK,MAAQ,CAC5BkC,SAAU,SAGlBrN,KAAM,CACFC,SAAU,GAEduN,KAAM,CACFvM,QAASlB,EAAMe,QAAQ,EAAG,GAC1BgH,SAAU,UAEd2F,iBAAiB,aACb3F,SAAU/H,EAAMgI,WAAWC,QAAQ,IACnCrI,MAAOI,EAAMS,QAAQqF,KAAKgC,UAC1B5G,QAASlB,EAAMe,QAAQ,EAAG,GAC1ByE,UAAW,SACVxF,EAAMY,YAAYwK,KAAK,MAAQ,CAC5B5F,UAAW,OACXtE,QAASlB,EAAMe,QAAQ,EAAG,KAGlCvB,MAAM,aACFU,SAAU,EACVoB,WAAY,UACXtB,EAAMY,YAAYwK,KAAK,MAAQ,CAC5BuC,UAAW,SAGnB/B,KAAK,eACA5L,EAAMY,YAAYwK,KAAK,MAAQ,CAC5BuC,UAAW,aAKR,SAAS6C,GAAWrR,GAC/B,IADsC,EAC9BiE,EAAoBC,cAApBD,gBAEF2G,EAAQ5K,EAAMyM,KAAKI,MAAM,MAAMkC,QAAO,SAAAzB,GAAC,MAAiB,KAAbA,EAAEE,UAAe3F,KAAI,SAAAyF,GAClE,MAAwBA,EAAET,MAAM,KAAhC,kBACA,MAAO,CAAElJ,IADT,KACmBF,MADnB,WACgC6N,KAAK,SAGnC7E,EAAO,GARyB,eAStB7B,GATsB,IAStC,2BAAuB,CAAC,IAAb2G,EAAY,QACnB9E,EAAK8E,EAAE5N,KAAO4N,EAAE9N,OAVkB,8BAatC,IAAMb,EAAUjC,KAEV6Q,EAAY,SAACnR,EAAOsD,GACtB,IAAMF,EAAQgJ,EAAK9I,GAEnB,OAAIF,EAEI,cAACmM,GAAA,EAAD,CAAY5M,UAAWJ,EAAQ2L,iBAA/B,SAAkDlO,EAAQ,IAAMoD,IAG5D,MAIVgO,EAAa,SAAC9N,EAAK+N,GACrB,OAAQjF,EAAK9I,IAAQ+N,EAAKjF,EAAK9I,KAoC7BgO,EAAe,SAAClO,GAClB,MAAsC,SAA/BA,EAAM4M,cAAc7C,QAGzBoE,EAAWH,EAAW,uBAAuB,SAAAhO,GAAK,OAAIkO,EAAalO,MACnEoL,EAAY4C,EAAW,yCAAyC,SAAAhO,GAAK,MAAsB,QAAjBA,EAAM+J,UAChFqE,EAA0BJ,EAAW,iDAAiD,SAAAhO,GAAK,OAAKkO,EAAalO,MAC7GqO,EAAgBL,EAAW,oBAAoB,SAAAhO,GAAK,OAAKA,EAAMmI,SAAS,qBACxEmG,EAAsBN,EAAW,gCAAgC,SAAAhO,GAAK,OA1CzD,SAACuO,GAChBA,EAAQA,EAAM3B,cADY,qBAERe,GAAqBvJ,KAAI,SAAAoK,GAAC,OAAIA,EAAE5B,kBAFxB,IAE1B,2BAAkE,CAAC,IAAxD6B,EAAuD,QAC9D,GAAIF,EAAMpG,SAAN,UAAkBsG,EAAlB,UAAgCF,EAAMG,SAASD,GAC/C,OAAO,GAJW,8BAO1B,OAAO,EAmCsEE,CAAW3O,MACtF4O,EAAiBZ,EAAW,sBAAsB,SAAAhO,GAAK,OAAM6O,KAAOC,UAAU9O,EAAO,YACrF+O,EAAiBf,EAAW,sBAAsB,SAAAhO,GAAK,OAAM6O,KAAOC,UAAU9O,EAAO,2BACrFgP,EAAchB,EAAW,kBAAkB,SAAAhO,GAAK,OAAM6O,KAAOC,UAAU9O,EAAO,eAC9EiP,EAAqBjB,EAAW,yBAAyB,SAAAhO,GAAK,OAAM6O,KAAOC,UAAU9O,EAAO,eAC5FkP,EAAalB,EAAW,qBAAqB,SAAAhO,GAAK,OAAK6O,KAAOC,UAAU9O,EAAO,cAAegO,EAAW,kBAAkB,SAAAhO,GAAK,OAAK6O,KAAOC,UAAU9O,EAAO,WAkCnK,OAhCImO,GACA3N,EAAgB,qBAAsB,CAAEN,IAAK,aAE7CkL,GACA5K,EAAgB,2FAA4F,CAAEmL,QAAS,QAASC,SAAS,EAAM1L,IAAK,cAEpJkO,GACA5N,EAAgB,sGAAuG,CAAEmL,QAAS,UAAWC,SAAS,EAAM1L,IAAK,4BAEjKmO,GACA7N,EAAgB,+EAAgF,CAAEN,IAAK,kBAEvGoO,GACA9N,EAAgB,6CAA8C,CAAEN,IAAK,sBAAuByL,QAAS,QAASC,SAAS,IAEvHgD,GACApO,EAAgB,4CAA6C,CAAEN,IAAK,iBAAkByL,QAAS,UAAWC,SAAS,IAEnHmD,GACAvO,EAAgB,oDAAqD,CAAEN,IAAK,iBAAkByL,QAAS,QAASC,SAAS,IAEzHoD,GACAxO,EAAgB,iDAAkD,CAAEN,IAAK,cAAeyL,QAAS,QAASC,SAAS,IAEnHqD,GACAzO,EAAgB,wDAAyD,CAAEN,IAAK,qBAAsByL,QAAS,QAASC,SAAS,IAEjIsD,GACA1O,EAAgB,oDAAqD,CAAEN,IAAK,eAnEtD,WACtB,IAAMiP,EAAsBnG,EAAK,iCAC3BoG,EAAkBpG,EAAK,wBAE7B,GAAKmG,GAAwBC,EAI7B,GAAmC,YAA/BD,EAAoBpF,OAAxB,CAKA,IAAMsF,EAA0B,IAAIC,KAC9BC,EAAsB,IAAID,KAEhCD,EAAwBG,QAAQF,KAAKG,MAAMN,EAAoBpF,SAC/DwF,EAAoBC,QAAQF,KAAKG,MAAML,EAAgBrF,SAEvD,IAAM2F,EAAgBC,GAAUtC,eAAesC,GAAU5C,cAAcsC,EAAyBE,IAEhG/O,EAAgB,+BAAD,OAAgCkP,EAAhC,4BAAyE,CAAExP,IAAK,iBAAkByL,QAAS,OAAQC,SAAS,SAZvIpL,EAAgB,sCAAuC,CAAEN,IAAK,iBAAkByL,QAAS,UAAWC,SAAS,IA4DrHgE,GAGI,eAAC/D,GAAA,EAAD,CAAWC,iBAAe,EAA1B,UACI,cAACE,GAAA,EAAD,CAAkBC,WAAY,cAAC,KAAD,IAAoB,gBAAc,wBAAwBC,GAAG,uBAA3F,SACI,sBAAK3M,UAAWJ,EAAQsL,aAAxB,UACI,qBAAKlL,UAAWJ,EAAQvC,MAAxB,SACI,eAACuP,GAAA,EAAD,CAAY5M,UAAWJ,EAAQiN,QAASzJ,MAAO,CAAElE,QAAS,OAAQC,WAAY,UAA9E,+BAEKyP,EAAW,cAAC,KAAD,CAAc5O,UAAWJ,EAAQ0L,KAAM5N,KAAK,UAAc,KACrEmO,EAAY,cAAC,KAAD,CAAe7L,UAAWJ,EAAQ0L,KAAM5N,KAAK,UAAc,KACvEoR,EAAgB,cAAC,KAAD,CAAY9O,UAAWJ,EAAQ0L,KAAM5N,KAAK,UAAc,UAGjF,sBAAKsC,UAAWJ,EAAQ6J,KAAxB,UACK+E,EAAU,YAAa,qBACvBA,EAAU,SAAU,sBACpBA,EAAU,SAAU,yCACpBA,EAAU,WAAY,4BAKnC,cAACzB,GAAA,EAAD,UACI,qBAAK/M,UAAWJ,EAAQ0Q,KAAxB,SACC1I,EAAM/C,KAAI,SAACsE,EAAMpE,GAAP,OACP,gCACI,iCAASoE,EAAKxI,MADlB,KACkCwI,EAAK1I,QAD7B0I,EAAKxI,eChMpB,SAAS4P,GAAWvT,GAC/B,OACE,qCACQA,EAAMwT,OAAOC,WAAa,cAACpC,GAAD,CAAY5E,KAAMzM,EAAMwT,OAAOC,aAAkB,KAC5EzT,EAAMwT,OAAOE,KAAK7L,KAAI,SAACP,EAAKS,GAAN,OACnB,cAACwF,GAAD,CAA8BiC,UAAYxP,EAAMwT,OAAOC,YAAwB,IAAV1L,EAAcT,IAAKA,EAAIA,IAAK8E,QAAS9E,EAAI8E,QAASrE,MAAOA,GAAhH,OAASA,S,cCNxB,SAAS4L,GAAc3T,GAClCqH,QAAQC,IAAI,+BAWZ,OACI,qBAAKlB,MAAO,CAAElE,QAAS,OAAQE,eAAgB,SAAUiM,cAAe,UAAxE,SACI,cAAC,gBAAD,CACIjI,MAAO,CAAC,aAAc,QACtBwN,aAAa,0FACbpT,SAdS,SAACqT,GAClBxM,QAAQC,IAAI,yCACRuM,EAAMrM,OAAS,IACfH,QAAQC,IAAI,QAASuM,EAAM,IAC3B7T,EAAM8T,SAASD,EAAM,KAEzBxM,QAAQC,IAAI,0CASJyM,WAAY,EACZC,cAAe,CAAC,OAAQ,OAAQ,QAChCC,YAAa,IACbC,wBAAwB,EACxBC,YAAY,M,sGCxB5B,WAA0BnT,GAA1B,wBAAAoT,EAAA,sEAC2BC,MAAMrT,EAAK,CAAC+B,KAAM,SAD7C,WACUuR,EADV,QAEkBC,GAFlB,sBAGc,IAAIC,MAAJ,mCAAsCxT,EAAtC,aAA8CsT,EAASG,SAHrE,uBAKuBH,EAASI,OALhC,cAKUA,EALV,OAQUC,EAASL,EAASM,QAAQC,IAAI,uBAEhC/R,EADA6R,GACW,UAAAG,KAAwB5B,MAAMyB,GAAQI,kBAAtC,eAAkDjS,WAAY,UAE9D9B,EAAIgU,UAAUhU,EAAIiU,YAAY,KAAO,GAEpDP,EAAKQ,KAAOpS,EAdhB,kBAgBW4R,GAhBX,6C,sBAmBA,IAAMnE,GAAQ,CACV4E,W,8CAEW5E,M,qECrBf,WAA6BvP,GAA7B,kBAAAoT,EAAA,sEAC2BgB,GAAYD,WAAWnU,GADlD,uBACY0T,EADZ,EACYA,KADZ,SAEiBW,GAAQX,GAFzB,oF,+BAKeW,G,mFAAf,WAAuBX,GAAvB,UAAAN,EAAA,sEACiBkB,KAAMC,UAAUb,GADjC,oF,sEAIA,WAA4Bc,EAAK1S,GAAjC,UAAAsR,EAAA,sEACkBoB,EAAIC,KAAK3S,GAD3B,4CAC0C,OAD1C,kD,sEAIA,WAA+B0S,EAAK1S,EAAU4S,GAA9C,UAAAtB,EAAA,6DACIsB,EAASA,GAAU,OADvB,SAEiBF,EAAIC,KAAK3S,GAAU6S,MAAMD,GAF1C,oF,sBAKA,IAAMnF,GAAQ,CACV8E,QAASA,GACTO,c,6CACAC,a,+CACAC,gB,kDAGWvF,M,gDC1Bf,WAA0BiF,GAA1B,wCAAApB,EAAA,6DACUP,EAAQ,CAAC,gBAAiB,aAAc,eAAgB,oCAAqC,oCAE/FJ,GAAa,EAHrB,kBAK2BsC,GAASD,gBAAgBN,EAAK,iBAAkB,UAL3E,OAKQ/B,EALR,uDAOQpM,QAAQC,IAAI,oEAPpB,QAUU0O,EAAW,GAVrB,eAWoBR,EAAIC,KAAK,8BAX7B,gEAWe3N,EAXf,SAYcoN,KAAKe,WAAW,OAAQnO,EAAEoN,KAAKe,WAAW,OAAoB,mBAAXnO,EAAEoN,KAZnE,mFAcqCpN,EAAE6N,MAAM,UAd7C,QAcYK,EAASlO,EAAEoN,MAdvB,0DAgBY7N,QAAQC,IAAR,uCAhBZ,iJAqBI,IADMoM,EAAO,GACb,MAAuBG,EAAvB,eAAW/Q,EAAmB,KACtBkT,EAASlT,IACT4Q,EAAK7H,KAAK,CAAEvE,IAAKxE,EAAUsJ,QAAS4J,EAASlT,KAvBzD,eA0B2BoT,OAAOC,KAAKH,GAAUI,QA1BjD,IA0BI,2BAAWtT,EAA0C,QAC5C+Q,EAAMjI,SAAS9I,IAChB4Q,EAAK7H,KAAK,CAAEvE,IAAKxE,EAAUsJ,QAAS4J,EAASlT,KA5BzD,uDAgCW,CACHuT,YAAY,EACZ5C,WAAYA,EACZC,KAAMA,IAnCd,gF,sEAuCA,WAAuBgB,GAAvB,UAAAN,EAAA,kEAImBM,EAAKQ,MAAQ,UAJhC,SAI0DR,EAAK/N,OAJ/D,gCAIcW,IAJd,KAI2C8E,QAJ3C,qCAEQiK,YAAY,EACZ3C,KAHR,mD,sBAUA,IAMMnD,GAAQ,CACV+F,W,6CACAC,Q,6CACAC,cATkB,CAClBH,YAAY,EACZ5C,WAAY,GACZC,KAAM,KASKnD,M,qBCzBT5P,GAAYC,aAAW,SAAAC,GAAK,YAAK,CACnCwC,KAAM,CACFnB,QAAS,OACT8K,SAAU,QAEdlM,KAAM,CACJC,SAAU,GAGZ0V,OAAQ,GAERC,QAAQ,eACL7V,EAAMY,YAAYwK,KAAK,MAAQ,CAC9B,kBAAmB,WACnB,YAAa,SAGjB0K,OAAO,aACL5V,SAAU,GACTF,EAAMY,YAAYwK,KAAK,MAAQ,CAC9B,aAAc,OACd2K,MAAO,GACPC,cAAehW,EAAMe,QAAQ,KAGjCvB,MAAO,CACL,eAAgB,QAGlByW,OAAQjW,EAAMkW,OAAOL,QAErBtK,QAAQ,aACNrL,SAAU,EACViM,SAAU,OACV,cAAenM,EAAMkW,OAAOL,QAAQM,WACnCnW,EAAMY,YAAYwK,KAAK,MAAQ,CAC9B,cAAgD,EAAjCpL,EAAMkW,OAAOL,QAAQM,YAGxCC,WAAS,GACPD,UAAW,OACX9U,QAAS,OACTmM,cAAe,SACf6I,WAAYrW,EAAMe,QAAQ,IAJnB,cAKNf,EAAMY,YAAYwK,KAAK,MAAQ,CAC9BiL,WAAY,IANP,8BAQQrW,EAAMe,QAAQ,IARtB,GAUTuV,OAAQ,CACN9Q,UAAW,SACXtE,QAAS,WAeA,SAASqV,GAAIpX,GACxB,IACA,ECxGW,SAAyB2D,EAAK0T,GAK3C,MAAsCpX,oBAAS,WAC7C,IAEE,IAAMqX,EAAOhT,OAAOiT,aAAaC,QAAQ7T,GAGzC,OAAO2T,EAAOG,KAAKvE,MAAMoE,GAAQD,EACjC,MAAO7K,GAGP,OADAnF,QAAQC,IAAIkF,GACL6K,MAVX,mBAAOK,EAAP,KAAoBC,EAApB,KAiCA,MAAO,CAACD,EAjBS,SAACjU,GAChB,IAEE,IAAMmU,EACJnU,aAAiBoU,SAAWpU,EAAMiU,GAAejU,EAGnDkU,EAAeC,GAGftT,OAAOiT,aAAaO,QAAQnU,EAAK8T,KAAKM,UAAUH,IAChD,MAAOpL,GAEPnF,QAAQC,IAAIkF,MDsEkBwL,CAAgB,iBADxBC,YAAc,+BAAgC,CAAEC,OAAO,KAC/E,mBAAOhY,EAAP,KAAiBC,EAAjB,KAEA,EAAsBF,mBAASD,EAAMgB,KAArC,mBAAOA,EAAP,KAAY6B,EAAZ,KACA,EAAgC5C,mBAAS,IAAzC,mBAAO6C,EAAP,KAAiBqV,EAAjB,KAEA,EAA4BlY,mBAASmY,GAAY5B,eAAjD,mBAAOhD,EAAP,KAAe6E,EAAf,KACA,EAA0BpY,oBAAS,GAAnC,mBAAOuM,EAAP,KAAc8L,EAAd,KACA,EAA8BrY,oBAAS,GAAvC,mBAAOsY,EAAP,KAAgBC,EAAhB,KAEMC,EAASvY,EAAW,OAAS,QAC7BwY,EAAgBC,YAAYC,YAAa,CAC3CtX,QAAS,CACLyB,KAAM0V,MAUdjN,qBAAU,WACR5H,EAAgB5D,EAAMgB,OAErB,IAEH,IAAM6X,EAAenP,IAAMC,YACrBmP,EAAe,SAACnV,GAAD,OAAS,WAC5BkV,EAAa/O,QAAQiP,cAAcpV,KAG/BC,EAAkB,SAACoV,GACvB,GAAKA,EAEE,CACLV,GAAS,GACTE,GAAW,GAEX3V,EAAOmW,GACPC,EAAcD,GACdb,EAAY,IAEZ,IAAMnX,EAxDd,SAAqBA,GAGnB,OAAIA,EAAI0M,MAFY,mEAGT1M,EAAIkY,QAAQ,qBAAsB,8CAClClY,EAAI0M,MAHI,8DAIR1M,EAAIkY,QAAQ,oDAAqD,oDAErElY,EAgDWmY,CAAYH,GAExB5D,GAAYD,WAAWnU,GAAKoY,KAAKC,GAAkBC,MAAMC,QAXzDC,KAyBEH,EAAmB,SAAC3E,GACxBqB,GAASV,QAAQX,GACd0E,KAAKK,GACLH,OAAM,SAAC9M,GACN,IAAIkN,EACJ,IACEA,EAAcC,KAAiBzG,MAAMwB,EAAKkF,MAAMA,KAChD,MAAOC,GACPH,EAAc,GAGI,KAAhBA,GAAsBA,EAAYzD,WAAW,SAC/CmC,GAAY7B,QAAQ7B,GAAM0E,MAAK,SAAC5F,GAC9B6E,EAAU7E,GACVgF,GAAW,MACVc,MAAMC,GAETA,EAAY/M,OAKdiN,EAAkB,SAACjE,GACvB4C,GAAY9B,WAAWd,GAAK4D,MAAK,SAAC5F,GAChC6E,EAAU7E,GACVgF,GAAW,GACXnR,QAAQC,IAAI,uBACXgS,MAAMC,IAGLA,EAAc,SAAC/M,GACnBnF,QAAQC,IAAIkF,GACZ8L,GAAS,IAGLkB,EAAc,WAClB3W,EAAO,IACPsV,EAAY,IACZG,GAAS,GACTE,GAAW,GACXH,EAAUD,GAAY5B,eACtByC,IACIJ,EAAa/O,SAAS+O,EAAa/O,QAAQiP,iBAG3CE,EAAgB,SAACD,GACrB,IAAMc,EAAY,IAAIC,IAAIzV,OAAOC,UAC7ByU,EACFc,EAAUE,aAAaC,IAAI,MAAOjB,GAElCc,EAAUE,aAAaE,OAAO,OAEhC5V,OAAO6V,QAAQC,aAAa,GAAI,GAAIN,IAGtC,OACE,cAAC,IAAD,CAAaO,eAAgBC,IAASC,WAnGnBC,EAmG4CC,eAAe,EAA9E,SACE,cAACC,EAAA,EAAD,CAAsBC,aAAW,EAAjC,SACE,cAACC,EAAA,EAAD,CAAe/Z,MAAO6X,EAAtB,SACE,cAAC,IAAD,CACEzL,IAAK4L,EACLgC,OAAQ,SAAClX,GAAD,OACN,cAAC8B,EAAA,EAAD,CAAQlF,QAASuY,EAAanV,GAA9B,oBAIFmX,SAAU,GACVC,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdC,OAAK,EACLC,kBAAgB,EAblB,SAcE,cAACC,GAAD,CACE5H,OAAQA,EACRxS,IAAKA,EACL8B,SAAUA,EACV0J,MAAOA,EACP+L,QAASA,EACT7R,OAAQ1G,EAAM0G,OACd2U,aA1FS,SAAC3G,GACpB4D,GAAS,GACTE,GAAW,GAEXL,EAAYzD,EAAKQ,MACjBrS,EAAO,IAEPwW,EAAiB3E,IAoFP8E,YAAaA,EACb5V,gBAAiBA,EACjB1D,SAAUA,EACVob,qBA7HiB,WACzBnb,GAAaD,cAqIrB,SAASkb,GAAT,GAA+I,IAA9H5H,EAA6H,EAA7HA,OAAQxS,EAAqH,EAArHA,IAAK8B,EAAgH,EAAhHA,SAAU0J,EAAsG,EAAtGA,MAAO+L,EAA+F,EAA/FA,QAAS7R,EAAsF,EAAtFA,OAAQ2U,EAA8E,EAA9EA,aAAc7B,EAAgE,EAAhEA,YAAa5V,EAAmD,EAAnDA,gBAAiB1D,EAAkC,EAAlCA,SAAUob,EAAwB,EAAxBA,qBAC9G1Y,EAAUjC,KAEV4a,EAAW,WACf,OAAI/O,GACFnF,QAAQC,IAAI,0BAEV,eAACkU,EAAA,EAAD,CAAOC,SAAS,QAAhB,UACI,cAACC,EAAA,EAAD,oBADJ,mLAOOnD,GACTlR,QAAQC,IAAI,4BAEV,qBAAKlB,MAAO,CAAElE,QAAS,OAAQE,eAAgB,UAA/C,SACI,cAACuZ,EAAA,EAAD,OAGGnI,EAAO6C,YAChBhP,QAAQC,IAAI,oBAEV,cAACiM,GAAD,CAAYC,OAAQA,MAGtBnM,QAAQC,IAAI,mBAEV,cAACqM,GAAD,CAAeG,SAAUuH,MAKzBO,EAAS,WACb,OACE,cAACC,EAAA,EAAD,CAAQ7Y,UAAWJ,EAAQ6T,OAA3B,SACE,eAACqF,EAAA,EAAD,CAAS9Y,UAAWJ,EAAQ8T,QAA5B,UACE,cAACpW,EAAA,EAAD,CAAYC,QAASiZ,EAAa/Y,MAAM,UAAUC,KAAK,QAAvD,SACE,cAAC,IAAD,MAEF,cAACuC,EAAA,EAAD,CAAQ8Y,MAAI,EAAZ,SACE,qBAAK/Y,UAAWJ,EAAQ9B,SAE1B,qBAAKkC,UAAWJ,EAAQ+T,OAAxB,SACE,cAAChU,EAAD,CAAQ3B,IAAKA,EAAK8B,SAAUA,EAAUc,gBAAiBA,MAExD5C,EAAM,cAACgD,EAAD,CAAahD,IAAKA,IAAU,KACnC,cAAC6E,GAAD,IACA,cAAC,GAAD,CAAa7E,IAAKA,EAAK0F,OAAQA,IAC/B,cAAC3G,EAAD,CAAgBG,SAAUA,EAAUM,SAAU8a,UAOtD,OACE,sBAAKtY,UAAWJ,EAAQS,KAAM+C,MAAO,CAAClE,QAAS,OAAQ8U,UAAW,QAAS3I,cAAe,UAA1F,UACE,cAAC2N,EAAA,EAAD,IACA,cAACJ,EAAD,IACA,sBAAM5Y,UAAWJ,EAAQwJ,QAAzB,SACE,cAAC6P,EAAA,EAAD,CAAWC,SAAS,KAAKlZ,UAAWJ,EAAQqU,UAA5C,SACE,cAACsE,EAAD,QAGJ,yBAAQvY,UAAWJ,EAAQuU,OAA3B,uBACS,cAACnR,EAAA,EAAD,CAAMC,KAAK,wBAAwBzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAAvG,uBADT,SACmJ,cAACH,EAAA,EAAD,CAAMC,KAAK,iCAAiCzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAAhH,qBADnJ,SACoS,cAACH,EAAA,EAAD,CAAMC,KAAK,iCAAiCzC,OAAO,SAAS0C,IAAI,sBAAsBzF,MAAM,UAAU0F,UAAU,SAAhH,kCEzT1S,IAAMgW,GAAc/U,QACa,cAA7B9C,OAAOC,SAAS6X,UAEe,UAA7B9X,OAAOC,SAAS6X,UAEhB9X,OAAOC,SAAS6X,SAAS1O,MAAM,2DAqCnC,SAAS2O,GAAgBC,EAAOC,GAC9BhX,UAAUiX,cACPC,SAASH,GACTlD,MAAK,SAACsD,GACLA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiBG,QACfxX,UAAUiX,cAAcQ,YAI1B3V,QAAQC,IACN,+GAKEiV,GAAUA,EAAOU,UACnBV,EAAOU,SAASP,KAMlBrV,QAAQC,IAAI,sCAGRiV,GAAUA,EAAOW,WACnBX,EAAOW,UAAUR,WAO5BpD,OAAM,SAAC9M,GACNnF,QAAQmF,MAAM,4CAA6CA,MCzFnE,IAAM2Q,GAAS7Y,OAAOC,SAAS4Y,OACzBC,GAAS,IAAIC,gBAAgBF,IAE7BzW,GAAS,CACb1F,IAAKoc,GAAOvI,IAAI,MAAO,IACvBlO,KAAMyW,GAAOvI,IAAI,OAAQ,IACzBxU,MAAO+c,GAAOvI,IAAI,QAAS,KAGzB7T,GAAM,GACV,GAAI0F,GAAO1F,IACTA,GAAM0F,GAAO1F,SACR,GAAI0F,GAAOC,KAAM,CAEtB,IAAM+G,GAAQhH,GAAOC,KAAK+G,MAAM,uBAC5BA,KACF1M,GAAM0M,GAAM,IAIhBrG,QAAQC,IAAI,MAAOtG,IAEnBsc,IAASC,OACP,cAACnG,GAAD,CAAKpW,IAAKA,GAAK0F,OAAQA,KACvBhB,SAAS8X,cAAc,UDThB,SAAkBjB,GACvB,GAA6C,kBAAmBhX,UAAW,CAGzE,GADkB,IAAIwU,IAAIS,GAAwBlW,OAAOC,SAAS0B,MACpDzB,SAAWF,OAAOC,SAASC,OAIvC,OAGFF,OAAOmZ,iBAAiB,QAAQ,WAC9B,IAAMnB,EAAK,UAAM9B,GAAN,sBAEP2B,KAgEV,SAAiCG,EAAOC,GAEtClI,MAAMiI,EAAO,CACX1H,QAAS,CAAE,iBAAkB,YAE5BwE,MAAK,SAAC9E,GAEL,IAAMoF,EAAcpF,EAASM,QAAQC,IAAI,gBAEnB,MAApBP,EAASG,QACO,MAAfiF,IAA8D,IAAvCA,EAAYgE,QAAQ,cAG5CnY,UAAUiX,cAAcmB,MAAMvE,MAAK,SAACsD,GAClCA,EAAakB,aAAaxE,MAAK,WAC7B9U,OAAOC,SAASsZ,eAKpBxB,GAAgBC,EAAOC,MAG1BjD,OAAM,WACLjS,QAAQC,IAAI,oEAtFVwW,CAAwBxB,EAAOC,GAI/BhX,UAAUiX,cAAcmB,MAAMvE,MAAK,WACjC/R,QAAQC,IACN,+GAMJ+U,GAAgBC,EAAOC,OChBjCwB,K","file":"static/js/main.0fe4f7df.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport DarkModeIcon from \"@mui/icons-material/Brightness4\";\nimport LightModeIcon from \"@mui/icons-material/Brightness7\";\n\nexport default function DarkModeToggle(props) {\n    const [darkMode, setDarkMode] = useState(props.darkMode);\n\n    const handleDarkModeToggle = () => {\n        props.onChange(!darkMode);\n        setDarkMode(!darkMode);\n    };\n\n    return (\n        <Tooltip title=\"Toggle dark mode\">\n            <IconButton onClick={handleDarkModeToggle} color=\"inherit\" size=\"large\">\n                { darkMode ? <LightModeIcon /> : <DarkModeIcon /> }\n            </IconButton>\n        </Tooltip>\n    );\n}","import React, { useState } from \"react\";\n\nimport { alpha } from \"@mui/material/styles\";\n\nimport makeStyles from '@mui/styles/makeStyles';\n\nimport InputBase from \"@mui/material/InputBase\";\nimport Hidden from \"@mui/material/Hidden\";\nimport LinkIcon from \"@mui/icons-material/Link\";\nimport UploadIcon from \"@mui/icons-material/CloudUpload\";\n\nconst useStyles = makeStyles(theme => ({\n    grow: {\n      flexGrow: 1\n    },\n    url: {\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: alpha(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: alpha(theme.palette.common.white, 0.25),\n      },\n      [theme.breakpoints.up('md')]: {\n        marginRight: theme.spacing(2),\n        marginLeft: theme.spacing(2),\n      },\n      flexGrow: 1\n    },\n    urlIcon: {\n      padding: theme.spacing(0, 2),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    inputRoot: {\n      color: \"inherit\",\n      width: \"100%\"\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 1),\n      [theme.breakpoints.up('md')]: {\n        paddingLeft: `calc(1em + ${theme.spacing(4)})`,\n      },\n      transition: theme.transitions.create('width'),\n      width: \"100%\",\n    }\n}));\n\n\nexport default function UrlBar(props) {\n    const classes = useStyles();\n\n    const [url, setUrl] = useState(props.url);\n    const [mode] = useState(props.filename ? \"upload\" : \"url\");\n\n    const handleChange = (event) => {\n        if (mode === \"url\") {\n            setUrl(event.target.value);\n        }\n    }\n\n    const handleKeyDown = (event) => {\n        if (mode === \"url\" && event.key === \"Enter\") {\n            props.handleUrlChange(url);\n        }\n    }\n\n    return (\n        <div className={classes.url}>\n            <Hidden lgDown>\n                <div className={classes.urlIcon}>\n                {props.filename ? (\n                    <UploadIcon />\n                ) : (\n                    <LinkIcon />\n                )}\n                </div>\n            </Hidden>\n            <InputBase\n                placeholder=\"URL...\"\n                classes={{\n                    root: classes.inputRoot,\n                    input: classes.inputInput,\n                }}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                defaultValue={(mode === \"upload\" ? props.filename : props.url)}\n                inputProps={{ readOnly: mode === \"upload\", }}\n            />\n        </div>\n    );\n}","import React, { useState } from \"react\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport Tooltip from \"@mui/material/Tooltip\";\n\nimport Button from \"@mui/material/Button\";\nimport TextField from \"@mui/material/TextField\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\n\nimport ShareIcon from \"@mui/icons-material/Share\";\n\nimport { useSnackbar } from \"notistack\";\n\nexport default function ShareButton(props) {\n    const { enqueueSnackbar } = useSnackbar();\n    const [ shareModalOpen, setShareModalOpen ] = useState(false);\n    const shareUrl = window.location.origin + window.location.pathname + \"?url=\" + encodeURIComponent(props.url);\n\n    const handleShareClick = () => {\n        setShareModalOpen(true);\n    }\n\n    const handleShare = () => {\n        if (navigator.share) {\n            navigator.share({\n                title: document.title,\n                url: shareUrl\n            })\n            handleClose();\n        }\n    }\n\n    const handleCopy = () => {\n        if (navigator.clipboard) {\n            navigator.clipboard.writeText(shareUrl);\n            enqueueSnackbar(\"URL copied to clipboard!\");\n            handleClose();\n        }\n    }\n\n    const handleClose = () => {\n        setShareModalOpen(false);\n    }\n\n    if (true) {\n        return <>\n        <Tooltip title=\"Get shareable link\">\n            <IconButton onClick={handleShareClick} color=\"inherit\" size=\"large\">\n                <ShareIcon />\n            </IconButton>\n        </Tooltip>\n\n        <Dialog open={shareModalOpen} onClose={handleClose} fullWidth>\n            <DialogTitle>Shareable link</DialogTitle>\n            <DialogContent>\n                <TextField value={shareUrl} InputProps={{ readOnly: true, }} onFocus={event => {event.target.select()}} fullWidth />\n            </DialogContent>\n            <DialogActions>\n                {(navigator.share) ? \n                    <Button onClick={handleShare}>\n                        Share\n                    </Button>\n                :\n                    (null)\n                }\n                {(navigator.clipboard) ? \n                    <Button onClick={handleCopy}>\n                        Copy\n                    </Button>\n                : \n                    (null)\n                }\n                <Button onClick={handleClose}>\n                    Close\n                </Button>\n            </DialogActions>\n        </Dialog>\n        </>;\n    } else {\n        return (null)\n    }\n}","import React, { useState } from \"react\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport Tooltip from \"@mui/material/Tooltip\";\n\nimport Button from \"@mui/material/Button\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport Link from \"@mui/material/Link\";\n\nimport InfoIcon from \"@mui/icons-material/Info\";\n\nexport default function InfoButton(props) {\n    const [ infoModalOpen, setInfoModalOpen ] = useState(false);\n\n    const handleInfoClick = () => {\n        setInfoModalOpen(true);\n    }\n\n    const handleClose = () => {\n        setInfoModalOpen(false);\n    }\n\n    if (true) {\n        return <>\n        <Tooltip title=\"About Bundle Viewer\">\n            <IconButton onClick={handleInfoClick} color=\"inherit\" size=\"large\">\n                <InfoIcon />\n            </IconButton>\n        </Tooltip>\n\n        <Dialog open={infoModalOpen} onClose={handleClose} fullWidth>\n            <DialogTitle>About Bundle Viewer</DialogTitle>\n            <DialogContent>\n                <p>\n                    Bundle Viewer is a viewer for <Link href=\"https://octoprint.org\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">OctoPrint</Link> system info bundles and log files.\n                </p>\n                <p>\n                    Its source code can be found on <Link href=\"https://github.com/OctoPrint/bundleviewer.octoprint.org\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">github.com/OctoPrint/bundleviewer.octoprint.org</Link>.\n                </p>\n                <hr />\n                <p>\n                    Bundleviewer can be installed as a PWA and used a share target on Android.\n                </p>\n                <hr />\n                <p>\n                    There's an accompanying web extension for Firefox and Chrome to add an \"Open in Bundle Viewer\" context menu to links in the browser on \n                    associated websites:\n                </p>\n                <p style={{textAlign: \"center\"}}>\n                    <Link href=\"https://addons.mozilla.org/en-GB/firefox/addon/open-in-bundle-viewer/\" target=\"_blank\" rel=\"noopener noreferrer\" color=\"inherit\" underline=\"always\"><img src=\"https://img.shields.io/amo/v/open-in-bundle-viewer?label=Firefox%20add-on&logo=firefox\" alt=\"Firefox add-on\" /></Link> <Link href=\"https://chrome.google.com/webstore/detail/open-in-bundle-viewer/pjjocccheogfceldegkfnbfmobmblhpp\" target=\"_blank\" rel=\"noopener noreferrer\" color=\"inherit\" underline=\"always\"><img src=\"https://img.shields.io/chrome-web-store/v/pjjocccheogfceldegkfnbfmobmblhpp?label=Chrome%20extension&logo=google%20chrome\" alt=\"Chrome extension\" /></Link>\n                </p>\n                <p>\n                    Its source code can be found on <Link href=\"https://github.com/OctoPrint/Open-in-Bundle-Viewer\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">github.com/OctoPrint/Open-in-Bundle-Viewer</Link>.\n                </p>\n                <p>\n                    There's also an accompanying <Link href=\"https://community.octoprint.org/t/open-in-bundle-viewer-browser-extension/30275\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">forum thread</Link>.\n                </p>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose}>\n                    Close\n                </Button>\n            </DialogActions>\n        </Dialog>\n        </>;\n    } else {\n        return (null)\n    }\n}","import React, { useState } from \"react\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport Tooltip from \"@mui/material/Tooltip\";\n\nimport Button from \"@mui/material/Button\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\n\nimport BugIcon from \"@mui/icons-material/BugReport\";\n\nexport default function InfoButton(props) {\n    const [ debugModalOpen, setDebugModalOpen ] = useState(false);\n\n    const handleDebugClick = () => {\n        setDebugModalOpen(true);\n    }\n\n    const handleClose = () => {\n        setDebugModalOpen(false);\n    }\n\n    if (true) {\n        return <>\n        <Tooltip title=\"Debug Bundle Viewer\">\n            <IconButton onClick={handleDebugClick} color=\"inherit\" size=\"large\">\n                <BugIcon />\n            </IconButton>\n        </Tooltip>\n\n        <Dialog open={debugModalOpen} onClose={handleClose} fullWidth>\n            <DialogTitle>Debug info</DialogTitle>\n            <DialogContent>\n                <dl>\n                    <dt>shared.text</dt>\n                    <dd>{props.shared.text}</dd>\n                    <dt>shared.url</dt>\n                    <dd>{props.shared.url}</dd>\n                    <dt>shared.title</dt>\n                    <dd>{props.shared.title}</dd>\n                    <dt>url</dt>\n                    <dd>{props.url}</dd>\n                </dl>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose}>\n                    Close\n                </Button>\n            </DialogActions>\n        </Dialog>\n        </>;\n    } else {\n        return (null)\n    }\n}","import React, { useState } from \"react\";\r\n\r\nimport Tooltip from \"@mui/material/Tooltip\";\r\nimport Select from \"@mui/material/Select\";\r\nimport MenuItem from \"@mui/material/MenuItem\";\r\nimport ListItemText from \"@mui/material/ListItemText\";\r\nimport CheckBox from \"@mui/material/Checkbox\";\r\nimport IconButton from \"@mui/material/IconButton\";\r\n\r\nimport FilterIcon from \"mdi-material-ui/Filter\"\r\n\r\nexport default function FilterSelector(props) {\r\n    const filters = props.filters;\r\n    const active = props.active;\r\n    const handleFilterChange = props.handleFilterChange;\r\n\r\n    const [activeFilters, setActiveFilters] = useState(active || []);\r\n\r\n    const [anchor, setAnchor] = useState(false);\r\n    const open = Boolean(anchor);\r\n    const handleOpen = (event) => {\r\n        setAnchor(event.currentTarget);\r\n    };\r\n    const handleClose = () => {\r\n        setAnchor(false);\r\n    };\r\n\r\n    const handleChange = (event) => {\r\n        setActiveFilters(() => {\r\n            if (handleFilterChange) {\r\n                handleFilterChange(event.target.value);\r\n            }\r\n            return event.target.value;\r\n        });\r\n    }\r\n\r\n    console.log(\"Filters:\", filters);\r\n    console.log(\"Active filters:\", activeFilters);\r\n\r\n    return (\r\n        <>\r\n            <Tooltip title=\"Filters\"><IconButton onClick={handleOpen} color={activeFilters.length ? 'primary' : 'default'} size=\"small\"><FilterIcon /></IconButton></Tooltip>\r\n            <Select\r\n                multiple\r\n                value={activeFilters}\r\n                style={{display: \"none\"}}\r\n                open={open}\r\n                onClose={handleClose}\r\n                onChange={handleChange}\r\n                MenuProps={{\r\n                    anchorEl: anchor\r\n                }}\r\n            >\r\n                {filters.map((f, index) => (\r\n                    <MenuItem key={index} value={f.pattern}>\r\n                        <CheckBox checked={!!activeFilters.find(element => element.source === f.pattern.source)} />\r\n                        <ListItemText primary={f.title} />\r\n                    </MenuItem>\r\n                ))}\r\n            </Select>\r\n        </>\r\n    )\r\n}\r\n","import React, { useState } from \"react\";\n\nimport { alpha } from \"@mui/material/styles\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport PrevIcon from \"@mui/icons-material/ExpandLess\";\nimport NextIcon from \"@mui/icons-material/ExpandMore\";\nimport CancelIcon from \"@mui/icons-material/Clear\";\nimport InputBase from \"@mui/material/InputBase\";\nimport IconButton from \"@mui/material/IconButton\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\nimport Tooltip from \"@mui/material/Tooltip\";\n\nimport RegexIcon from \"mdi-material-ui/Regex\";\nimport CaseIcon from \"mdi-material-ui/FormatLetterCase\";\n\nimport FilterSelector from \"./FilterSelector\";\n\nconst useStyles = makeStyles(theme => ({\n    grow: {\n      flexGrow: 1\n    },\n    query: {\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: alpha(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: alpha(theme.palette.common.white, 0.25),\n      },\n      [theme.breakpoints.up('md')]: {\n        marginRight: theme.spacing(2),\n        marginLeft: theme.spacing(2),\n      },\n      flexGrow: 1,\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n    },\n    inputRoot: {\n      color: \"inherit\",\n      width: \"100%\"\n    },\n    inputInput: {\n      padding: theme.spacing(1),\n      transition: theme.transitions.create('width'),\n      width: \"100%\",\n    },\n    result: {\n      color: theme.palette.secondary,\n      fontSize: theme.typography.pxToRem(12),\n    }\n}));\n\n\nexport default function SearchBar(props) {\n    const pos = props.pos;\n    const count = props.count;\n    const handlePerformQuery = props.handlePerformQuery;\n    const handlePerformFilter = props.handlePerformFilter;\n    const filters = props.filters;\n\n    const classes = useStyles();\n\n    const [query, setQuery] = useState(props.query);\n    const [regexMode, setRegexMode] = useState(false);\n    const [caseSensitive, setCaseSensitive] = useState(false);\n    const [activeFilters, setActiveFilters] = useState([]);\n\n    const inputRef = React.createRef();\n\n    const handleChange = (event) => {\n      setQuery(event.target.value);\n      if (props.handleQueryChange) {\n        props.handleQueryChange(query);\n      }\n    }\n\n    const handleKeyDown = (event) => {\n      if (event.key === \"Enter\") {\n        handlePerform();\n      }\n    }\n\n    const handlePerform = () => {\n      if (handlePerformQuery) {\n        handlePerformQuery(query, regexMode, caseSensitive);\n      }\n    }\n\n    const handleCancel = () => {\n      setQuery(\"\");\n      inputRef.current.value = \"\";\n      if (props.onCancel) {\n        props.onCancel();\n      }\n    }\n\n    const handleToggleRegex = () => {\n      setRegexMode(regexMode => {\n        const result = !regexMode;\n        handlePerformQuery(query, result, caseSensitive);\n        return result;\n      });\n    }\n\n    const handleToggleCaseSensitive = () => {\n      setCaseSensitive(caseSensitive => {\n        const result = !caseSensitive;\n        handlePerformQuery(query, regexMode, result);\n        return result;\n      });\n    }\n\n    const handleFilterChange = (f) => {\n      f = f || [];\n      setActiveFilters(f);\n      if (handlePerformFilter) {\n        handlePerformFilter(f);\n      }\n    }\n\n    const SearchStartAdornment = () => (\n      <InputAdornment position=\"start\">\n        <Tooltip title=\"Search\"><span><IconButton onClick={handlePerform} disabled={query === \"\"} size=\"small\"><SearchIcon /></IconButton></span></Tooltip>\n      </InputAdornment>\n    )\n\n    const SearchEndAdornment = (props) => {\n        return(\n            <InputAdornment position=\"end\">\n              {count ? <span className={classes.result}>{pos} / {count}</span> : (null)}\n              {filters.length ? <FilterSelector filters={filters} active={activeFilters} handleFilterChange={handleFilterChange} /> : (null)}\n              <Tooltip title=\"Toggle regular expression mode\"><IconButton onClick={handleToggleRegex} color={regexMode ? 'primary' : 'default'} size=\"small\"><RegexIcon /></IconButton></Tooltip>\n              <Tooltip title=\"Toggle case sensitivity\"><IconButton onClick={handleToggleCaseSensitive} color={caseSensitive ? 'primary' : 'default'} size=\"small\"><CaseIcon /></IconButton></Tooltip>\n              <Tooltip title=\"Scroll to previous match\"><span><IconButton onClick={props.onPrev} disabled={count === 0} size=\"small\"><PrevIcon /></IconButton></span></Tooltip>\n              <Tooltip title=\"Scroll to next match\"><span><IconButton onClick={props.onNext} disabled={count === 0} size=\"small\"><NextIcon /></IconButton></span></Tooltip>\n              <Tooltip title=\"Delete search query\"><span><IconButton onClick={handleCancel} disabled={query === \"\"} size=\"small\"><CancelIcon /></IconButton></span></Tooltip>\n            </InputAdornment>)\n    }\n\n    return (\n        <div className={classes.query}>\n            <InputBase\n                placeholder=\"Search...\"\n                classes={{\n                    root: classes.inputRoot,\n                    input: classes.inputInput,\n                }}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                defaultValue={props.query}\n                startAdornment={<SearchStartAdornment />}\n                endAdornment={<SearchEndAdornment />}\n                inputRef={inputRef}\n            />\n        </div>\n    )\n}","import React, { useEffect, useState } from \"react\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport { FixedSizeList } from \"react-window\";\n\nexport default function LogLines(props) {\n    const lines = props.lines;\n    const maxLength = lines.reduce((s, t) => (t.length > s.length ? t : s), \"\").length;\n    const lineCount = lines.length;\n    const highlighted = props.highlighted;\n    const filtered = props.filtered;\n\n    const scrollTo = props.scrollTo;\n\n    const [displayLines, setDisplayLines] = useState([]);\n\n    const listRef = React.createRef();\n\n    useEffect(() => {\n        if (scrollTo > -1) {\n            listRef.current?.scrollToItem(scrollTo, \"center\");\n        }\n    }, [listRef, scrollTo]);\n\n    useEffect(() => {\n        const result = [];\n        let inFiltered = false;\n        for (let i = 0; i < lines.length; i++) {\n            if (filtered.includes(i)) {\n                if (!inFiltered) {\n                    inFiltered = true;\n                    result.push(-1);\n                }\n            } else {\n                if (inFiltered) {\n                    inFiltered = false;\n                }\n                result.push(i);\n            }\n        }\n        setDisplayLines(result);\n    }, [lines, filtered]);\n\n    const classes = makeStyles(theme => ({\n        log: {\n            flexGrow: 1,\n        },\n        pre: {\n            margin: 0,\n            \"font-family\": \"'JetBrains Mono', 'Droid Sans Mono', monospace\",\n            [theme.breakpoints.down('lg')]: {\n                fontSize: theme.typography.pxToRem(12),\n            }\n        },\n        linewrap: {\n            width:  `${maxLength}ch !important`,\n            \"&[data-matched=\\\"true\\\"]\": {\n                \"background-color\": \"rgba(255, 255, 0, .2)\"\n            }\n        },\n        line: {\n            paddingLeft: theme.spacing(1),\n\n            \"&::before\": {\n                content: \"attr(data-linenumber)\",\n                display: \"inline-block\",\n                width: `${lineCount.toString().length}ch`,\n                \"text-align\": \"right\",\n                \"margin-right\": \"1em\",\n                \"color\": theme.palette.text.disabled\n            },\n            \"&[data-loglevel=\\\"DEBUG\\\"]\": {\n                \"color\": theme.palette.text.secondary\n            },\n            \"&[data-loglevel=\\\"WARNING\\\"]\": {\n                \"color\": theme.palette.warning.main\n            },\n            \"&[data-loglevel=\\\"ERROR\\\"]\": {\n                \"color\": theme.palette.error.main\n            },\n            \"&[data-stream=\\\"stdin\\\"]\": {\n                \"color\": theme.palette.info.main\n            },\n            \"&[data-stream=\\\"stderr\\\"]\": {\n                \"color\": theme.palette.error.main\n            },\n            \"&[data-updateresult=\\\"FAILED\\\"]\": {\n                \"color\": theme.palette.error.main\n            },\n        },\n        filtered: {\n            paddingLeft: theme.spacing(1),\n            color: theme.palette.text.secondary,\n            \"font-style\": \"italic\",\n            \"&::before\": {\n                content: \"''\",\n                display: \"inline-block\",\n                width: `${lineCount.toString().length}ch`,\n                \"text-align\": \"right\",\n                \"margin-right\": \"1em\",\n            },\n        }\n    }))();\n\n    const getLoglevel = (line) => {\n        let parts = line.split(\" \");\n        return parts[5];\n    }\n\n    const getStream = (line) => {\n        const prefix = line.charAt(24);\n        switch (prefix) {\n            case \" \": return \"stdin\";\n            case \">\": return \"stdout\";\n            case \"!\": return \"stderr\";\n            default: return \"plain\";\n        }\n    }\n\n    const getUpdateResult = (line) => {\n        if (line.includes(\"- FAILED -\")) {\n            return \"FAILED\";\n        } else if (line.includes(\"- SUCCESS -\")) {\n            return \"SUCCESS\";\n        } else {\n            return \"PLAIN\";\n        }\n    }\n\n    const LogLine = ({ index, style }) => (\n        <span data-matched={highlighted.includes(index)} style={style} className={classes.linewrap}><span data-linenumber={index + 1} data-loglevel={getLoglevel(lines[index])} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    const CliLine = ({ index, style }) => (\n        <span data-matched={highlighted.includes(index)} style={style} className={classes.linewrap}><span data-linenumber={index + 1} data-stream={getStream(lines[index])} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    const UpdatelogLine = ({ index, style }) => (\n        <span data-matched={highlighted.includes(index)} style={style} className={classes.linewrap}><span data-linenumber={index + 1} data-updateresult={getUpdateResult(lines[index])} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    const PlainLine = ({ index, style }) => (\n        <span data-matched={highlighted.includes(index)} style={style} className={classes.linewrap}><span data-linenumber={index + 1} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    let LineComponent;\n    switch (props.language) {\n        case \"log\": {\n            LineComponent = LogLine;\n            break;\n        }\n        case \"cli\": {\n            LineComponent = CliLine;\n            break;\n        }\n        case \"updatelog\": {\n            LineComponent = UpdatelogLine;\n            break;\n        }\n        default: {\n            LineComponent = PlainLine;\n            break;\n        }\n    }\n\n    const Line = ({ index, style }) => {\n        const idx = displayLines[index];\n        if (idx === -1) {\n            return <span style={style} className={classes.linewrap}><span className={classes.filtered}>{\"[...]\"}</span></span>;\n        } else {\n            return <LineComponent index={idx} style={style} />\n        }\n    };\n\n    return (\n       <code className={classes.log}>\n            <pre className={classes.pre}>\n                <FixedSizeList\n                    height={500}\n                    itemCount={displayLines.length}\n                    itemSize={20}\n                    style={{overflow: \"scroll\"}}\n                    ref={listRef}\n                >\n                    {Line}\n                </FixedSizeList>\n            </pre>\n        </code>\n    )\n};","import React, {useEffect, useState} from \"react\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport Typography from \"@mui/material/Typography\";\nimport SearchBar from \"./SearchBar\";\nimport LogLines from \"./LogLines\";\n\nimport ErrorIcon from \"mdi-react/ErrorIcon\";\nimport ThrottledIcon from \"mdi-react/SpeedometerSlowIcon\";\n\nimport { useSnackbar } from \"notistack\";\n\nimport millify from \"millify\";\n\nconst languages = [\n    { \n        language: \"serial\", \n        patterns: [/^serial\\.log$/], \n        filters: [ \n            {\n                title: \"Temperature messages\", \n                pattern: /(Send: (N\\d+\\s+)?M105)|(Recv:\\s+(ok\\s+([PBN]\\d+\\s+)*)?([BCLPR]|T\\d*):-?\\d+)/\n            },\n            {\n                title: \"SD status messages\",\n                pattern: /(Send: (N\\d+\\s+)?M27)|(Recv: SD printing byte)|(Recv: Not SD printing)/\n            },\n            {\n                title: \"Position messages\",\n                pattern: /(Send:\\s+(N\\d+\\s+)?M114)|(Recv:\\s+(ok\\s+)?X:[+-]?([0-9]*[.])?[0-9]+\\s+Y:[+-]?([0-9]*[.])?[0-9]+\\s+Z:[+-]?([0-9]*[.])?[0-9]+\\s+E\\d*:[+-]?([0-9]*[.])?[0-9]+).*/\n            },\n            {\n                title: \"Wait responses\",\n                pattern: /Recv:\\s+wait/\n            },\n            {\n                title: \"Processing responses\",\n                pattern: /Recv: (echo:\\s*)?busy:\\s*processing/\n            }\n        ] \n    },\n    { \n        language: \"cli\", \n        patterns: [/^.*_console.*\\.log$/], \n        filters: [] \n    },\n    { \n        language: \"updatelog\", \n        patterns: [/^.*_update\\.log$/], \n        filters: [] \n    },\n    { \n        language: \"log\", \n        patterns: [/^.*\\.log$/], \n        filters: [ \n            {\n                title: \"DEBUG\", pattern: /\\sDEBUG\\s/\n            }, {\n                title: \"INFO\", pattern: /\\sINFO\\s/\n            } \n        ] \n    },\n]\n\nconst guessLanguage = (filename) => {\n    for (const { language, patterns } of languages) {\n        for (const pattern of patterns) {\n            if (filename.match(pattern)) {\n                console.log(`Match! ${pattern} vs ${filename}`)\n                return language;\n            }\n        }\n    }\n    return \"plain\";\n}\n\nconst getFilters = (l) => {\n    for (const { language, filters } of languages) {\n        if (l === language) {\n            return filters;\n        }\n    }\n    return [];\n}\n\nexport default function LogView(props) {\n    const { enqueueSnackbar } = useSnackbar();\n\n    const log = props.log;\n    const content = props.content;\n    const lines = content.trim().split(\"\\n\").map((line) => (line.trimEnd() + \"\\n\"));\n    const lineCount = lines.length;\n    const language = props.language || guessLanguage(log);\n\n    const [query, setQuery] = useState(\"\");\n    const [regexMode, setRegexMode] = useState(false);\n    const [caseSensitive, setCaseSensitive] = useState(false);\n    const [scrollTo, setScrollTo] = useState(0);\n    const [cursor, setCursor] = useState(0);\n    const [highlighted, setHighlighted] = useState([]);\n\n    const [filtered, setFiltered] = useState([]);\n\n    const classes = makeStyles(theme => ({\n        background: {\n        },\n        accordionbar: {\n            display: \"flex\",\n            flexGrow: 1,\n            alignItems: \"center\",\n            [theme.breakpoints.down('lg')]: {\n                flexWrap: \"wrap\",\n            },\n        },\n        accordiondetails: {\n            display: \"flex\",\n            flexGrow: 1,\n            flexDirection: \"column\"\n        },\n        grow: {\n            flexGrow: 1,\n        },\n        icon: {\n            padding: theme.spacing(0, 1),\n            fontSize: \"1.5rem\",\n        },\n        secondaryHeading: {\n            fontSize: theme.typography.pxToRem(12),\n            color: theme.palette.text.secondary,\n            padding: theme.spacing(0, 1),\n            textAlign: \"right\",\n            [theme.breakpoints.down('lg')]: {\n                textAlign: \"left\",\n                padding: theme.spacing(0, 0),\n            },\n        },\n        title: {\n            flexGrow: 1,\n            alignItems: \"center\",\n            [theme.breakpoints.down('lg')]: {\n                flexBasis: \"100%\"\n            }\n        },\n        info: {\n            [theme.breakpoints.down('lg')]: {\n                flexBasis: \"100%\"\n            }\n        }\n    }))();\n\n    const onCancelQuery = () => {\n        setHighlighted([]);\n        setCursor(0);\n        setQuery(\"\");\n    }\n\n    const onPerformFilter = (f) => {\n        console.log(\"Starting filter:\", f);\n        const matcher = (line) => {\n            for (const filter of f) {\n                if (line.match(filter)) {\n                    return true;\n                }\n            }\n            return false;\n        };\n\n        const ind = lines.reduce((result, line, index) => {\n            if (matcher(line)) {\n                result.push(index);\n            }\n            return result;\n        }, []);\n\n        setFiltered(ind);\n        console.log(\"Filtered:\", ind);\n    }\n\n    const onPerformQuery = (q, r, cs) => {\n        if (!q) return;\n\n        console.log(\"Starting query:\", q);\n        if (q !== query || r !== regexMode || cs !== caseSensitive) {\n            console.log(`... calculate matches for \"${q}\", regex: ${r}, case sensitive: ${cs}`);\n            const qLower = q.toLowerCase();\n\n            let matcher;\n            if (r) {\n                matcher = line => line.match(q);\n            } else {\n                matcher = line => line.includes(cs ? q : qLower);\n            }\n\n            const ind = lines.reduce((result, line, index) => {\n                if (matcher(cs ? line : line.toLowerCase())) {\n                        result.push(index);\n                }\n                return result;\n            }, []);\n\n            if (ind.length) {\n                setScrollTo(ind[0]);\n            }\n\n            setHighlighted(ind);\n            setCursor(0);\n            setQuery(q);\n            setRegexMode(r);\n            setCaseSensitive(cs);\n            console.log(\"Highlighted:\", ind, \", cursor:\", 0);\n        } else {\n            nextResult();\n        }\n    }\n\n    const nextResult = () => {\n        if (highlighted.length) {\n            const c = cursor < highlighted.length - 1 ? cursor + 1 : 0;\n            setScrollTo(highlighted[c]);\n            setCursor(c);\n        }\n    };\n    const previousResult = () => {\n        if (highlighted.length) {\n            const c = cursor > 0 ? (cursor - 1) : (highlighted.length - 1);\n            setScrollTo(highlighted[c]);\n            setCursor(c);\n        }\n    };\n\n    const [serialAndDisabled, setSerialAndDisabled] = useState(false);\n    const [throttled, setThrottled] = useState(false);\n\n    useEffect(() => {\n        setSerialAndDisabled((log === \"serial.log\" && lines.filter(line => line.trim() && !line.includes(\"serial.log is currently not enabled\")).length === 0));\n\n        const undervoltage = content.includes(\"!!! UNDERVOLTAGE REPORTED !!!\");\n        const overheating = content.includes(\"!!! FREQUENCY CAPPING DUE TO OVERHEATING REPORTED !!!\");\n        setThrottled(undervoltage || overheating);\n    \n        const piSupportLines = lines.filter(line => line.includes(\"|  Pi Support Plugin\") || line.includes(\"| !Pi Support Plugin\"));\n        const piSupportDisabled = piSupportLines.length && piSupportLines[piSupportLines.length - 1].includes(\"| !Pi Support Plugin\");\n    \n        if (serialAndDisabled) {\n            enqueueSnackbar(\"Serial log is currently not enabled. Should be enabled when reporting issues with the printer.\", { variant: \"info\" });\n        }\n        if (piSupportDisabled) {\n            enqueueSnackbar(\"Pi Support Plugin disabled in the log, there might be an undetected undervoltage or overheating situation!\", { variant: \"error\", persist: true, key: \"pi_support_disabled\" });\n        }\n        if (throttled) {\n            enqueueSnackbar(\"System is or was throttled, system may behave erratically. Fix before further debugging.\", { variant: \"error\", persist: true, key: \"throttled\" });\n        }\n    }, [log, lines, content, enqueueSnackbar, serialAndDisabled, throttled]);\n\n    return (\n        <Accordion key={log} defaultExpanded={props.expanded}>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />} aria-controls={\"panel-log-\" + props.index + \"-content\"} id={\"panel-log-\" + props.index + \"-header\"}>\n                <div className={classes.accordionbar}>\n                    <div className={classes.title}>\n                        <Typography className={classes.heading} style={{ display: \"flex\", alignItems: \"center\" }}>\n                            {log}\n                            {throttled ? <ThrottledIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                            {serialAndDisabled ? <ErrorIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                        </Typography>\n                    </div>\n                    <div className={classes.info}>\n                        <Typography className={classes.secondaryHeading}>\n                            {millify(content.length) + \" \" + (content.length === 1 ? \"char\" : \"chars\")}\n                        </Typography>\n                        <Typography className={classes.secondaryHeading}>\n                            {millify(lineCount) + \" \" + (lineCount === 1 ? \"line\" : \"lines\")}\n                        </Typography>\n                    </div>\n                </div>\n            </AccordionSummary>\n            <AccordionDetails className={classes.accordiondetails}>\n                <SearchBar \n                    className={classes.grow} \n                    pos={cursor + 1} \n                    count={highlighted.length} \n                    regexMode={regexMode}\n                    onNext={nextResult} \n                    onPrev={previousResult} \n                    onCancel={onCancelQuery}\n                    handlePerformQuery={onPerformQuery}\n                    handlePerformFilter={onPerformFilter}\n                    filters={getFilters(language)}\n                />\n\n                <LogLines lines={lines} highlighted={highlighted} filtered={filtered} scrollTo={scrollTo} language={language} />\n            </AccordionDetails>\n        </Accordion>\n    )\n}","\nfunction diffInSeconds(d1, d2) {\n    return Math.floor(Math.abs(d1 - d2) / 1000);\n}\n\nfunction formatTimeDiff(seconds) {\n    const conversion = [\n        { factor: 60 * 60 * 24 * 365, unit1: \"year\", unitn: \"years\" },\n        { factor: 60 * 60 * 24 * 30, unit1: \"month\", unitn: \"months\" },\n        { factor: 60 * 60 * 24 * 7, unit1: \"week\", unitn: \"weeks\" },\n        { factor: 60 * 60 * 24, unit1: \"day\", unitn: \"days\" },\n        { factor: 60 * 60, unit1: \"hour\", unitn: \"hours\" },\n        { factor: 60, unit1: \"minute\", unitn: \"minutes\" },\n    ]\n\n    for (const c of conversion) {\n        const n = Math.floor(seconds / c.factor);\n        if (n > 0) {\n            return n + \" \" + (n === 1 ? c.unit1 : c.unitn);\n        }\n    }\n    return seconds + \" \" + (seconds === 1 ? \"second\" : \"seconds\");\n}\n\nconst utils = {\n    diffInSeconds: diffInSeconds,\n    formatTimeDiff: formatTimeDiff\n}\nexport default utils;","import React from \"react\";\n\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport Typography from \"@mui/material/Typography\";\n\nimport ThrottledIcon from \"mdi-react/SpeedometerSlowIcon\";\nimport BugfixIcon from \"mdi-react/BugCheckIcon\";\nimport SafeModeIcon from \"mdi-react/LockCheckIcon\";\n\nimport { useSnackbar } from \"notistack\";\n\nimport makeStyles from '@mui/styles/makeStyles';\n\nimport semver from \"semver\";\n\nimport timeutils from \"../util/time\";\n\nconst UNRECOMMENDED_MODELS = [\"Zero\", \"Zero W\"]\n\nconst useStyles = makeStyles((theme) => ({\n    accordionbar: {\n        display: \"flex\",\n        flexGrow: 1,\n        alignItems: \"center\",\n        [theme.breakpoints.down('lg')]: {\n            flexWrap: \"wrap\",\n        },\n    },\n    grow: {\n        flexGrow: 1,\n    },\n    icon: {\n        padding: theme.spacing(0, 1),\n        fontSize: \"1.5rem\",\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(12),\n        color: theme.palette.text.secondary,\n        padding: theme.spacing(0, 1),\n        textAlign: \"right\",\n        [theme.breakpoints.down('lg')]: {\n            textAlign: \"left\",\n            padding: theme.spacing(0, 0),\n        },\n    },\n    title: {\n        flexGrow: 1,\n        alignItems: \"center\",\n        [theme.breakpoints.down('lg')]: {\n            flexBasis: \"100%\"\n        }\n    },\n    info: {\n        [theme.breakpoints.down('lg')]: {\n            flexBasis: \"100%\"\n        }\n    }\n}));\n\nexport default function SystemInfo(props) {\n    const { enqueueSnackbar } = useSnackbar();\n\n    const lines = props.info.split(\"\\n\").filter(l => l.trim() !== \"\").map(l => {\n        const [key, ...value] = l.split(\":\");\n        return { key: key, value: value.join(\":\") }\n    });\n\n    const info = {};\n    for (const p of lines) {\n        info[p.key] = p.value;\n    }\n\n    const classes = useStyles();\n\n    const InfoField = (title, key) => {\n        const value = info[key];\n\n        if (value) {\n            return (\n                <Typography className={classes.secondaryHeading}>{title + \" \" + value}</Typography>\n            );\n        } else {\n            return (null);\n        }\n    }\n\n    const checkField = (key, func) => {\n        return (info[key] && func(info[key]));\n    }\n    const checkModel = (model) => {\n        model = model.toLowerCase();\n        for (const arg of UNRECOMMENDED_MODELS.map(m => m.toLowerCase())) {\n            if (model.includes(`${arg} rev`) || model.endsWith(arg)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    const checkLastSafeMode = () => {\n        const last_safe_mode_date = info[\"octoprint.last_safe_mode.date\"];\n        const generation_date = info[\"systeminfo.generated\"];\n\n        if (!last_safe_mode_date || !generation_date) {\n            return;\n        }\n\n        if (last_safe_mode_date.trim() === \"unknown\") {\n            enqueueSnackbar(\"Last start in safe mode is unknown.\", { key: \"last_safe_mode\", variant: \"warning\", persist: true });\n            return;\n        }\n\n        const last_safe_mode_date_obj = new Date();\n        const generation_date_obj = new Date();\n\n        last_safe_mode_date_obj.setTime(Date.parse(last_safe_mode_date.trim()));\n        generation_date_obj.setTime(Date.parse(generation_date.trim()));\n\n        const formattedDiff = timeutils.formatTimeDiff(timeutils.diffInSeconds(last_safe_mode_date_obj, generation_date_obj));\n\n        enqueueSnackbar(`Last start in safe mode was ${formattedDiff} before bundle creation.`, { key: \"last_safe_mode\", variant: \"info\", persist: true });\n    }\n\n    const checkBoolean = (value) => {\n        return value.toLowerCase().trim() === \"true\"\n    }\n\n    const safemode = checkField(\"octoprint.safe_mode\", value => checkBoolean(value));\n    const throttled = checkField(\"env.plugins.pi_support.throttle_state\", value => (value.trim() !== \"0x0\"));\n    const throttle_check_disabled = checkField(\"env.plugins.pi_support.throttle_check_enabled\", value => !checkBoolean(value));\n    const marlin_bugfix = checkField(\"printer.firmware\", value => (value.includes(\"Marlin bugfix-\")));\n    const unrecommended_model = checkField(\"env.plugins.pi_support.model\", value => (checkModel(value)));\n    const still_python_2 = checkField(\"env.python.version\", value => (!semver.satisfies(value, \">=3.7\")));\n    const python_too_old = checkField(\"env.python.version\", value => (!semver.satisfies(value, \">=2.7.13 <3 || >=3.7\")));\n    const pip_too_old = checkField(\"env.python.pip\", value => (!semver.satisfies(value, \">=19.0.1\")));\n    const setuptools_too_old = checkField(\"env.python.setuptools\", value => (!semver.satisfies(value, \">=40.7.1\")));\n    const issue_4392 = checkField(\"octoprint.version\", value => (semver.satisfies(value, \"<1.8.0\"))) && checkField(\"env.python.pip\", value => (semver.satisfies(value, \">=22\")));\n\n    if (safemode) {\n        enqueueSnackbar(\"Safe mode enabled.\", { key: \"safemode\" });\n    }\n    if (throttled) {\n        enqueueSnackbar(\"System is or was throttled, system may behave erratically. Fix before further debugging.\", { variant: \"error\", persist: true, key: \"throttled\" });\n    }\n    if (throttle_check_disabled) {\n        enqueueSnackbar(\"Throttle check disabled by user. Potential undervoltage or overheating issues will not be detected.\", { variant: \"warning\", persist: true, key: \"throttle_check_disabled\" });\n    }\n    if (marlin_bugfix) {\n        enqueueSnackbar(\"Marlin-Bugfix firmware development build detected, firmware may be unstable.\", { key: \"marlin_bugfix\" });\n    }\n    if (unrecommended_model) {\n        enqueueSnackbar(\"Unrecommended Raspberry Pi model detected.\", { key: \"unrecommended_model\", variant: \"error\", persist: true });\n    }\n    if (still_python_2) {\n        enqueueSnackbar(\"OctoPrint is still running under Python 2\", { key: \"still_python_2\", variant: \"warning\", persist: true });\n    }\n    if (python_too_old) {\n        enqueueSnackbar(\"Python version is too old for automatic updating.\", { key: \"python_too_old\", variant: \"error\", persist: true });\n    }\n    if (pip_too_old) {\n        enqueueSnackbar(\"Pip version is too old for automatic updating.\", { key: \"pip_too_old\", variant: \"error\", persist: true });\n    }\n    if (setuptools_too_old) {\n        enqueueSnackbar(\"Setuptools version is too old for automatic updating.\", { key: \"setuptools_too_old\", variant: \"error\", persist: true });\n    }\n    if (issue_4392) {\n        enqueueSnackbar(\"Susceptible for update/plugin install issue #4392\", { key: \"issue_4392\" });\n    }\n    checkLastSafeMode();\n\n    return (\n        <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />} aria-controls=\"panel-sysinfo-content\" id=\"panel-sysinfo-header\">\n                <div className={classes.accordionbar}>\n                    <div className={classes.title}>\n                        <Typography className={classes.heading} style={{ display: \"flex\", alignItems: \"center\" }}>\n                            System Information\n                            {safemode ? <SafeModeIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                            {throttled ? <ThrottledIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                            {marlin_bugfix ? <BugfixIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                        </Typography>\n                    </div>\n                    <div className={classes.info}>\n                        {InfoField(\"OctoPrint\", \"octoprint.version\")}\n                        {InfoField(\"Python\", \"env.python.version\")}\n                        {InfoField(\"OctoPi\", \"env.plugins.pi_support.octopi_version\")}\n                        {InfoField(\"Firmware\", \"printer.firmware\")}\n                    </div>\n                </div>\n            </AccordionSummary>\n\n            <AccordionDetails>\n                <div className={classes.list}>\n                {lines.map((line, index) => (\n                    <div key={line.key}>\n                        <strong>{line.key}</strong>: {line.value}\n                    </div>\n                ))}\n                </div>\n            </AccordionDetails>\n        </Accordion>\n    )\n}","import React from \"react\";\n\nimport LogView from \"./LogView\";\nimport SystemInfo from \"./SystemInfo\";\n\nexport default function BundleView(props) {\n    return (\n      <>\n            { props.bundle.systeminfo ? <SystemInfo info={props.bundle.systeminfo} /> : (null)}\n            {props.bundle.logs.map((log, index) => (\n                <LogView key={\"log-\" + index} expanded={ !props.bundle.systeminfo && index === 0 } log={log.log} content={log.content} index={index} />\n            ))}\n      </>\n    )\n}","import React from \"react\";\n\nimport { DropzoneArea } from \"material-ui-dropzone\";\n\nexport default function NothingLoaded(props) {\n    console.log(\"Rendering NothingChanged...\");\n\n    const handleChange = (files) => {\n        console.log(\"Entered NothingLoaded.handleChange...\");\n        if (files.length > 0) {\n            console.log(\"File:\", files[0]);\n            props.onUpload(files[0]);\n        }\n        console.log(\"Exiting NothingLoaded.handleChange...\");\n    };\n\n    return (\n        <div style={{ display: \"flex\", justifyContent: \"center\", flexDirection: \"column\" }}>\n            <DropzoneArea\n                style={{\"flex-basis\": \"100%\"}}\n                dropzoneText=\"Enter an URL above and press Enter, or drag and drop a file here or click to upload one\"\n                onChange={handleChange}\n                filesLimit={1} \n                acceptedFiles={[\".zip\", \".log\", \".txt\"]}\n                maxFileSize={30000000}\n                showPreviewsInDropzone={false}\n                showAlerts={false}\n                />\n        </div>\n    )\n}\n","import contentdispositionutils from \"content-disposition\";\n\nasync function loadRemote(url) {\n    const response = await fetch(url, {mode: 'cors',});\n    if (!response.ok) {\n        throw new Error(`Could not load file from ${url}: ${response.status}`);\n    }\n    const blob = await response.blob();\n\n    let filename;\n    const header = response.headers.get(\"content-disposition\");\n    if (header) {\n        filename = contentdispositionutils.parse(header).parameters?.filename || \"unknown\";\n    } else {\n        filename = url.substring(url.lastIndexOf(\"/\") + 1);\n    }\n    blob.name = filename;\n    \n    return blob;\n}\n\nconst utils = {\n    loadRemote: loadRemote\n}\nexport default utils;","import JSZip from \"jszip\";\nimport remoteutils from \"./remote\"\n\nasync function loadRemoteZip(url) {\n    const { blob } = await remoteutils.loadRemote(url);\n    return await loadZip(blob);\n}\n\nasync function loadZip(blob) {\n    return await JSZip.loadAsync(blob);\n}\n\nasync function containsFile(zip, filename) {\n    return (await zip.file(filename)) !== null;\n}\n\nasync function getFileContents(zip, filename, format) {\n    format = format || \"blob\";\n    return await zip.file(filename).async(format);\n}\n\nconst utils = {\n    loadZip: loadZip,\n    loadRemoteZip: loadRemoteZip,\n    containsFile: containsFile,\n    getFileContents: getFileContents\n}\n\nexport default utils;","import ziputils from \"./zip\";\n\nasync function loadBundle(zip) {\n    const files = [\"octoprint.log\", \"serial.log\", \"terminal.txt\", \"plugin_softwareupdate_console.log\", \"plugin_pluginmanager_console.log\"];\n\n    let systeminfo = false;\n    try {\n        systeminfo = await ziputils.getFileContents(zip, \"systeminfo.txt\", \"string\");\n    } catch(error) {\n        console.log(\"Could not read systeminfo.txt from zip, probably not a bundle...\");\n    }\n\n    const contents = {};\n    for (const f of zip.file(/\\.(log|txt|gcode|gco|g)$/i)) {\n        if (f.name.startsWith(\".\") || f.name.startsWith(\"__\") || f.name === \"systeminfo.txt\") continue;\n        try {\n            contents[f.name] = await f.async(\"string\");\n        } catch(error) {\n            console.log(`Could not read {f.name} from zip...`);\n        }\n    }\n\n    const logs = [];\n    for (const filename of files) {\n        if (contents[filename]) {\n            logs.push({ log: filename, content: contents[filename] });\n        }\n    }\n    for (const filename of Object.keys(contents).sort()) {\n        if (!files.includes(filename)) {\n            logs.push({ log: filename, content: contents[filename] });\n        }\n    }\n\n    return {\n        hasContent: true,\n        systeminfo: systeminfo,\n        logs: logs\n    };\n}\n\nasync function loadLog(blob) {\n    return {\n        hasContent: true,\n        logs: [\n            { log: blob.name || \"unknown\", content: await blob.text() }\n        ]\n    }\n}\n\n\nconst defaultBundle = {\n    hasContent: false,\n    systeminfo: \"\",\n    logs: []\n};\n\nconst utils = {\n    loadBundle: loadBundle,\n    loadLog: loadLog,\n    defaultBundle: defaultBundle\n}\n\nexport default utils;\n","import React, { useState, useEffect } from \"react\";\n\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { adaptV4Theme } from \"@mui/material/styles\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport { createTheme, ThemeProvider, StyledEngineProvider } from \"@mui/material/styles\";\nimport { CssBaseline } from \"@mui/material\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport Container from \"@mui/material/Container\";\nimport Button from \"@mui/material/Button\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Hidden from \"@mui/material/Hidden\";\nimport HomeIcon from \"@mui/icons-material/Home\";\nimport { Alert, AlertTitle } from '@mui/material';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Link from \"@mui/material/Link\";\n\nimport { SnackbarProvider } from \"notistack\";\n\nimport CacheBuster from \"react-cache-buster\";\nimport { version } from \"../package.json\";\n\nimport DarkModeToggle from \"./components/DarkModeToggle\";\nimport UrlBar from \"./components/UrlBar\";\nimport ShareButton from \"./components/ShareButton\";\nimport InfoButton from \"./components/InfoButton\";\nimport DebugButton from \"./components/DebugButton\";\nimport BundleView from \"./components/BundleView\";\nimport NothingLoaded from \"./components/NothingLoaded\";\n\nimport useLocalStorage from \"./hooks/useLocalStorage\";\n\nimport remoteutils from \"./util/remote\";\nimport ziputils from \"./util/zip\";\nimport bundleutils from \"./util/bundle\";\nimport contenttypeutils from \"content-type\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"flex\",\n        overflow: \"auto\"\n    },\n    grow: {\n      flexGrow: 1\n    },\n\n    appBar: {\n    },\n    toolbar: {\n      [theme.breakpoints.down('lg')]: {\n        \"justify-content\": \"flex-end\",\n        \"flex-wrap\": \"wrap\",\n      }\n    },\n    urlbar: {\n      flexGrow: 1,\n      [theme.breakpoints.down('lg')]: {\n        \"flex-basis\": \"100%\",\n        order: 99,\n        paddingBottom: theme.spacing(2)\n      },\n    },\n    title: {\n      \"justify-item\": \"left\",\n    },\n\n    offset: theme.mixins.toolbar,\n\n    content: {\n      flexGrow: 1,\n      overflow: \"auto\",\n      \"padding-top\": theme.mixins.toolbar.minHeight,\n      [theme.breakpoints.down('lg')]: {\n        \"padding-top\": theme.mixins.toolbar.minHeight * 2,\n      }\n    },\n    container: {\n      minHeight: \"100%\", \n      display: \"flex\", \n      flexDirection: \"column\",\n      paddingTop: theme.spacing(4),\n      [theme.breakpoints.down('lg')]: {\n        paddingTop: 0,\n      },\n      paddingBottom: theme.spacing(4)\n    },\n    footer: {\n      textAlign: \"center\",\n      padding: \"1em\",\n    }\n}));\n\nfunction corsRewrite(url) {\n  const githubRegex = /^https:\\/\\/github\\.com\\/[a-zA-Z0-9_-]+\\/[a-zA-Z0-9_-]+\\/files\\//\n  const forumRegex = /^https:\\/\\/community\\.octoprint\\.org\\/uploads\\/short-url\\//\n  if (url.match(githubRegex)) {\n      return url.replace(\"https://github.com\", \"https://bundleviewer.octoprint.org/bundles\");\n  } else if (url.match(forumRegex)) {\n      return url.replace(\"https://community.octoprint.org/uploads/short-url\", \"https://bundleviewer.octoprint.org/bundles/forum\");\n  }\n  return url;\n}\n\nexport default function App(props) {\n    const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)', { noSsr: true });\n    const [darkMode, setDarkMode] = useLocalStorage(\"enableDarkMode\", prefersDarkMode);\n\n    const [url, setUrl] = useState(props.url);\n    const [filename, setFilename] = useState(\"\");\n  \n    const [bundle, setBundle] = useState(bundleutils.defaultBundle);\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n\n    const pallet = darkMode ? \"dark\" : \"light\";\n    const darkModeTheme = createTheme(adaptV4Theme({\n        palette: {\n            mode: pallet\n        }\n    }));\n\n    const isProduction = process.env.NODE_ENV === \"production\";\n\n    const handleDarkModeToggle = () => {\n        setDarkMode(!darkMode);\n    }\n\n    useEffect(() => {\n      handleUrlChange(props.url);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const notistackRef = React.createRef();\n    const dismissSnack = (key) => () => {\n      notistackRef.current.closeSnackbar(key);\n    }\n\n    const handleUrlChange = (newUrl) => {\n      if (!newUrl) {\n        handleReset();\n      } else {\n        setError(false);\n        setLoading(true);\n  \n        setUrl(newUrl);\n        updateHistory(newUrl);\n        setFilename(\"\");\n  \n        const url = corsRewrite(newUrl);\n\n        remoteutils.loadRemote(url).then(handleFileChange).catch(handleError);\n      }\n    }\n\n    const handleUpload = (blob) => {\n      setError(false);\n      setLoading(true);\n\n      setFilename(blob.name);\n      setUrl(\"\");\n\n      handleFileChange(blob);\n    }\n\n    const handleFileChange = (blob) => {\n      ziputils.loadZip(blob)\n        .then(handleZipChange)\n        .catch((error) => {\n          let contentType;\n          try {\n            contentType = contenttypeutils.parse(blob.type).type;\n          } catch (err) {\n            contentType = \"\";\n          }\n\n          if (contentType === \"\" || contentType.startsWith(\"text/\")) {\n            bundleutils.loadLog(blob).then((bundle) => {\n              setBundle(bundle);\n              setLoading(false);\n            }).catch(handleError);\n          } else {\n            handleError(error);\n          }\n        })\n    }\n\n    const handleZipChange = (zip) => {\n      bundleutils.loadBundle(zip).then((bundle) => {\n        setBundle(bundle);\n        setLoading(false);\n        console.log(\"Loading complete\");\n      }).catch(handleError);\n    }\n\n    const handleError = (error) => {\n      console.log(error);\n      setError(true);\n    }\n\n    const handleReset = () => {\n      setUrl(\"\");\n      setFilename(\"\");\n      setError(false);\n      setLoading(false);\n      setBundle(bundleutils.defaultBundle);\n      updateHistory();\n      if (notistackRef.current) notistackRef.current.closeSnackbar();\n    }\n\n    const updateHistory = (newUrl) => {\n      const windowUrl = new URL(window.location);\n      if (newUrl) {\n        windowUrl.searchParams.set(\"url\", newUrl);\n      } else {\n        windowUrl.searchParams.delete(\"url\");\n      }\n      window.history.replaceState({}, '', windowUrl);\n    }\n\n    return (\n      <CacheBuster currentVersion={version} isEnabled={isProduction} isVerboseMode={true}>\n        <StyledEngineProvider injectFirst>\n          <ThemeProvider theme={darkModeTheme}>\n            <SnackbarProvider\n              ref={notistackRef}\n              action={(key) => (\n                <Button onClick={dismissSnack(key)}>\n                  Close\n                </Button>\n              )}\n              maxSnack={10}\n              anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n              }}\n              dense\n              preventDuplicate>\n              <Main \n                bundle={bundle}\n                url={url}\n                filename={filename}\n                error={error}\n                loading={loading}\n                shared={props.shared}\n                handleUpload={handleUpload}\n                handleReset={handleReset}\n                handleUrlChange={handleUrlChange}\n                darkMode={darkMode}\n                handleDarkModeToggle={handleDarkModeToggle}\n                />\n            </SnackbarProvider>\n          </ThemeProvider>\n        </StyledEngineProvider>\n      </CacheBuster>\n    );\n}\n\nfunction Main({  bundle, url, filename, error, loading, shared, handleUpload, handleReset, handleUrlChange, darkMode, handleDarkModeToggle }) {\n  const classes = useStyles();\n\n  const MainView = () => {\n    if (error) {\n      console.log(\"Rendering error screen\");\n      return (\n        <Alert severity=\"error\">\n            <AlertTitle>Error</AlertTitle>\n            Could not load file. Make sure you are trying to load either an OctoPrint \n            systeminfo bundle, a zip containing logs, or a plain text log file. \n            Other files are not supported.\n        </Alert>\n      )\n    } else if (loading) {\n      console.log(\"Rendering loading screen\");\n      return (\n        <div style={{ display: \"flex\", justifyContent: \"center\", }}>\n            <CircularProgress />\n        </div>\n      )\n    } else if (bundle.hasContent) {\n      console.log(\"Rendering bundle\");\n      return (\n        <BundleView bundle={bundle} />\n      )\n    } else {\n      console.log(\"Rendering empty\");\n      return (\n        <NothingLoaded onUpload={handleUpload} />\n      )\n    }\n  }\n\n  const Navbar = () => {\n    return (\n      <AppBar className={classes.appBar}>\n        <Toolbar className={classes.toolbar}>\n          <IconButton onClick={handleReset} color=\"inherit\" size=\"large\">\n            <HomeIcon />\n          </IconButton>\n          <Hidden mdUp>\n            <div className={classes.grow} />\n          </Hidden>\n          <div className={classes.urlbar}>\n            <UrlBar url={url} filename={filename} handleUrlChange={handleUrlChange} />\n          </div>\n          {url ? <ShareButton url={url} /> : null}\n          <InfoButton />\n          <DebugButton url={url} shared={shared} />\n          <DarkModeToggle darkMode={darkMode} onChange={handleDarkModeToggle} />\n        </Toolbar>\n      </AppBar>\n    );\n  }\n\n\n  return (\n    <div className={classes.root} style={{display: \"flex\", minHeight: \"100vh\", flexDirection: \"column\"}}>\n      <CssBaseline />\n      <Navbar />\n      <main className={classes.content}>\n        <Container maxWidth=\"lg\" className={classes.container}>\n          <MainView />\n        </Container>\n      </main>\n      <footer className={classes.footer}>\n         2021 <Link href=\"https://octoprint.org\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">OctoPrint</Link> &middot; <Link href=\"https://octoprint.org/imprint/\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">Imprint</Link> &middot; <Link href=\"https://octoprint.org/privacy/\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">Privacy Policy</Link>\n      </footer>\n    </div>\n  );\n}","import { useState } from \"react\";\n\nexport default function useLocalStorage(key, initialValue) {\n  // Source: https://usehooks.com/useLocalStorage/\n\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that\n  // persists the new value to localStorage.\n  const setValue = (value) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n\n      // Save state\n      setStoredValue(valueToStore);\n\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.0/8 are considered localhost for IPv4.\n      window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n  );\n  \n  export function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n      // The URL constructor is available in all browsers that support SW.\n      const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n      if (publicUrl.origin !== window.location.origin) {\n        // Our service worker won't work if PUBLIC_URL is on a different origin\n        // from what our page is served on. This might happen if a CDN is used to\n        // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n        return;\n      }\n  \n      window.addEventListener('load', () => {\n        const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n  \n        if (isLocalhost) {\n          // This is running on localhost. Let's check if a service worker still exists or not.\n          checkValidServiceWorker(swUrl, config);\n  \n          // Add some additional logging to localhost, pointing developers to the\n          // service worker/PWA documentation.\n          navigator.serviceWorker.ready.then(() => {\n            console.log(\n              'This web app is being served cache-first by a service ' +\n                'worker. To learn more, visit https://cra.link/PWA'\n            );\n          });\n        } else {\n          // Is not localhost. Just register service worker\n          registerValidSW(swUrl, config);\n        }\n      });\n    }\n  }\n  \n  function registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n      .register(swUrl)\n      .then((registration) => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the updated precached content has been fetched,\n                // but the previous service worker will still serve the older\n                // content until all client tabs are closed.\n                console.log(\n                  'New content is available and will be used when all ' +\n                    'tabs for this page are closed. See https://cra.link/PWA.'\n                );\n  \n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n  \n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch((error) => {\n        console.error('Error during service worker registration:', error);\n      });\n  }\n  \n  function checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n      headers: { 'Service-Worker': 'script' },\n    })\n      .then((response) => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get('content-type');\n        if (\n          response.status === 404 ||\n          (contentType != null && contentType.indexOf('javascript') === -1)\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then((registration) => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log('No internet connection found. App is running in offline mode.');\n      });\n  }\n  \n  export function unregister() {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.ready\n        .then((registration) => {\n          registration.unregister();\n        })\n        .catch((error) => {\n          console.error(error.message);\n        });\n    }\n  }\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nconst search = window.location.search;\nconst params = new URLSearchParams(search);\n\nconst shared = {\n  url: params.get('url', ''),\n  text: params.get('text', ''),\n  title: params.get('title', '')\n}\n\nlet url = '';\nif (shared.url) {\n  url = shared.url;\n} else if (shared.text) {\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=789379\n  const match = shared.text.match(/https?:\\/\\/[^\\s]+/gi)\n  if (match) {\n    url = match[0];\n  }\n}\n\nconsole.log(\"URL\", url);\n\nReactDOM.render(\n  <App url={url} shared={shared} />,\n  document.querySelector('#root'),\n);\n\nserviceWorkerRegistration.register();"],"sourceRoot":""}