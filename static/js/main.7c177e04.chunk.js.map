{"version":3,"sources":["components/DarkModeToggle.js","components/UrlBar.js","components/ShareButton.js","components/LogView.js","components/SystemInfo.js","components/BundleView.js","components/NothingLoaded.js","util/zip.js","util/bundle.js","App.js","hooks/useLocalStorage.js","index.js"],"names":["DarkModeToggle","props","useState","darkMode","setDarkMode","Tooltip","title","IconButton","onClick","onChange","color","useStyles","makeStyles","theme","grow","flexGrow","url","position","borderRadius","shape","backgroundColor","fade","palette","common","white","breakpoints","up","marginRight","spacing","marginLeft","urlIcon","padding","height","pointerEvents","display","alignItems","justifyContent","inputRoot","width","inputInput","paddingLeft","transitions","create","UrlBar","classes","setUrl","filename","mode","className","Hidden","mdDown","InputBase","placeholder","root","input","event","target","value","onKeyDown","key","handleUrlChange","defaultValue","inputProps","readOnly","ShareButton","enqueueSnackbar","useSnackbar","shareModalOpen","setShareModalOpen","shareUrl","window","location","origin","pathname","encodeURIComponent","handleClose","Dialog","open","onClose","fullWidth","DialogTitle","DialogContent","TextField","InputProps","onFocus","select","DialogActions","navigator","share","Button","document","clipboard","writeText","LogView","Line","log","content","lines","trim","split","lineCount","length","background","pre","margin","line","toString","text","disabled","secondary","warning","main","error","info","secondaryHeading","fontSize","typography","pxToRem","getStream","charAt","language","index","style","data-linenumber","data-loglevel","data-stream","serialAndDisabled","includes","Accordion","AccordionSummary","expandIcon","aria-controls","id","Typography","heading","AccordionDetails","itemCount","itemSize","overflow","SystemInfo","filter","l","map","p","InfoField","throttled","defaultExpanded","list","BundleView","bundle","systeminfo","logs","NothingLoaded","console","flexDirection","dropzoneText","files","onUpload","filesLimit","acceptedFiles","maxFileSize","showPreviewsInDropzone","showAlerts","loadRemote","a","fetch","response","ok","Error","status","blob","loadZip","JSZip","loadAsync","zip","file","format","async","utils","loadRemoteZip","containsFile","getFileContents","logToLanguage","ziputils","contents","push","loadBundle","defaultBundle","appBar","toolbar","down","urlbar","order","paddingBottom","offset","mixins","minHeight","container","paddingTop","App","initialValue","item","localStorage","getItem","JSON","parse","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","useLocalStorage","useMediaQuery","setFilename","bundleutils","setBundle","setError","loading","setLoading","pallet","darkModeTheme","createMuiTheme","type","handleDarkModeToggle","useEffect","newUrl","updateHistory","match","replace","corsRewrite","then","handleZipChange","catch","handleError","handleReset","handleUpload","name","windowUrl","URL","searchParams","set","delete","history","replaceState","MainView","Alert","severity","AlertTitle","CircularProgress","Navbar","AppBar","Toolbar","mdUp","xsDown","href","ThemeProvider","CssBaseline","Container","maxWidth","search","URLSearchParams","get","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.7c177e04.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DarkModeIcon from \"@material-ui/icons/Brightness4\";\nimport LightModeIcon from \"@material-ui/icons/Brightness7\";\n\nexport default function DarkModeToggle(props) {\n    const [darkMode, setDarkMode] = useState(props.darkMode);\n\n    const handleDarkModeToggle = () => {\n        props.onChange(!darkMode);\n        setDarkMode(!darkMode);\n    };\n\n    return (\n        <Tooltip title=\"Toggle dark mode\">\n            <IconButton onClick={handleDarkModeToggle} color=\"inherit\">\n                { darkMode ? <LightModeIcon /> : <DarkModeIcon /> }\n            </IconButton>\n        </Tooltip>\n    )\n}","import React, { useState } from \"react\";\n\nimport { fade, makeStyles } from \"@material-ui/core/styles\";\n\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport LinkIcon from \"@material-ui/icons/Link\";\nimport UploadIcon from \"@material-ui/icons/CloudUpload\";\n\nconst useStyles = makeStyles(theme => ({\n    grow: {\n      flexGrow: 1\n    },\n    url: {\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      [theme.breakpoints.up('md')]: {\n        marginRight: theme.spacing(2),\n        marginLeft: theme.spacing(2),\n      },\n      flexGrow: 1\n    },\n    urlIcon: {\n      padding: theme.spacing(0, 2),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    inputRoot: {\n      color: \"inherit\",\n      width: \"100%\"\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 1),\n      [theme.breakpoints.up('md')]: {\n        paddingLeft: `calc(1em + ${theme.spacing(4)}px)`,\n      },\n      transition: theme.transitions.create('width'),\n      width: \"100%\",\n    }\n}));\n\n\nexport default function UrlBar(props) {\n    const classes = useStyles();\n\n    const [url, setUrl] = useState(props.url);\n    const [mode] = useState(props.filename ? \"upload\" : \"url\");\n\n    const handleChange = (event) => {\n        if (mode === \"url\") {\n            setUrl(event.target.value);\n        }\n    }\n\n    const handleKeyDown = (event) => {\n        if (mode === \"url\" && event.key === \"Enter\") {\n            props.handleUrlChange(url);\n        }\n    }\n\n    return (\n        <div className={classes.url}>\n            <Hidden mdDown>\n                <div className={classes.urlIcon}>\n                {props.filename ? (\n                    <UploadIcon />\n                ) : (\n                    <LinkIcon />\n                )}\n                </div>\n            </Hidden>\n            <InputBase\n                placeholder=\"URL...\"\n                classes={{\n                    root: classes.inputRoot,\n                    input: classes.inputInput,\n                }}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                defaultValue={(mode === \"upload\" ? props.filename : props.url)}\n                inputProps={{ readOnly: mode === \"upload\", }}\n            />\n        </div>\n    )\n}","import React, { useState } from \"react\";\n\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\n\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nimport ShareIcon from \"@material-ui/icons/Share\";\n\nimport { useSnackbar } from \"notistack\";\n\nexport default function ShareButton(props) {\n    const { enqueueSnackbar } = useSnackbar();\n    const [ shareModalOpen, setShareModalOpen ] = useState(false);\n    const shareUrl = window.location.origin + window.location.pathname + \"?url=\" + encodeURIComponent(props.url);\n\n    const handleShareClick = () => {\n        setShareModalOpen(true);\n    }\n\n    const handleShare = () => {\n        if (navigator.share) {\n            navigator.share({\n                title: document.title,\n                url: shareUrl\n            })\n            handleClose();\n        }\n    }\n\n    const handleCopy = () => {\n        if (navigator.clipboard) {\n            navigator.clipboard.writeText(shareUrl);\n            enqueueSnackbar(\"URL copied to clipboard!\");\n            handleClose();\n        }\n    }\n\n    const handleClose = () => {\n        setShareModalOpen(false);\n    }\n\n    if (true) {\n        return (\n            <>\n            <Tooltip title=\"Get shareable link\">\n                <IconButton onClick={handleShareClick} color=\"inherit\">\n                    <ShareIcon />\n                </IconButton>\n            </Tooltip>\n\n            <Dialog open={shareModalOpen} onClose={handleClose} fullWidth>\n                <DialogTitle>Shareable link</DialogTitle>\n                <DialogContent>\n                    <TextField value={shareUrl} InputProps={{ readOnly: true, }} onFocus={event => {event.target.select()}} fullWidth />\n                </DialogContent>\n                <DialogActions>\n                    {(navigator.share) ? \n                        <Button onClick={handleShare}>\n                            Share\n                        </Button>\n                    :\n                        (null)\n                    }\n                    {(navigator.clipboard) ? \n                        <Button onClick={handleCopy}>\n                            Copy\n                        </Button>\n                    : \n                        (null)\n                    }\n                    <Button onClick={handleClose}>\n                        Close\n                    </Button>\n                </DialogActions>\n            </Dialog>\n            </>\n        )\n    } else {\n        return (null)\n    }\n}","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { FixedSizeList } from \"react-window\";\nimport Accordion from \"@material-ui/core/Accordion\";\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Typography from \"@material-ui/core/Typography\";\n\nimport ErrorIcon from \"@material-ui/icons/Error\";\n\nexport default function LogView(props) {\n    const log = props.log;\n    const content = props.content;\n    const lines = content.trim().split(\"\\n\");\n    const lineCount = lines.length;\n\n    const classes = makeStyles(theme => ({\n        background: {\n        },\n        log: {\n            flexGrow: 1,\n        },\n        pre: {\n            margin: 0,\n            \"font-family\": \"'JetBrains Mono', 'Droid Sans Mono', monospace\",\n        },\n        line: {\n            paddingLeft: theme.spacing(1),\n            \"&::before\": {\n                content: \"attr(data-linenumber)\",\n                display: \"inline-block\",\n                width: `${lineCount.toString().length}ch`,\n                \"text-align\": \"right\",\n                \"margin-right\": \"1em\",\n                \"color\": theme.palette.text.disabled\n            },\n            \"&[data-loglevel=\\\"DEBUG\\\"]\": {\n                \"color\": theme.palette.text.secondary\n            },\n            \"&[data-loglevel=\\\"WARNING\\\"]\": {\n                \"color\": theme.palette.warning.main\n            },\n            \"&[data-loglevel=\\\"ERROR\\\"]\": {\n                \"color\": theme.palette.error.main\n            },\n            \"&[data-stream=\\\"stdin\\\"]\": {\n                \"color\": theme.palette.info.main\n            },\n            \"&[data-stream=\\\"stderr\\\"]\": {\n                \"color\": theme.palette.error.main\n            },\n        },\n        grow: {\n            flexGrow: 1,\n        },\n        secondaryHeading: {\n            fontSize: theme.typography.pxToRem(16),\n            color: theme.palette.text.secondary,\n            padding: theme.spacing(0, 1),\n        }    \n    }))();\n\n    const getLoglevel = (line) => {\n        let parts = line.split(\" \");\n        return parts[5];\n    }\n\n    const getStream = (line) => {\n        const prefix = line.charAt(24);\n        switch (prefix) {\n            case \" \": return \"stdin\";\n            case \">\": return \"stdout\";\n            case \"!\": return \"stderr\";\n            default: return \"plain\";\n        }\n    }\n\n    const LogLine = ({ index, style }) => (\n        <span style={style}><span data-linenumber={index + 1} data-loglevel={getLoglevel(lines[index])} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    const CliLine = ({ index, style }) => (\n        <span style={style}><span data-linenumber={index + 1} data-stream={getStream(lines[index])} className={classes.line}>{lines[index]}</span></span>\n    )\n\n    const PlainLine = ({ index, style }) => (\n        <span style={style}><span data-linenumber={index + 1} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    let Line;\n    switch (props.language) {\n        case \"log\": {\n            Line = LogLine;\n            break;\n        }\n        case \"cli\": {\n            Line = CliLine;\n            break;\n        }\n        default: {\n            Line = PlainLine;\n            break;\n        }\n    }\n\n    const serialAndDisabled = (log === \"serial.log\" && lineCount === 1 && lines[0].includes(\"serial.log is currently not enabled\"));\n\n    return (\n        <Accordion key={log}>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />} aria-controls={\"panel-log-\" + props.index + \"-content\"} id={\"panel-log-\" + props.index + \"-header\"}>\n                <Typography className={classes.heading}>{log}</Typography>\n                <span className={classes.grow}></span>\n                {serialAndDisabled ? <ErrorIcon /> : (null)}\n                <Typography className={classes.secondaryHeading}>\n                    {content.length + \" characters\"}\n                </Typography>\n                <Typography className={classes.secondaryHeading}>\n                    {lineCount + \" \" + (lineCount === 1 ? \"line\" : \"lines\")}\n                </Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n                <code className={classes.log}>\n                    <pre className={classes.pre}>\n                        <FixedSizeList \n                            height={500}\n                            itemCount={lineCount}\n                            itemSize={20}\n                            style={{overflow: \"scroll\"}}\n                        >\n                            {Line}\n                        </FixedSizeList>\n                    </pre>\n                </code>\n            </AccordionDetails>\n        </Accordion>\n    )\n}","import React from \"react\";\n\nimport Accordion from \"@material-ui/core/Accordion\";\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Typography from \"@material-ui/core/Typography\";\n\nimport ErrorIcon from \"@material-ui/icons/Error\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nconst useStyles = makeStyles((theme) => ({\n    grow: {\n        flexGrow: 1,\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(16),\n        color: theme.palette.text.secondary,\n        padding: theme.spacing(0, 1),\n    }\n}));\n\nexport default function SystemInfo(props) {\n    const lines = props.info.split(\"\\n\").filter(l => l.trim() !== \"\").map(l => {\n        const [key, ...value] = l.split(\":\");\n        return { key: key, value: value }\n    });\n\n    const info = {};\n    for (const p of lines) {\n        info[p.key] = p.value;\n    }\n\n    const classes = useStyles();\n\n    const InfoField = (title, key) => {\n        const value = info[key];\n\n        if (value) {\n            return (\n                <Typography className={classes.secondaryHeading}>{title + \" \" + value}</Typography>\n            );\n        } else {\n            return (null);\n        }\n    }\n\n    const throttled = (info[\"env.plugins.pi_support.throttle_state\"] && info[\"env.plugins.pi_support.throttle_state\"] !== \"0x0\");\n\n    return (\n        <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />} aria-controls=\"panel-sysinfo-content\" id=\"panel-sysinfo-header\">\n                <Typography className={classes.heading}>System Information</Typography>\n                <span className={classes.grow}></span>\n                {throttled ? <ErrorIcon /> : (null)}\n                {InfoField(\"OctoPrint\", \"octoprint.version\")}\n                {InfoField(\"Python\", \"env.python.version\")}\n                {InfoField(\"OctoPi\", \"env.plugins.pi_support.octopi_version\")}\n            </AccordionSummary>\n\n            <AccordionDetails>\n                <div className={classes.list}>\n                {lines.map((line, index) => (\n                    <div key={line.key}>\n                        <strong>{line.key}</strong>: {line.value}\n                    </div>\n                ))}\n                </div>\n            </AccordionDetails>\n        </Accordion>\n    )\n}","import React from \"react\";\n\nimport LogView from \"./LogView\";\nimport SystemInfo from \"./SystemInfo\";\n\nexport default function BundleView(props) {\n    return (\n      <div>\n            <SystemInfo info={props.bundle.systeminfo} />\n            <div>\n                {props.bundle.logs.map((log, index) => (\n                    <LogView log={log.log} content={log.content} language={log.language} index={index} />\n                ))}\n            </div>\n      </div>\n    )\n}","import React from \"react\";\n\nimport { DropzoneArea } from \"material-ui-dropzone\";\n\nexport default function NothingLoaded(props) {\n    console.log(\"Rendering NothingChanged...\");\n\n    const handleChange = (files) => {\n        console.log(\"Entered NothingLoaded.handleChange...\");\n        if (files.length > 0) {\n            props.onUpload(files[0]);\n        }\n        console.log(\"Exiting NothingLoaded.handleChange...\");\n    };\n\n    return (\n        <div style={{ display: \"flex\", justifyContent: \"center\", flexDirection: \"column\" }}>\n            <DropzoneArea\n                style={{\"flex-basis\": \"100%\"}}\n                dropzoneText=\"Enter an URL for a bundle above and press Enter, or drag and drop a file here or click to upload one\"\n                onChange={handleChange} \n                filesLimit={1} \n                acceptedFiles={[\".zip\"]}\n                maxFileSize={30000000}\n                showPreviewsInDropzone={false}\n                showAlerts={false}\n                />\n        </div>\n    )\n}","import JSZip from \"jszip\";\n\nasync function loadRemote(url) {\n    const response = await fetch(url, {mode: 'cors',});\n    console.log(response);\n    if (!response.ok) {\n        throw new Error(`Could not load file from ${url}: ${response.status}`);\n    }\n    return await response.blob();\n}\n\nasync function loadRemoteZip(url) {\n    const blob = await loadRemote(url);\n    return await loadZip(blob);\n}\n\nasync function loadZip(blob) {\n    return await JSZip.loadAsync(blob);\n}\n\nasync function containsFile(zip, filename) {\n    return await zip.file(filename) !== null;\n}\n\nasync function getFileContents(zip, filename, format) {\n    format = format || \"blob\";\n    return await zip.file(filename).async(format);\n}\n\nconst utils = {\n    loadRemote: loadRemote,\n    loadZip: loadZip,\n    loadRemoteZip: loadRemoteZip,\n    containsFile: containsFile,\n    getFileContents: getFileContents\n}\n\nexport default utils;","import ziputils from \"./zip\";\n\nconst logToLanguage = {\n    \"octoprint.log\": \"log\",\n    \"plugin_softwareupdate_console.log\": \"cli\",\n    \"plugin_pluginmanager_console.log\": \"cli\"\n}\n\nasync function loadBundle(zip) {\n    const files = [\"octoprint.log\", \"serial.log\", \"terminal.txt\", \"plugin_softwareupdate_console.log\", \"plugin_pluginmanager_console.log\"];\n\n    const systeminfo = await ziputils.getFileContents(zip, \"systeminfo.txt\", \"string\");\n    if (!systeminfo) {\n        throw new Error(\"No systeminfo.txt found\");\n    }\n\n    const contents = {};\n    for (const filename of files) {\n        try {\n            contents[filename] = await ziputils.getFileContents(zip, filename, \"string\");\n        } catch(error) {\n            console.log(`No ${filename} in zip...`);\n        }\n    }\n\n    const logs = [];\n    for (const filename of files) {\n        if (contents[filename]) {\n            const language = logToLanguage[filename] || \"plain\";\n            logs.push({ log: filename, content: contents[filename], language: language });\n        }\n    }\n\n    return {\n        systeminfo: systeminfo,\n        logs: logs\n    };\n}\n\n\nconst defaultBundle = {\n    systeminfo: \"\",\n    logs: []\n};\n\nconst utils = {\n    loadBundle: loadBundle,\n    defaultBundle: defaultBundle\n}\n\nexport default utils;\n","import React, { useState, useEffect } from \"react\";\n\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\nimport { CssBaseline } from \"@material-ui/core\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Container from \"@material-ui/core/Container\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport GitHubIcon from \"@material-ui/icons/GitHub\";\nimport HomeIcon from \"@material-ui/icons/Home\";\nimport { Alert, AlertTitle } from '@material-ui/lab';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { SnackbarProvider } from \"notistack\";\n\nimport DarkModeToggle from \"./components/DarkModeToggle\";\nimport UrlBar from \"./components/UrlBar\";\nimport ShareButton from \"./components/ShareButton\";\nimport BundleView from \"./components/BundleView\";\nimport NothingLoaded from \"./components/NothingLoaded\";\n\nimport useLocalStorage from \"./hooks/useLocalStorage\";\n\nimport ziputils from \"./util/zip\";\nimport bundleutils from \"./util/bundle\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"flex\",\n        overflow: \"auto\"\n    },\n    grow: {\n      flexGrow: 1\n    },\n\n    appBar: {\n    },\n    toolbar: {\n      [theme.breakpoints.down('md')]: {\n        \"justify-content\": \"flex-end\",\n        \"flex-wrap\": \"wrap\",\n      }\n    },\n    urlbar: {\n      flexGrow: 1,\n      [theme.breakpoints.down('md')]: {\n        \"flex-basis\": \"100%\",\n        order: 99,\n        paddingBottom: theme.spacing(2)\n      },\n    },\n    title: {\n      \"justify-item\": \"left\",\n    },\n\n    offset: theme.mixins.toolbar,\n\n    content: {\n      flexGrow: 1,\n      overflow: \"auto\",\n      \"padding-top\": theme.mixins.toolbar.minHeight,\n      [theme.breakpoints.down('md')]: {\n        \"padding-top\": theme.mixins.toolbar.minHeight * 2,\n      }\n    },\n    container: {\n      paddingTop: theme.spacing(4),\n      [theme.breakpoints.down('md')]: {\n        paddingTop: 0,\n      },\n      paddingBottom: theme.spacing(4)\n    },\n}));\n\nfunction corsRewrite(url) {\n  const githubRegex = /^https:\\/\\/github\\.com\\/[a-zA-Z0-9_-]+\\/[a-zA-Z0-9_-]+\\/files\\//\n  if (url.match(githubRegex)) {\n      return url.replace(\"https://github.com\", \"https://bundleviewer.octoprint.org/bundles\");\n  }\n  return url;\n}\n\nexport default function App(props) {\n    const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\n    const [darkMode, setDarkMode] = useLocalStorage(\"enableDarkMode\", prefersDarkMode);\n\n    const [url, setUrl] = useState(props.url);\n    const [filename, setFilename] = useState(\"\");\n  \n    const [bundle, setBundle] = useState(bundleutils.defaultBundle);\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n\n    const pallet = darkMode ? \"dark\" : \"light\";\n    const darkModeTheme = createMuiTheme({\n        palette: {\n            type: pallet\n        }\n    });\n\n    const handleDarkModeToggle = () => {\n        setDarkMode(!darkMode);\n    }\n\n    useEffect(() => {\n      handleUrlChange(props.url);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const handleUrlChange = (newUrl) => {\n      if (!newUrl) {\n        handleReset();\n      } else {\n        setError(false);\n        setLoading(true);\n  \n        setUrl(newUrl);\n        updateHistory(newUrl);\n        setFilename(\"\");\n  \n        const url = corsRewrite(newUrl);\n        ziputils.loadRemoteZip(url).then(handleZipChange).catch(handleError);\n      }\n    }\n\n    const handleUpload = (blob) => {\n      setError(false);\n      setLoading(true);\n\n      setFilename(blob.name);\n      setUrl(\"\");\n\n      ziputils.loadZip(blob).then(handleZipChange).catch(handleError);\n    }\n\n    const handleZipChange = (zip) => {\n      bundleutils.loadBundle(zip).then((bundle) => {\n        setBundle(bundle);\n        setLoading(false);\n        console.log(\"Loading complete\");\n      }).catch(handleError);\n    }\n\n    const handleError = (error) => {\n      console.log(error);\n      setError(true);\n    }\n\n    const handleReset = () => {\n      setUrl(\"\");\n      setFilename(\"\");\n      setError(false);\n      setLoading(false);\n      setBundle(bundleutils.defaultBundle);\n      updateHistory();\n    }\n\n    const updateHistory = (newUrl) => {\n      const windowUrl = new URL(window.location);\n      if (newUrl) {\n        windowUrl.searchParams.set(\"url\", newUrl);\n      } else {\n        windowUrl.searchParams.delete(\"url\");\n      }\n      window.history.replaceState({}, '', windowUrl);\n    }\n\n    const classes = useStyles();\n\n    const MainView = () => {\n      if (error) {\n        console.log(\"Rendering error screen\");\n        return (\n          <Alert severity=\"error\">\n              <AlertTitle>Error</AlertTitle>\n              Could not load bundle, is it accessible and an OctoPrint SystemInfo Bundle zipfile?\n          </Alert>\n        )\n      } else if (loading) {\n        console.log(\"Rendering loading screen\");\n        return (\n          <div style={{ display: \"flex\", justifyContent: \"center\", }}>\n              <CircularProgress />\n          </div>\n        )\n      } else if (bundle.systeminfo) {\n        console.log(\"Rendering bundle\");\n        return (\n          <BundleView bundle={bundle} />\n        )\n      } else {\n        console.log(\"Rendering empty\");\n        return (\n          <NothingLoaded onUpload={handleUpload} />\n        )\n      }\n    }\n\n    const Navbar = () => {\n      return (\n        <AppBar className={classes.appBar}>\n          <Toolbar className={classes.toolbar}>\n              <IconButton onClick={handleReset} color=\"inherit\">\n                <HomeIcon />\n              </IconButton>\n              <Hidden mdUp>\n                <div className={classes.grow} />\n              </Hidden>\n              <div className={classes.urlbar}>\n                <UrlBar url={url} filename={filename} handleUrlChange={handleUrlChange} />\n              </div>\n              {url ? <ShareButton url={url} /> : null}\n              <DarkModeToggle darkMode={darkMode} onChange={handleDarkModeToggle} />\n              <Hidden xsDown>\n                <IconButton href=\"https://github.com/OctoPrint/bundleviewer.octoprint.org\" target=\"_blank\" color=\"inherit\">\n                  <GitHubIcon />\n                </IconButton>\n              </Hidden>\n          </Toolbar>\n        </AppBar>\n      )\n    }\n\n    return (\n        <ThemeProvider theme={darkModeTheme}>\n          <SnackbarProvider>\n            <div className={classes.root} style={{display: \"flex\"}}>\n                <CssBaseline />\n                <Navbar />\n                <main className={classes.content}>\n                    <Container maxWidth=\"lg\" className={classes.container}>\n                      <MainView />\n                    </Container>\n                </main>\n            </div>\n          </SnackbarProvider>\n        </ThemeProvider>\n    )\n}\n","import { useState } from \"react\";\n\nexport default function useLocalStorage(key, initialValue) {\n  // Source: https://usehooks.com/useLocalStorage/\n\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that\n  // persists the new value to localStorage.\n  const setValue = (value) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n\n      // Save state\n      setStoredValue(valueToStore);\n\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nconst search = window.location.search;\nconst params = new URLSearchParams(search);\n\n//const url = \"http://localhost:8000/octoprint-systeminfo-20210119184038.zip\";\n//const url = \"https://github.com/foosel/testing-stuff/files/5837673/octoprint-systeminfo-20210119184038.zip\";\nconst url = params.get('url', '');\n\nconsole.log(\"URL\", url);\n\nReactDOM.render(\n  <App url={(url == null) ? \"\" : url} />,\n  document.querySelector('#root'),\n);"],"sourceRoot":""}