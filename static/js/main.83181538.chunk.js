(this["webpackJsonpbundleviewer.octoprint.org"]=this["webpackJsonpbundleviewer.octoprint.org"]||[]).push([[0],{335:function(e){e.exports=JSON.parse('{"a":"1.2.0"}')},437:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(76),i=n.n(o),c=n(11),l=n(3),s=n(477),u=n(317),d=n(480),h=n(119),p=n(479),j=n(482),b=n(286),f=n(319),g=n(326),O=n(321),x=n(305),m=n(298),v=n(481),y=n(356),w=n.n(y),k=n(330),S=n(318),C=n(320),N=n(306),R=n(105),P=n(357),_=n(335),E=n(297),I=n(337),z=n.n(I),T=n(336),D=n.n(T),F=n(2);function B(e){var t=Object(r.useState)(e.darkMode),n=Object(c.a)(t,2),a=n[0],o=n[1];return Object(F.jsx)(E.a,{title:"Toggle dark mode",children:Object(F.jsx)(m.a,{onClick:function(){e.onChange(!a),o(!a)},color:"inherit",size:"large",children:a?Object(F.jsx)(D.a,{}):Object(F.jsx)(z.a,{})})})}var L=n(37),A=n(32),U=n(339),G=n.n(U),W=n(269),M=n.n(W),V=Object(d.a)((function(e){var t,n;return{grow:{flexGrow:1},url:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(L.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(L.a)(e.palette.common.white,.25)}},Object(l.a)(t,e.breakpoints.up("md"),{marginRight:e.spacing(2),marginLeft:e.spacing(2)}),Object(l.a)(t,"flexGrow",1),t),urlIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:(n={padding:e.spacing(1,1,1,1)},Object(l.a)(n,e.breakpoints.up("md"),{paddingLeft:"calc(1em + ".concat(e.spacing(4),")")}),Object(l.a)(n,"transition",e.transitions.create("width")),Object(l.a)(n,"width","100%"),n)}}));function H(e){var t=V(),n=Object(r.useState)(e.url),a=Object(c.a)(n,2),o=a[0],i=a[1],l=Object(r.useState)(e.filename?"upload":"url"),s=Object(c.a)(l,1)[0];return Object(F.jsxs)("div",{className:t.url,children:[Object(F.jsx)(v.a,{lgDown:!0,children:Object(F.jsx)("div",{className:t.urlIcon,children:e.filename?Object(F.jsx)(M.a,{}):Object(F.jsx)(G.a,{})})}),Object(F.jsx)(A.c,{placeholder:"URL...",classes:{root:t.inputRoot,input:t.inputInput},onChange:function(e){"url"===s&&i(e.target.value)},onKeyDown:function(t){"url"===s&&"Enter"===t.key&&e.handleUrlChange(o)},defaultValue:"upload"===s?e.filename:e.url,inputProps:{readOnly:"upload"===s}})]})}var q=n(302),Z=n(299),J=n(304),$=n(301),Q=n(300),K=n(340),Y=n.n(K);function X(e){var t=Object(R.b)().enqueueSnackbar,n=Object(r.useState)(!1),a=Object(c.a)(n,2),o=a[0],i=a[1],l=window.location.origin+window.location.pathname+"?url="+encodeURIComponent(e.url),s=function(){i(!1)};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(E.a,{title:"Get shareable link",children:Object(F.jsx)(m.a,{onClick:function(){i(!0)},color:"inherit",size:"large",children:Object(F.jsx)(Y.a,{})})}),Object(F.jsxs)(Z.a,{open:o,onClose:s,fullWidth:!0,children:[Object(F.jsx)(Q.a,{children:"Shareable link"}),Object(F.jsx)($.a,{children:Object(F.jsx)(q.a,{value:l,InputProps:{readOnly:!0},onFocus:function(e){e.target.select()},fullWidth:!0})}),Object(F.jsxs)(J.a,{children:[navigator.share?Object(F.jsx)(x.a,{onClick:function(){navigator.share&&(navigator.share({title:document.title,url:l}),s())},children:"Share"}):null,navigator.clipboard?Object(F.jsx)(x.a,{onClick:function(){navigator.clipboard&&(navigator.clipboard.writeText(l),t("URL copied to clipboard!"),s())},children:"Copy"}):null,Object(F.jsx)(x.a,{onClick:s,children:"Close"})]})]})]})}var ee=n(276),te=n.n(ee);function ne(e){var t=Object(r.useState)(!1),n=Object(c.a)(t,2),a=n[0],o=n[1],i=function(){o(!1)};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(E.a,{title:"About Bundle Viewer",children:Object(F.jsx)(m.a,{onClick:function(){o(!0)},color:"inherit",size:"large",children:Object(F.jsx)(te.a,{})})}),Object(F.jsxs)(Z.a,{open:a,onClose:i,fullWidth:!0,children:[Object(F.jsx)(Q.a,{children:"About Bundle Viewer"}),Object(F.jsxs)($.a,{children:[Object(F.jsxs)("p",{children:["Bundle Viewer is a viewer for ",Object(F.jsx)(N.a,{href:"https://octoprint.org",target:"_blank",rel:"noreferrer noopener",color:"inherit",underline:"always",children:"OctoPrint"})," system info bundles and log files."]}),Object(F.jsxs)("p",{children:["Its source code can be found on ",Object(F.jsx)(N.a,{href:"https://github.com/OctoPrint/bundleviewer.octoprint.org",target:"_blank",rel:"noreferrer noopener",color:"inherit",underline:"always",children:"github.com/OctoPrint/bundleviewer.octoprint.org"}),"."]}),Object(F.jsx)("hr",{}),Object(F.jsx)("p",{children:"Bundleviewer can be installed as a PWA and used a share target on Android."}),Object(F.jsx)("hr",{}),Object(F.jsx)("p",{children:'There\'s an accompanying web extension for Firefox and Chrome to add an "Open in Bundle Viewer" context menu to links in the browser on associated websites:'}),Object(F.jsxs)("p",{style:{textAlign:"center"},children:[Object(F.jsx)(N.a,{href:"https://addons.mozilla.org/en-GB/firefox/addon/open-in-bundle-viewer/",target:"_blank",rel:"noopener noreferrer",color:"inherit",underline:"always",children:Object(F.jsx)("img",{src:"https://img.shields.io/amo/v/open-in-bundle-viewer?label=Firefox%20add-on&logo=firefox",alt:"Firefox add-on"})})," ",Object(F.jsx)(N.a,{href:"https://chrome.google.com/webstore/detail/open-in-bundle-viewer/pjjocccheogfceldegkfnbfmobmblhpp",target:"_blank",rel:"noopener noreferrer",color:"inherit",underline:"always",children:Object(F.jsx)("img",{src:"https://img.shields.io/chrome-web-store/v/pjjocccheogfceldegkfnbfmobmblhpp?label=Chrome%20extension&logo=google%20chrome",alt:"Chrome extension"})})]}),Object(F.jsxs)("p",{children:["Its source code can be found on ",Object(F.jsx)(N.a,{href:"https://github.com/OctoPrint/Open-in-Bundle-Viewer",target:"_blank",rel:"noreferrer noopener",color:"inherit",underline:"always",children:"github.com/OctoPrint/Open-in-Bundle-Viewer"}),"."]}),Object(F.jsxs)("p",{children:["There's also an accompanying ",Object(F.jsx)(N.a,{href:"https://community.octoprint.org/t/open-in-bundle-viewer-browser-extension/30275",target:"_blank",rel:"noreferrer noopener",color:"inherit",underline:"always",children:"forum thread"}),"."]})]}),Object(F.jsx)(J.a,{children:Object(F.jsx)(x.a,{onClick:i,children:"Close"})})]})]})}var re=n(341),ae=n.n(re);function oe(e){var t=Object(r.useState)(!1),n=Object(c.a)(t,2),a=n[0],o=n[1],i=function(){o(!1)};return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(E.a,{title:"Debug Bundle Viewer",children:Object(F.jsx)(m.a,{onClick:function(){o(!0)},color:"inherit",size:"large",children:Object(F.jsx)(ae.a,{})})}),Object(F.jsxs)(Z.a,{open:a,onClose:i,fullWidth:!0,children:[Object(F.jsx)(Q.a,{children:"Debug info"}),Object(F.jsx)($.a,{children:Object(F.jsxs)("dl",{children:[Object(F.jsx)("dt",{children:"shared.text"}),Object(F.jsx)("dd",{children:e.shared.text}),Object(F.jsx)("dt",{children:"shared.url"}),Object(F.jsx)("dd",{children:e.shared.url}),Object(F.jsx)("dt",{children:"shared.title"}),Object(F.jsx)("dd",{children:e.shared.title}),Object(F.jsx)("dt",{children:"url"}),Object(F.jsx)("dd",{children:e.url})]})}),Object(F.jsx)(J.a,{children:Object(F.jsx)(x.a,{onClick:i,children:"Close"})})]})]})}var ie=n(69),ce=n(311),le=n(312),se=n(313),ue=n(158),de=n.n(ue),he=n(81),pe=n(343),je=n.n(pe),be=n(346),fe=n.n(be),ge=n(347),Oe=n.n(ge),xe=n(309),me=n(344),ve=n.n(me),ye=n(345),we=n.n(ye),ke=n(279),Se=n(307),Ce=n(308),Ne=n(331),Re=n(342),Pe=n.n(Re);function _e(e){var t=e.filters,n=e.active,a=e.handleFilterChange,o=Object(r.useState)(n||[]),i=Object(c.a)(o,2),l=i[0],s=i[1],u=Object(r.useState)(!1),d=Object(c.a)(u,2),h=d[0],p=d[1],j=Boolean(h);return console.log("Filters:",t),console.log("Active filters:",l),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(E.a,{title:"Filters",children:Object(F.jsx)(m.a,{onClick:function(e){p(e.currentTarget)},color:l.length?"primary":"default",size:"small",children:Object(F.jsx)(Pe.a,{})})}),Object(F.jsx)(ke.a,{multiple:!0,value:l,style:{display:"none"},open:j,onClose:function(){p(!1)},onChange:function(e){s((function(){return a&&a(e.target.value),e.target.value}))},MenuProps:{anchorEl:h},children:t.map((function(e,t){return Object(F.jsxs)(Se.a,{value:e.pattern,children:[Object(F.jsx)(Ne.a,{checked:!!l.find((function(t){return t.source===e.pattern.source}))}),Object(F.jsx)(Ce.a,{primary:e.title})]},t)}))})]})}var Ee=Object(d.a)((function(e){var t;return{grow:{flexGrow:1},query:(t={position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(L.a)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(L.a)(e.palette.common.white,.25)}},Object(l.a)(t,e.breakpoints.up("md"),{marginRight:e.spacing(2),marginLeft:e.spacing(2)}),Object(l.a)(t,"flexGrow",1),Object(l.a)(t,"marginTop",e.spacing(2)),Object(l.a)(t,"marginBottom",e.spacing(2)),t),inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1),transition:e.transitions.create("width"),width:"100%"},result:{color:e.palette.secondary,fontSize:e.typography.pxToRem(12)}}}));function Ie(e){var t=e.pos,n=e.count,o=e.handlePerformQuery,i=e.handlePerformFilter,l=e.filters,s=Ee(),u=Object(r.useState)(e.query),d=Object(c.a)(u,2),h=d[0],p=d[1],j=Object(r.useState)(!1),b=Object(c.a)(j,2),f=b[0],g=b[1],O=Object(r.useState)(!1),x=Object(c.a)(O,2),v=x[0],y=x[1],w=Object(r.useState)([]),k=Object(c.a)(w,2),S=k[0],C=k[1],N=a.a.createRef(),R=function(){o&&o(h,f,v)},P=function(){p(""),N.current.value="",e.onCancel&&e.onCancel()},_=function(){g((function(e){var t=!e;return o(h,t,v),t}))},I=function(){y((function(e){var t=!e;return o(h,f,t),t}))},z=function(e){C(e=e||[]),i&&i(e)},T=function(){return Object(F.jsx)(xe.a,{position:"start",children:Object(F.jsx)(E.a,{title:"Search",children:Object(F.jsx)("span",{children:Object(F.jsx)(m.a,{onClick:R,disabled:""===h,size:"small",children:Object(F.jsx)(je.a,{})})})})})},D=function(e){return Object(F.jsxs)(xe.a,{position:"end",children:[n?Object(F.jsxs)("span",{className:s.result,children:[t," / ",n]}):null,l.length?Object(F.jsx)(_e,{filters:l,active:S,handleFilterChange:z}):null,Object(F.jsx)(E.a,{title:"Toggle regular expression mode",children:Object(F.jsx)(m.a,{onClick:_,color:f?"primary":"default",size:"small",children:Object(F.jsx)(ve.a,{})})}),Object(F.jsx)(E.a,{title:"Toggle case sensitivity",children:Object(F.jsx)(m.a,{onClick:I,color:v?"primary":"default",size:"small",children:Object(F.jsx)(we.a,{})})}),Object(F.jsx)(E.a,{title:"Scroll to previous match",children:Object(F.jsx)("span",{children:Object(F.jsx)(m.a,{onClick:e.onPrev,disabled:0===n,size:"small",children:Object(F.jsx)(fe.a,{})})})}),Object(F.jsx)(E.a,{title:"Scroll to next match",children:Object(F.jsx)("span",{children:Object(F.jsx)(m.a,{onClick:e.onNext,disabled:0===n,size:"small",children:Object(F.jsx)(de.a,{})})})}),Object(F.jsx)(E.a,{title:"Delete search query",children:Object(F.jsx)("span",{children:Object(F.jsx)(m.a,{onClick:P,disabled:""===h,size:"small",children:Object(F.jsx)(Oe.a,{})})})})]})};return Object(F.jsx)("div",{className:s.query,children:Object(F.jsx)(A.c,{placeholder:"Search...",classes:{root:s.inputRoot,input:s.inputInput},onChange:function(t){p(t.target.value),e.handleQueryChange&&e.handleQueryChange(h)},onKeyDown:function(e){"Enter"===e.key&&R()},defaultValue:e.query,startAdornment:Object(F.jsx)(T,{}),endAdornment:Object(F.jsx)(D,{}),inputRef:N})})}var ze=n(358);function Te(e){var t=e.lines,n=t.reduce((function(e,t){return t.length>e.length?t:e}),"").length,o=t.length,i=e.highlighted,s=e.filtered,u=e.scrollTo,h=Object(r.useState)([]),p=Object(c.a)(h,2),j=p[0],b=p[1],f=a.a.createRef();Object(r.useEffect)((function(){var e;u>-1&&(null===(e=f.current)||void 0===e||e.scrollToItem(u,"center"))}),[f,u]),Object(r.useEffect)((function(){for(var e=[],n=!1,r=0;r<t.length;r++)s.includes(r)?n||(n=!0,e.push(-1)):(n&&(n=!1),e.push(r));b(e)}),[t,s]);var g,O=Object(d.a)((function(e){return{log:{flexGrow:1},pre:Object(l.a)({margin:0,"font-family":"'JetBrains Mono', 'Droid Sans Mono', monospace"},e.breakpoints.down("lg"),{fontSize:e.typography.pxToRem(12)}),linewrap:{width:"".concat(n,"ch !important"),'&[data-matched="true"]':{"background-color":"rgba(255, 255, 0, .2)"}},line:{paddingLeft:e.spacing(1),"&::before":{content:"attr(data-linenumber)",display:"inline-block",width:"".concat(o.toString().length,"ch"),"text-align":"right","margin-right":"1em",color:e.palette.text.disabled},'&[data-loglevel="DEBUG"]':{color:e.palette.text.secondary},'&[data-loglevel="WARNING"]':{color:e.palette.warning.main},'&[data-loglevel="ERROR"]':{color:e.palette.error.main},'&[data-stream="stdin"]':{color:e.palette.info.main},'&[data-stream="stderr"]':{color:e.palette.error.main},'&[data-updateresult="FAILED"]':{color:e.palette.error.main}},filtered:{paddingLeft:e.spacing(1),color:e.palette.text.secondary,"font-style":"italic","&::before":{content:"''",display:"inline-block",width:"".concat(o.toString().length,"ch"),"text-align":"right","margin-right":"1em"}}}}))(),x=function(e){switch(e.charAt(24)){case" ":return"stdin";case">":return"stdout";case"!":return"stderr";default:return"plain"}};switch(e.language){case"log":g=function(e){var n,r=e.index,a=e.style;return Object(F.jsx)("span",{"data-matched":i.includes(r),style:a,className:O.linewrap,children:Object(F.jsx)("span",{"data-linenumber":r+1,"data-loglevel":(n=t[r],n.split(" ")[5]),className:O.line,children:t[r]})})};break;case"cli":g=function(e){var n=e.index,r=e.style;return Object(F.jsx)("span",{"data-matched":i.includes(n),style:r,className:O.linewrap,children:Object(F.jsx)("span",{"data-linenumber":n+1,"data-stream":x(t[n]),className:O.line,children:t[n]})})};break;case"updatelog":g=function(e){var n,r=e.index,a=e.style;return Object(F.jsx)("span",{"data-matched":i.includes(r),style:a,className:O.linewrap,children:Object(F.jsx)("span",{"data-linenumber":r+1,"data-updateresult":(n=t[r],n.includes("- FAILED -")?"FAILED":n.includes("- SUCCESS -")?"SUCCESS":"PLAIN"),className:O.line,children:t[r]})})};break;default:g=function(e){var n=e.index,r=e.style;return Object(F.jsx)("span",{"data-matched":i.includes(n),style:r,className:O.linewrap,children:Object(F.jsx)("span",{"data-linenumber":n+1,className:O.line,children:t[n]})})}}return Object(F.jsx)("code",{className:O.log,children:Object(F.jsx)("pre",{className:O.pre,children:Object(F.jsx)(ze.a,{height:500,itemCount:j.length,itemSize:20,style:{overflow:"scroll"},ref:f,children:function(e){var t=e.index,n=e.style,r=j[t];return-1===r?Object(F.jsx)("span",{style:n,className:O.linewrap,children:Object(F.jsx)("span",{className:O.filtered,children:"[...]"})}):Object(F.jsx)(g,{index:r,style:n})}})})})}var De=n(348),Fe=n.n(De),Be=n(240),Le=n.n(Be),Ae=n(285),Ue=n.n(Ae),Ge=[{language:"serial",patterns:[/^serial\.log$/],filters:[{title:"Temperature messages",pattern:/(Send: (N\d+\s+)?M105)|(Recv:\s+(ok\s+([PBN]\d+\s+)*)?([BCLPR]|T\d*):-?\d+)/}]},{language:"cli",patterns:[/^.*_console.*\.log$/],filters:[]},{language:"updatelog",patterns:[/^.*_update\.log$/],filters:[]},{language:"log",patterns:[/^.*\.log$/],filters:[{title:"DEBUG",pattern:/\sDEBUG\s/},{title:"INFO",pattern:/\sINFO\s/}]}],We=function(e){var t,n=Object(ie.a)(Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=r.language,o=r.filters;if(e===a)return o}}catch(i){n.e(i)}finally{n.f()}return[]};function Me(e){var t=Object(R.b)().enqueueSnackbar,n=e.log,a=e.content,o=a.trim().split("\n").map((function(e){return e.trimEnd()+"\n"})),i=o.length,s=e.language||function(e){var t,n=Object(ie.a)(Ge);try{for(n.s();!(t=n.n()).done;){var r,a=t.value,o=a.language,i=a.patterns,c=Object(ie.a)(i);try{for(c.s();!(r=c.n()).done;){var l=r.value;if(e.match(l))return console.log("Match! ".concat(l," vs ").concat(e)),o}}catch(s){c.e(s)}finally{c.f()}}}catch(s){n.e(s)}finally{n.f()}return"plain"}(n),u=Object(r.useState)(""),h=Object(c.a)(u,2),p=h[0],j=h[1],b=Object(r.useState)(!1),f=Object(c.a)(b,2),g=f[0],O=f[1],x=Object(r.useState)(!1),m=Object(c.a)(x,2),v=m[0],y=m[1],w=Object(r.useState)(0),k=Object(c.a)(w,2),S=k[0],C=k[1],N=Object(r.useState)(0),P=Object(c.a)(N,2),_=P[0],E=P[1],I=Object(r.useState)([]),z=Object(c.a)(I,2),T=z[0],D=z[1],B=Object(r.useState)([]),L=Object(c.a)(B,2),A=L[0],U=L[1],G=Object(d.a)((function(e){return{background:{},accordionbar:Object(l.a)({display:"flex",flexGrow:1,alignItems:"center"},e.breakpoints.down("lg"),{flexWrap:"wrap"}),accordiondetails:{display:"flex",flexGrow:1,flexDirection:"column"},grow:{flexGrow:1},icon:{padding:e.spacing(0,1),fontSize:"1.5rem"},secondaryHeading:Object(l.a)({fontSize:e.typography.pxToRem(12),color:e.palette.text.secondary,padding:e.spacing(0,1),textAlign:"right"},e.breakpoints.down("lg"),{textAlign:"left",padding:e.spacing(0,0)}),title:Object(l.a)({flexGrow:1,alignItems:"center"},e.breakpoints.down("lg"),{flexBasis:"100%"}),info:Object(l.a)({},e.breakpoints.down("lg"),{flexBasis:"100%"})}}))(),W=function(){if(T.length){var e=_<T.length-1?_+1:0;C(T[e]),E(e)}},M=Object(r.useState)(!1),V=Object(c.a)(M,2),H=V[0],q=V[1],Z=Object(r.useState)(!1),J=Object(c.a)(Z,2),$=J[0],Q=J[1];return Object(r.useEffect)((function(){q("serial.log"===n&&0===o.filter((function(e){return e.trim()&&!e.includes("serial.log is currently not enabled")})).length);var e=a.includes("!!! UNDERVOLTAGE REPORTED !!!"),r=a.includes("!!! FREQUENCY CAPPING DUE TO OVERHEATING REPORTED !!!");Q(e||r);var i=o.filter((function(e){return e.includes("|  Pi Support Plugin")||e.includes("| !Pi Support Plugin")})),c=i.length&&i[i.length-1].includes("| !Pi Support Plugin");H&&t("Serial log is currently not enabled. Should be enabled when reporting issues with the printer.",{variant:"info"}),c&&t("Pi Support Plugin disabled in the log, there might be an undetected undervoltage or overheating situation!",{variant:"error",persist:!0,key:"pi_support_disabled"}),$&&t("System is or was throttled, system may behave erratically. Fix before further debugging.",{variant:"error",persist:!0,key:"throttled"})}),[n,o,a,t,H,$]),Object(F.jsxs)(ce.a,{defaultExpanded:e.expanded,children:[Object(F.jsx)(le.a,{expandIcon:Object(F.jsx)(de.a,{}),"aria-controls":"panel-log-"+e.index+"-content",id:"panel-log-"+e.index+"-header",children:Object(F.jsxs)("div",{className:G.accordionbar,children:[Object(F.jsx)("div",{className:G.title,children:Object(F.jsxs)(he.a,{className:G.heading,style:{display:"flex",alignItems:"center"},children:[n,$?Object(F.jsx)(Le.a,{className:G.icon,size:"1.5em"}):null,H?Object(F.jsx)(Fe.a,{className:G.icon,size:"1.5em"}):null]})}),Object(F.jsxs)("div",{className:G.info,children:[Object(F.jsx)(he.a,{className:G.secondaryHeading,children:Ue()(a.length)+" "+(1===a.length?"char":"chars")}),Object(F.jsx)(he.a,{className:G.secondaryHeading,children:Ue()(i)+" "+(1===i?"line":"lines")})]})]})}),Object(F.jsxs)(se.a,{className:G.accordiondetails,children:[Object(F.jsx)(Ie,{className:G.grow,pos:_+1,count:T.length,regexMode:g,onNext:W,onPrev:function(){if(T.length){var e=_>0?_-1:T.length-1;C(T[e]),E(e)}},onCancel:function(){D([]),E(0),j("")},handlePerformQuery:function(e,t,n){if(e)if(console.log("Starting query:",e),e!==p||t!==g||n!==v){console.log('... calculate matches for "'.concat(e,'", regex: ').concat(t,", case sensitive: ").concat(n));var r,a=e.toLowerCase();r=t?function(t){return t.match(e)}:function(t){return t.includes(n?e:a)};var i=o.reduce((function(e,t,a){return r(n?t:t.toLowerCase())&&e.push(a),e}),[]);i.length&&C(i[0]),D(i),E(0),j(e),O(t),y(n),console.log("Highlighted:",i,", cursor:",0)}else W()},handlePerformFilter:function(e){console.log("Starting filter:",e);var t=o.reduce((function(t,n,r){return function(t){var n,r=Object(ie.a)(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(t.match(a))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}(n)&&t.push(r),t}),[]);U(t),console.log("Filtered:",t)},filters:We(s)}),Object(F.jsx)(Te,{lines:o,highlighted:T,filtered:A,scrollTo:S,language:s})]})]},n)}var Ve=n(241),He=n(349),qe=n.n(He),Ze=n(350),Je=n.n(Ze),$e=n(125),Qe=n.n($e);var Ke={diffInSeconds:function(e,t){return Math.floor(Math.abs(e-t)/1e3)},formatTimeDiff:function(e){for(var t=0,n=[{factor:31536e3,unit1:"year",unitn:"years"},{factor:2592e3,unit1:"month",unitn:"months"},{factor:604800,unit1:"week",unitn:"weeks"},{factor:86400,unit1:"day",unitn:"days"},{factor:3600,unit1:"hour",unitn:"hours"},{factor:60,unit1:"minute",unitn:"minutes"}];t<n.length;t++){var r=n[t],a=Math.floor(e/r.factor);if(a>0)return a+" "+(1===a?r.unit1:r.unitn)}return e+" "+(1===e?"second":"seconds")}},Ye=["Zero","Zero W"],Xe=Object(d.a)((function(e){return{accordionbar:Object(l.a)({display:"flex",flexGrow:1,alignItems:"center"},e.breakpoints.down("lg"),{flexWrap:"wrap"}),grow:{flexGrow:1},icon:{padding:e.spacing(0,1),fontSize:"1.5rem"},secondaryHeading:Object(l.a)({fontSize:e.typography.pxToRem(12),color:e.palette.text.secondary,padding:e.spacing(0,1),textAlign:"right"},e.breakpoints.down("lg"),{textAlign:"left",padding:e.spacing(0,0)}),title:Object(l.a)({flexGrow:1,alignItems:"center"},e.breakpoints.down("lg"),{flexBasis:"100%"}),info:Object(l.a)({},e.breakpoints.down("lg"),{flexBasis:"100%"})}}));function et(e){var t,n=Object(R.b)().enqueueSnackbar,r=e.info.split("\n").filter((function(e){return""!==e.trim()})).map((function(e){var t=e.split(":"),n=Object(Ve.a)(t);return{key:n[0],value:n.slice(1).join(":")}})),a={},o=Object(ie.a)(r);try{for(o.s();!(t=o.n()).done;){var i=t.value;a[i.key]=i.value}}catch(v){o.e(v)}finally{o.f()}var c=Xe(),l=function(e,t){var n=a[t];return n?Object(F.jsx)(he.a,{className:c.secondaryHeading,children:e+" "+n}):null},s=function(e,t){return a[e]&&t(a[e])},u=function(e){return"true"===e.toLowerCase().trim()},d=s("octoprint.safe_mode",(function(e){return u(e)})),h=s("env.plugins.pi_support.throttle_state",(function(e){return"0x0"!==e.trim()})),p=s("env.plugins.pi_support.throttle_check_enabled",(function(e){return!u(e)})),j=s("printer.firmware",(function(e){return e.includes("Marlin bugfix-")})),b=s("env.plugins.pi_support.model",(function(e){return function(e){e=e.toLowerCase();var t,n=Object(ie.a)(Ye.map((function(e){return e.toLowerCase()})));try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e.includes("".concat(r," rev"))||e.endsWith(r))return!0}}catch(v){n.e(v)}finally{n.f()}return!1}(e)})),f=s("env.python.version",(function(e){return!Qe.a.satisfies(e,">=3.7")})),g=s("env.python.version",(function(e){return!Qe.a.satisfies(e,">=2.7.13 <3 || >=3.7")})),O=s("env.python.pip",(function(e){return!Qe.a.satisfies(e,">=19.0.1")})),x=s("env.python.setuptools",(function(e){return!Qe.a.satisfies(e,">=40.7.1")})),m=s("octoprint.version",(function(e){return Qe.a.satisfies(e,"<1.8.0")}))&&s("env.python.pip",(function(e){return Qe.a.satisfies(e,">=22")}));return d&&n("Safe mode enabled.",{key:"safemode"}),h&&n("System is or was throttled, system may behave erratically. Fix before further debugging.",{variant:"error",persist:!0,key:"throttled"}),p&&n("Throttle check disabled by user. Potential undervoltage or overheating issues will not be detected.",{variant:"warning",persist:!0,key:"throttle_check_disabled"}),j&&n("Marlin-Bugfix firmware development build detected, firmware may be unstable.",{key:"marlin_bugfix"}),b&&n("Unrecommended Raspberry Pi model detected.",{key:"unrecommended_model",variant:"error",persist:!0}),f&&n("OctoPrint is still running under Python 2",{key:"still_python_2",variant:"warning",persist:!0}),g&&n("Python version is too old for automatic updating.",{key:"python_too_old",variant:"error",persist:!0}),O&&n("Pip version is too old for automatic updating.",{key:"pip_too_old",variant:"error",persist:!0}),x&&n("Setuptools version is too old for automatic updating.",{key:"setuptools_too_old",variant:"error",persist:!0}),m&&n("Susceptible for update/plugin install issue #4392",{key:"issue_4392"}),function(){var e=a["octoprint.last_safe_mode.date"],t=a["systeminfo.generated"];if(e&&t)if("unknown"!==e.trim()){var r=new Date,o=new Date;r.setTime(Date.parse(e.trim())),o.setTime(Date.parse(t.trim()));var i=Ke.formatTimeDiff(Ke.diffInSeconds(r,o));n("Last start in safe mode was ".concat(i," before bundle creation."),{key:"last_safe_mode",variant:"info",persist:!0})}else n("Last start in safe mode is unknown.",{key:"last_safe_mode",variant:"warning",persist:!0})}(),Object(F.jsxs)(ce.a,{defaultExpanded:!0,children:[Object(F.jsx)(le.a,{expandIcon:Object(F.jsx)(de.a,{}),"aria-controls":"panel-sysinfo-content",id:"panel-sysinfo-header",children:Object(F.jsxs)("div",{className:c.accordionbar,children:[Object(F.jsx)("div",{className:c.title,children:Object(F.jsxs)(he.a,{className:c.heading,style:{display:"flex",alignItems:"center"},children:["System Information",d?Object(F.jsx)(Je.a,{className:c.icon,size:"1.5em"}):null,h?Object(F.jsx)(Le.a,{className:c.icon,size:"1.5em"}):null,j?Object(F.jsx)(qe.a,{className:c.icon,size:"1.5em"}):null]})}),Object(F.jsxs)("div",{className:c.info,children:[l("OctoPrint","octoprint.version"),l("Python","env.python.version"),l("OctoPi","env.plugins.pi_support.octopi_version"),l("Firmware","printer.firmware")]})]})}),Object(F.jsx)(se.a,{children:Object(F.jsx)("div",{className:c.list,children:r.map((function(e,t){return Object(F.jsxs)("div",{children:[Object(F.jsx)("strong",{children:e.key}),": ",e.value]},e.key)}))})})]})}function tt(e){return Object(F.jsxs)(F.Fragment,{children:[e.bundle.systeminfo?Object(F.jsx)(et,{info:e.bundle.systeminfo}):null,e.bundle.logs.map((function(t,n){return Object(F.jsx)(Me,{expanded:!e.bundle.systeminfo&&0===n,log:t.log,content:t.content,index:n},"log-"+n)}))]})}var nt=n(351);function rt(e){console.log("Rendering NothingChanged...");return Object(F.jsx)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:Object(F.jsx)(nt.DropzoneArea,{style:{"flex-basis":"100%"},dropzoneText:"Enter an URL above and press Enter, or drag and drop a file here or click to upload one",onChange:function(t){console.log("Entered NothingLoaded.handleChange..."),t.length>0&&(console.log("File:",t[0]),e.onUpload(t[0])),console.log("Exiting NothingLoaded.handleChange...")},filesLimit:1,acceptedFiles:[".zip",".log",".txt"],maxFileSize:3e7,showPreviewsInDropzone:!1,showAlerts:!1})})}var at=n(80),ot=n(24),it=n.n(ot),ct=n(353),lt=n.n(ct);function st(){return(st=Object(at.a)(it.a.mark((function e(t){var n,r,a,o,i;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{mode:"cors"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Could not load file from ".concat(t,": ").concat(n.status));case 5:return e.next=7,n.blob();case 7:return r=e.sent,o=n.headers.get("content-disposition"),a=o?(null===(i=lt.a.parse(o).parameters)||void 0===i?void 0:i.filename)||"unknown":t.substring(t.lastIndexOf("/")+1),r.name=a,e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut={loadRemote:function(e){return st.apply(this,arguments)}},dt=ut,ht=n(354),pt=n.n(ht);function jt(){return(jt=Object(at.a)(it.a.mark((function e(t){var n,r;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.loadRemote(t);case 2:return n=e.sent,r=n.blob,e.next=6,bt(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(at.a)(it.a.mark((function e(t){return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt.a.loadAsync(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(){return(gt=Object(at.a)(it.a.mark((function e(t,n){return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.file(n);case 2:return e.t0=e.sent,e.abrupt("return",null!==e.t0);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(){return(Ot=Object(at.a)(it.a.mark((function e(t,n,r){return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=r||"blob",e.next=3,t.file(n).async(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xt={loadZip:bt,loadRemoteZip:function(e){return jt.apply(this,arguments)},containsFile:function(e,t){return gt.apply(this,arguments)},getFileContents:function(e,t,n){return Ot.apply(this,arguments)}},mt=xt;function vt(){return(vt=Object(at.a)(it.a.mark((function e(t){var n,r,a,o,i,c,l,s,u,d,h,p,j;return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=["octoprint.log","serial.log","terminal.txt","plugin_softwareupdate_console.log","plugin_pluginmanager_console.log"],r=!1,e.prev=2,e.next=5,mt.getFileContents(t,"systeminfo.txt","string");case 5:r=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),console.log("Could not read systeminfo.txt from zip, probably not a bundle...");case 11:a={},o=Object(ie.a)(t.file(/\.(log|txt|gcode|gco|g)$/i)),e.prev=13,o.s();case 15:if((i=o.n()).done){e.next=30;break}if(!(c=i.value).name.startsWith(".")&&!c.name.startsWith("__")&&"systeminfo.txt"!==c.name){e.next=19;break}return e.abrupt("continue",28);case 19:return e.prev=19,e.next=22,c.async("string");case 22:a[c.name]=e.sent,e.next=28;break;case 25:e.prev=25,e.t1=e.catch(19),console.log("Could not read {f.name} from zip...");case 28:e.next=15;break;case 30:e.next=35;break;case 32:e.prev=32,e.t2=e.catch(13),o.e(e.t2);case 35:return e.prev=35,o.f(),e.finish(35);case 38:for(l=[],s=0,u=n;s<u.length;s++)d=u[s],a[d]&&l.push({log:d,content:a[d]});h=Object(ie.a)(Object.keys(a).sort());try{for(h.s();!(p=h.n()).done;)j=p.value,n.includes(j)||l.push({log:j,content:a[j]})}catch(b){h.e(b)}finally{h.f()}return e.abrupt("return",{hasContent:!0,systeminfo:r,logs:l});case 43:case"end":return e.stop()}}),e,null,[[2,8],[13,32,35,38],[19,25]])})))).apply(this,arguments)}function yt(){return(yt=Object(at.a)(it.a.mark((function e(t){return it.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t.name||"unknown",e.next=3,t.text();case 3:return e.t1=e.sent,e.t2={log:e.t0,content:e.t1},e.t3=[e.t2],e.abrupt("return",{hasContent:!0,logs:e.t3});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wt={loadBundle:function(e){return vt.apply(this,arguments)},loadLog:function(e){return yt.apply(this,arguments)},defaultBundle:{hasContent:!1,systeminfo:"",logs:[]}},kt=wt,St=n(355),Ct=n.n(St),Nt=Object(d.a)((function(e){var t;return{root:{display:"flex",overflow:"auto"},grow:{flexGrow:1},appBar:{},toolbar:Object(l.a)({},e.breakpoints.down("lg"),{"justify-content":"flex-end","flex-wrap":"wrap"}),urlbar:Object(l.a)({flexGrow:1},e.breakpoints.down("lg"),{"flex-basis":"100%",order:99,paddingBottom:e.spacing(2)}),title:{"justify-item":"left"},offset:e.mixins.toolbar,content:Object(l.a)({flexGrow:1,overflow:"auto","padding-top":e.mixins.toolbar.minHeight},e.breakpoints.down("lg"),{"padding-top":2*e.mixins.toolbar.minHeight}),container:(t={minHeight:"100%",display:"flex",flexDirection:"column",paddingTop:e.spacing(4)},Object(l.a)(t,e.breakpoints.down("lg"),{paddingTop:0}),Object(l.a)(t,"paddingBottom",e.spacing(4)),t),footer:{textAlign:"center",padding:"1em"}}}));function Rt(e){var t=function(e,t){var n=Object(r.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(E){return console.log(E),t}})),a=Object(c.a)(n,2),o=a[0],i=a[1];return[o,function(t){try{var n=t instanceof Function?t(o):t;i(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(E){console.log(E)}}]}("enableDarkMode",Object(s.a)("(prefers-color-scheme: dark)",{noSsr:!0})),n=Object(c.a)(t,2),o=n[0],i=n[1],l=Object(r.useState)(e.url),d=Object(c.a)(l,2),b=d[0],f=d[1],g=Object(r.useState)(""),O=Object(c.a)(g,2),m=O[0],v=O[1],y=Object(r.useState)(kt.defaultBundle),w=Object(c.a)(y,2),k=w[0],S=w[1],C=Object(r.useState)(!1),N=Object(c.a)(C,2),E=N[0],I=N[1],z=Object(r.useState)(!1),T=Object(c.a)(z,2),D=T[0],B=T[1],L=o?"dark":"light",A=Object(h.b)(Object(u.a)({palette:{mode:L}}));Object(r.useEffect)((function(){W(e.url)}),[]);var U=a.a.createRef(),G=function(e){return function(){U.current.closeSnackbar(e)}},W=function(e){if(e){I(!1),B(!0),f(e),Z(e),v("");var t=function(e){return e.match(/^https:\/\/github\.com\/[a-zA-Z0-9_-]+\/[a-zA-Z0-9_-]+\/files\//)?e.replace("https://github.com","https://bundleviewer.octoprint.org/bundles"):e.match(/^https:\/\/community\.octoprint\.org\/uploads\/short-url\//)?e.replace("https://community.octoprint.org/uploads/short-url","https://bundleviewer.octoprint.org/bundles/forum"):e}(e);dt.loadRemote(t).then(M).catch(H)}else q()},M=function(e){mt.loadZip(e).then(V).catch((function(t){var n;try{n=Ct.a.parse(e.type).type}catch(r){n=""}""===n||n.startsWith("text/")?kt.loadLog(e).then((function(e){S(e),B(!1)})).catch(H):H(t)}))},V=function(e){kt.loadBundle(e).then((function(e){S(e),B(!1),console.log("Loading complete")})).catch(H)},H=function(e){console.log(e),I(!0)},q=function(){f(""),v(""),I(!1),B(!1),S(kt.defaultBundle),Z(),U.current&&U.current.closeSnackbar()},Z=function(e){var t=new URL(window.location);e?t.searchParams.set("url",e):t.searchParams.delete("url"),window.history.replaceState({},"",t)};return Object(F.jsx)(P.a,{currentVersion:_.a,isEnabled:!0,isVerboseMode:!0,children:Object(F.jsx)(p.a,{injectFirst:!0,children:Object(F.jsx)(j.a,{theme:A,children:Object(F.jsx)(R.a,{ref:U,action:function(e){return Object(F.jsx)(x.a,{onClick:G(e),children:"Close"})},maxSnack:10,anchorOrigin:{vertical:"bottom",horizontal:"center"},dense:!0,preventDuplicate:!0,children:Object(F.jsx)(Pt,{bundle:k,url:b,filename:m,error:E,loading:D,shared:e.shared,handleUpload:function(e){I(!1),B(!0),v(e.name),f(""),M(e)},handleReset:q,handleUrlChange:W,darkMode:o,handleDarkModeToggle:function(){i(!o)}})})})})})}function Pt(e){var t=e.bundle,n=e.url,r=e.filename,a=e.error,o=e.loading,i=e.shared,c=e.handleUpload,l=e.handleReset,s=e.handleUrlChange,u=e.darkMode,d=e.handleDarkModeToggle,h=Nt(),p=function(){return a?(console.log("Rendering error screen"),Object(F.jsxs)(k.a,{severity:"error",children:[Object(F.jsx)(S.a,{children:"Error"}),"Could not load file. Make sure you are trying to load either an OctoPrint systeminfo bundle, a zip containing logs, or a plain text log file. Other files are not supported."]})):o?(console.log("Rendering loading screen"),Object(F.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(F.jsx)(C.a,{})})):t.hasContent?(console.log("Rendering bundle"),Object(F.jsx)(tt,{bundle:t})):(console.log("Rendering empty"),Object(F.jsx)(rt,{onUpload:c}))},j=function(){return Object(F.jsx)(f.a,{className:h.appBar,children:Object(F.jsxs)(g.a,{className:h.toolbar,children:[Object(F.jsx)(m.a,{onClick:l,color:"inherit",size:"large",children:Object(F.jsx)(w.a,{})}),Object(F.jsx)(v.a,{mdUp:!0,children:Object(F.jsx)("div",{className:h.grow})}),Object(F.jsx)("div",{className:h.urlbar,children:Object(F.jsx)(H,{url:n,filename:r,handleUrlChange:s})}),n?Object(F.jsx)(X,{url:n}):null,Object(F.jsx)(ne,{}),Object(F.jsx)(oe,{url:n,shared:i}),Object(F.jsx)(B,{darkMode:u,onChange:d})]})})};return Object(F.jsxs)("div",{className:h.root,style:{display:"flex",minHeight:"100vh",flexDirection:"column"},children:[Object(F.jsx)(b.b,{}),Object(F.jsx)(j,{}),Object(F.jsx)("main",{className:h.content,children:Object(F.jsx)(O.a,{maxWidth:"lg",className:h.container,children:Object(F.jsx)(p,{})})}),Object(F.jsxs)("footer",{className:h.footer,children:["\xa9 2021 ",Object(F.jsx)(N.a,{href:"https://octoprint.org",target:"_blank",rel:"noreferrer noopener",color:"inherit",underline:"always",children:"OctoPrint"})," \xb7 ",Object(F.jsx)(N.a,{href:"https://octoprint.org/imprint/",target:"_blank",rel:"noreferrer noopener",color:"inherit",underline:"always",children:"Imprint"})," \xb7 ",Object(F.jsx)(N.a,{href:"https://octoprint.org/privacy/",target:"_blank",rel:"noreferrer noopener",color:"inherit",underline:"always",children:"Privacy Policy"})]})]})}var _t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Et(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var It=window.location.search,zt=new URLSearchParams(It),Tt={url:zt.get("url",""),text:zt.get("text",""),title:zt.get("title","")},Dt="";if(Tt.url)Dt=Tt.url;else if(Tt.text){var Ft=Tt.text.match(/https?:\/\/[^\s]+/gi);Ft&&(Dt=Ft[0])}console.log("URL",Dt),i.a.render(Object(F.jsx)(Rt,{url:Dt,shared:Tt}),document.querySelector("#root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");_t?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Et(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Et(t,e)}))}}()}},[[437,1,2]]]);
//# sourceMappingURL=main.83181538.chunk.js.map