{"version":3,"sources":["components/DarkModeToggle.js","components/UrlBar.js","components/ShareButton.js","components/InfoButton.js","components/DebugButton.js","components/SearchBar.js","components/LogLines.js","components/LogView.js","util/time.js","components/SystemInfo.js","components/BundleView.js","components/NothingLoaded.js","util/remote.js","util/zip.js","util/bundle.js","App.js","hooks/useLocalStorage.js","serviceWorkerRegistration.js","index.js"],"names":["DarkModeToggle","props","useState","darkMode","setDarkMode","Tooltip","title","IconButton","onClick","onChange","color","size","useStyles","makeStyles","theme","grow","flexGrow","url","position","borderRadius","shape","backgroundColor","alpha","palette","common","white","breakpoints","up","marginRight","spacing","marginLeft","urlIcon","padding","height","pointerEvents","display","alignItems","justifyContent","inputRoot","width","inputInput","paddingLeft","transitions","create","UrlBar","classes","setUrl","filename","mode","className","Hidden","lgDown","InputBase","placeholder","root","input","event","target","value","onKeyDown","key","handleUrlChange","defaultValue","inputProps","readOnly","ShareButton","enqueueSnackbar","useSnackbar","shareModalOpen","setShareModalOpen","shareUrl","window","location","origin","pathname","encodeURIComponent","handleClose","Dialog","open","onClose","fullWidth","DialogTitle","DialogContent","TextField","InputProps","onFocus","select","DialogActions","navigator","share","Button","document","clipboard","writeText","InfoButton","infoModalOpen","setInfoModalOpen","Link","href","rel","underline","style","textAlign","src","alt","debugModalOpen","setDebugModalOpen","shared","text","query","transition","result","secondary","fontSize","typography","pxToRem","SearchBar","pos","count","setQuery","inputRef","React","createRef","handlePerform","handlePerformQuery","handleCancel","current","onCancel","SearchStartAdornment","InputAdornment","disabled","SearchEndAdornment","onPrev","onNext","handleQueryChange","startAdornment","endAdornment","LogLines","lines","lineCount","length","queryLower","toLowerCase","scrollTo","listRef","useEffect","scrollToItem","Line","log","pre","margin","down","linewrap","line","content","toString","warning","main","error","info","getStream","charAt","matchesQuery","includes","language","index","split","itemCount","itemSize","overflow","ref","languages","patterns","guessLanguage","pattern","match","console","LogView","trim","map","trimEnd","setScrollTo","cursor","setCursor","indices","setIndices","background","accordionbar","flexWrap","accordiondetails","flexDirection","icon","secondaryHeading","flexBasis","nextResult","c","serialAndDisabled","undervoltage","overheating","throttled","piSupportLines","filter","piSupportDisabled","variant","persist","Accordion","defaultExpanded","expanded","AccordionSummary","expandIcon","id","Typography","heading","millify","AccordionDetails","q","qLower","ind","reduce","a","i","push","utils","diffInSeconds","d1","d2","Math","floor","abs","formatTimeDiff","seconds","factor","unit1","unitn","n","UNRECOMMENDED_MODELS","SystemInfo","l","join","p","InfoField","checkField","func","safemode","marlin_bugfix","unrecommended_model","model","m","arg","endsWith","checkModel","python_too_old","semver","satisfies","pip_too_old","setuptools_too_old","last_safe_mode_date","generation_date","last_safe_mode_date_obj","Date","generation_date_obj","setTime","parse","formattedDiff","timeutils","checkLastSafeMode","list","BundleView","bundle","systeminfo","logs","NothingLoaded","dropzoneText","files","onUpload","filesLimit","acceptedFiles","maxFileSize","showPreviewsInDropzone","showAlerts","fetch","response","ok","Error","status","blob","header","headers","get","contentdispositionutils","parameters","substring","lastIndexOf","name","loadRemote","remoteutils","loadZip","JSZip","loadAsync","zip","file","format","async","loadRemoteZip","containsFile","getFileContents","ziputils","contents","f","startsWith","Object","keys","sort","hasContent","loadBundle","loadLog","defaultBundle","appBar","toolbar","urlbar","order","paddingBottom","offset","mixins","minHeight","container","paddingTop","footer","App","initialValue","item","localStorage","getItem","JSON","storedValue","setStoredValue","valueToStore","Function","setItem","stringify","useLocalStorage","useMediaQuery","noSsr","setFilename","bundleutils","setBundle","setError","loading","setLoading","pallet","darkModeTheme","createTheme","adaptV4Theme","notistackRef","dismissSnack","closeSnackbar","newUrl","updateHistory","replace","corsRewrite","then","handleFileChange","catch","handleError","handleReset","handleZipChange","contentType","contenttypeutils","type","err","windowUrl","URL","searchParams","set","delete","history","replaceState","currentVersion","version","isEnabled","process","isVerboseMode","StyledEngineProvider","injectFirst","ThemeProvider","action","maxSnack","anchorOrigin","vertical","horizontal","dense","preventDuplicate","Main","handleUpload","handleDarkModeToggle","MainView","Alert","severity","AlertTitle","CircularProgress","Navbar","AppBar","Toolbar","mdUp","CssBaseline","Container","maxWidth","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","search","params","URLSearchParams","ReactDOM","render","querySelector","addEventListener","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration"],"mappings":"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","file":"static/js/main.c42d76db.chunk.js","sourcesContent":["import React, { useState } from \"react\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport Tooltip from \"@mui/material/Tooltip\";\nimport DarkModeIcon from \"@mui/icons-material/Brightness4\";\nimport LightModeIcon from \"@mui/icons-material/Brightness7\";\n\nexport default function DarkModeToggle(props) {\n    const [darkMode, setDarkMode] = useState(props.darkMode);\n\n    const handleDarkModeToggle = () => {\n        props.onChange(!darkMode);\n        setDarkMode(!darkMode);\n    };\n\n    return (\n        <Tooltip title=\"Toggle dark mode\">\n            <IconButton onClick={handleDarkModeToggle} color=\"inherit\" size=\"large\">\n                { darkMode ? <LightModeIcon /> : <DarkModeIcon /> }\n            </IconButton>\n        </Tooltip>\n    );\n}","import React, { useState } from \"react\";\n\nimport { alpha } from \"@mui/material/styles\";\n\nimport makeStyles from '@mui/styles/makeStyles';\n\nimport InputBase from \"@mui/material/InputBase\";\nimport Hidden from \"@mui/material/Hidden\";\nimport LinkIcon from \"@mui/icons-material/Link\";\nimport UploadIcon from \"@mui/icons-material/CloudUpload\";\n\nconst useStyles = makeStyles(theme => ({\n    grow: {\n      flexGrow: 1\n    },\n    url: {\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: alpha(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: alpha(theme.palette.common.white, 0.25),\n      },\n      [theme.breakpoints.up('md')]: {\n        marginRight: theme.spacing(2),\n        marginLeft: theme.spacing(2),\n      },\n      flexGrow: 1\n    },\n    urlIcon: {\n      padding: theme.spacing(0, 2),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\"\n    },\n    inputRoot: {\n      color: \"inherit\",\n      width: \"100%\"\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 1),\n      [theme.breakpoints.up('md')]: {\n        paddingLeft: `calc(1em + ${theme.spacing(4)})`,\n      },\n      transition: theme.transitions.create('width'),\n      width: \"100%\",\n    }\n}));\n\n\nexport default function UrlBar(props) {\n    const classes = useStyles();\n\n    const [url, setUrl] = useState(props.url);\n    const [mode] = useState(props.filename ? \"upload\" : \"url\");\n\n    const handleChange = (event) => {\n        if (mode === \"url\") {\n            setUrl(event.target.value);\n        }\n    }\n\n    const handleKeyDown = (event) => {\n        if (mode === \"url\" && event.key === \"Enter\") {\n            props.handleUrlChange(url);\n        }\n    }\n\n    return (\n        <div className={classes.url}>\n            <Hidden lgDown>\n                <div className={classes.urlIcon}>\n                {props.filename ? (\n                    <UploadIcon />\n                ) : (\n                    <LinkIcon />\n                )}\n                </div>\n            </Hidden>\n            <InputBase\n                placeholder=\"URL...\"\n                classes={{\n                    root: classes.inputRoot,\n                    input: classes.inputInput,\n                }}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                defaultValue={(mode === \"upload\" ? props.filename : props.url)}\n                inputProps={{ readOnly: mode === \"upload\", }}\n            />\n        </div>\n    );\n}","import React, { useState } from \"react\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport Tooltip from \"@mui/material/Tooltip\";\n\nimport Button from \"@mui/material/Button\";\nimport TextField from \"@mui/material/TextField\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\n\nimport ShareIcon from \"@mui/icons-material/Share\";\n\nimport { useSnackbar } from \"notistack\";\n\nexport default function ShareButton(props) {\n    const { enqueueSnackbar } = useSnackbar();\n    const [ shareModalOpen, setShareModalOpen ] = useState(false);\n    const shareUrl = window.location.origin + window.location.pathname + \"?url=\" + encodeURIComponent(props.url);\n\n    const handleShareClick = () => {\n        setShareModalOpen(true);\n    }\n\n    const handleShare = () => {\n        if (navigator.share) {\n            navigator.share({\n                title: document.title,\n                url: shareUrl\n            })\n            handleClose();\n        }\n    }\n\n    const handleCopy = () => {\n        if (navigator.clipboard) {\n            navigator.clipboard.writeText(shareUrl);\n            enqueueSnackbar(\"URL copied to clipboard!\");\n            handleClose();\n        }\n    }\n\n    const handleClose = () => {\n        setShareModalOpen(false);\n    }\n\n    if (true) {\n        return <>\n        <Tooltip title=\"Get shareable link\">\n            <IconButton onClick={handleShareClick} color=\"inherit\" size=\"large\">\n                <ShareIcon />\n            </IconButton>\n        </Tooltip>\n\n        <Dialog open={shareModalOpen} onClose={handleClose} fullWidth>\n            <DialogTitle>Shareable link</DialogTitle>\n            <DialogContent>\n                <TextField value={shareUrl} InputProps={{ readOnly: true, }} onFocus={event => {event.target.select()}} fullWidth />\n            </DialogContent>\n            <DialogActions>\n                {(navigator.share) ? \n                    <Button onClick={handleShare}>\n                        Share\n                    </Button>\n                :\n                    (null)\n                }\n                {(navigator.clipboard) ? \n                    <Button onClick={handleCopy}>\n                        Copy\n                    </Button>\n                : \n                    (null)\n                }\n                <Button onClick={handleClose}>\n                    Close\n                </Button>\n            </DialogActions>\n        </Dialog>\n        </>;\n    } else {\n        return (null)\n    }\n}","import React, { useState } from \"react\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport Tooltip from \"@mui/material/Tooltip\";\n\nimport Button from \"@mui/material/Button\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\nimport Link from \"@mui/material/Link\";\n\nimport InfoIcon from \"@mui/icons-material/Info\";\n\nexport default function InfoButton(props) {\n    const [ infoModalOpen, setInfoModalOpen ] = useState(false);\n\n    const handleInfoClick = () => {\n        setInfoModalOpen(true);\n    }\n\n    const handleClose = () => {\n        setInfoModalOpen(false);\n    }\n\n    if (true) {\n        return <>\n        <Tooltip title=\"About Bundle Viewer\">\n            <IconButton onClick={handleInfoClick} color=\"inherit\" size=\"large\">\n                <InfoIcon />\n            </IconButton>\n        </Tooltip>\n\n        <Dialog open={infoModalOpen} onClose={handleClose} fullWidth>\n            <DialogTitle>About Bundle Viewer</DialogTitle>\n            <DialogContent>\n                <p>\n                    Bundle Viewer is a viewer for <Link href=\"https://octoprint.org\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">OctoPrint</Link> system info bundles and log files.\n                </p>\n                <p>\n                    Its source code can be found on <Link href=\"https://github.com/OctoPrint/bundleviewer.octoprint.org\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">github.com/OctoPrint/bundleviewer.octoprint.org</Link>.\n                </p>\n                <hr />\n                <p>\n                    There's an accompanying web extension for Firefox and Chrome to add an \"Open in Bundle Viewer\" context menu to links in the browser on \n                    associated websites:\n                </p>\n                <p style={{textAlign: \"center\"}}>\n                    <Link href=\"https://addons.mozilla.org/en-GB/firefox/addon/open-in-bundle-viewer/\" target=\"_blank\" rel=\"noopener noreferrer\" color=\"inherit\" underline=\"always\"><img src=\"https://img.shields.io/amo/v/open-in-bundle-viewer?label=Firefox%20add-on&logo=firefox\" alt=\"Firefox add-on\" /></Link> <Link href=\"https://chrome.google.com/webstore/detail/open-in-bundle-viewer/pjjocccheogfceldegkfnbfmobmblhpp\" target=\"_blank\" rel=\"noopener noreferrer\" color=\"inherit\" underline=\"always\"><img src=\"https://img.shields.io/chrome-web-store/v/pjjocccheogfceldegkfnbfmobmblhpp?label=Chrome%20extension&logo=google%20chrome\" alt=\"Chrome extension\" /></Link>\n                </p>\n                <p>\n                    Its source code can be found on <Link href=\"https://github.com/OctoPrint/Open-in-Bundle-Viewer\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">github.com/OctoPrint/Open-in-Bundle-Viewer</Link>.\n                </p>\n                <p>\n                    There's also an accompanying <Link href=\"https://community.octoprint.org/t/open-in-bundle-viewer-browser-extension/30275\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">forum thread</Link>.\n                </p>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose}>\n                    Close\n                </Button>\n            </DialogActions>\n        </Dialog>\n        </>;\n    } else {\n        return (null)\n    }\n}","import React, { useState } from \"react\";\n\nimport IconButton from \"@mui/material/IconButton\";\nimport Tooltip from \"@mui/material/Tooltip\";\n\nimport Button from \"@mui/material/Button\";\nimport Dialog from \"@mui/material/Dialog\";\nimport DialogActions from \"@mui/material/DialogActions\";\nimport DialogContent from \"@mui/material/DialogContent\";\nimport DialogTitle from \"@mui/material/DialogTitle\";\n\nimport BugIcon from \"@mui/icons-material/BugReport\";\n\nexport default function InfoButton(props) {\n    const [ debugModalOpen, setDebugModalOpen ] = useState(false);\n\n    const handleDebugClick = () => {\n        setDebugModalOpen(true);\n    }\n\n    const handleClose = () => {\n        setDebugModalOpen(false);\n    }\n\n    if (true) {\n        return <>\n        <Tooltip title=\"Debug Bundle Viewer\">\n            <IconButton onClick={handleDebugClick} color=\"inherit\" size=\"large\">\n                <BugIcon />\n            </IconButton>\n        </Tooltip>\n\n        <Dialog open={debugModalOpen} onClose={handleClose} fullWidth>\n            <DialogTitle>Debug info</DialogTitle>\n            <DialogContent>\n                <dl>\n                    <dt>shared.text</dt>\n                    <dd>{props.shared.text}</dd>\n                    <dt>shared.url</dt>\n                    <dd>{props.shared.url}</dd>\n                    <dt>shared.title</dt>\n                    <dd>{props.shared.title}</dd>\n                    <dt>url</dt>\n                    <dd>{props.url}</dd>\n                </dl>\n            </DialogContent>\n            <DialogActions>\n                <Button onClick={handleClose}>\n                    Close\n                </Button>\n            </DialogActions>\n        </Dialog>\n        </>;\n    } else {\n        return (null)\n    }\n}","import React, { useState } from \"react\";\n\nimport { alpha } from \"@mui/material/styles\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport SearchIcon from \"@mui/icons-material/Search\";\nimport PrevIcon from \"@mui/icons-material/ExpandLess\";\nimport NextIcon from \"@mui/icons-material/ExpandMore\";\nimport CancelIcon from \"@mui/icons-material/Clear\";\nimport InputBase from \"@mui/material/InputBase\";\nimport IconButton from \"@mui/material/IconButton\";\nimport InputAdornment from \"@mui/material/InputAdornment\";\n\nconst useStyles = makeStyles(theme => ({\n    grow: {\n      flexGrow: 1\n    },\n    query: {\n      position: 'relative',\n      borderRadius: theme.shape.borderRadius,\n      backgroundColor: alpha(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: alpha(theme.palette.common.white, 0.25),\n      },\n      [theme.breakpoints.up('md')]: {\n        marginRight: theme.spacing(2),\n        marginLeft: theme.spacing(2),\n      },\n      flexGrow: 1,\n      marginTop: theme.spacing(2),\n      marginBottom: theme.spacing(2),\n    },\n    inputRoot: {\n      color: \"inherit\",\n      width: \"100%\"\n    },\n    inputInput: {\n      padding: theme.spacing(1),\n      transition: theme.transitions.create('width'),\n      width: \"100%\",\n    },\n    result: {\n      color: theme.palette.secondary,\n      fontSize: theme.typography.pxToRem(12),\n    }\n}));\n\n\nexport default function SearchBar(props) {\n    const pos = props.pos;\n    const count = props.count;\n\n    const classes = useStyles();\n\n    const [query, setQuery] = useState(props.query);\n\n    const inputRef = React.createRef();\n\n    const handleChange = (event) => {\n        setQuery(event.target.value);\n        if (props.handleQueryChange) {\n          props.handleQueryChange(query);\n        }\n    }\n\n    const handleKeyDown = (event) => {\n        if (event.key === \"Enter\") {\n          handlePerform();\n        }\n    }\n\n    const handlePerform = () => {\n      if (props.handlePerformQuery) {\n        props.handlePerformQuery(query);\n      }\n    }\n\n    const handleCancel = () => {\n      setQuery(\"\");\n      inputRef.current.value = \"\";\n      if (props.onCancel) {\n        props.onCancel();\n      }\n    }\n\n    const SearchStartAdornment = () => (\n      <InputAdornment position=\"start\">\n        <IconButton onClick={handlePerform} disabled={query === \"\"} size=\"small\"><SearchIcon /></IconButton>\n      </InputAdornment>\n    )\n\n    const SearchEndAdornment = () => (\n      <InputAdornment position=\"end\">\n        {count ? <span className={classes.result}>{pos} / {count}</span> : (null)}\n        <IconButton onClick={props.onPrev} disabled={count === 0 || pos <= 1} size=\"small\"><PrevIcon /></IconButton>\n        <IconButton onClick={props.onNext} disabled={count === 0 || pos >= count} size=\"small\"><NextIcon /></IconButton>\n        <IconButton onClick={handleCancel} disabled={query === \"\"} size=\"small\"><CancelIcon /></IconButton>\n      </InputAdornment>\n    )\n\n    return (\n        <div className={classes.query}>\n            <InputBase\n                placeholder=\"Search...\"\n                classes={{\n                    root: classes.inputRoot,\n                    input: classes.inputInput,\n                }}\n                onChange={handleChange}\n                onKeyDown={handleKeyDown}\n                defaultValue={props.query}\n                startAdornment={<SearchStartAdornment />}\n                endAdornment={<SearchEndAdornment />}\n                inputRef={inputRef}\n            />\n        </div>\n    )\n}","import React, { useEffect } from \"react\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport { FixedSizeList } from \"react-window\";\n\nexport default function LogLines(props) {\n    const lines = props.lines;\n    const lineCount = lines.length;\n    const query = props.query;\n    const queryLower = query.toLowerCase();\n    const scrollTo = props.scrollTo;\n\n    const listRef = React.createRef();\n    useEffect(() => {\n        if (scrollTo > -1) {\n            listRef.current?.scrollToItem(scrollTo, \"center\");\n        }\n    }, [listRef, scrollTo]);\n\n    const classes = makeStyles(theme => ({\n        log: {\n            flexGrow: 1,\n        },\n        pre: {\n            margin: 0,\n            \"font-family\": \"'JetBrains Mono', 'Droid Sans Mono', monospace\",\n            [theme.breakpoints.down('lg')]: {\n                fontSize: theme.typography.pxToRem(12),\n            }\n        },\n        linewrap: {\n            \"&[data-matched=\\\"true\\\"]\": {\n                \"background-color\": \"rgba(255, 255, 0, .2)\"\n            }\n        },\n        line: {\n            paddingLeft: theme.spacing(1),\n            \"&::before\": {\n                content: \"attr(data-linenumber)\",\n                display: \"inline-block\",\n                width: `${lineCount.toString().length}ch`,\n                \"text-align\": \"right\",\n                \"margin-right\": \"1em\",\n                \"color\": theme.palette.text.disabled\n            },\n            \"&[data-loglevel=\\\"DEBUG\\\"]\": {\n                \"color\": theme.palette.text.secondary\n            },\n            \"&[data-loglevel=\\\"WARNING\\\"]\": {\n                \"color\": theme.palette.warning.main\n            },\n            \"&[data-loglevel=\\\"ERROR\\\"]\": {\n                \"color\": theme.palette.error.main\n            },\n            \"&[data-stream=\\\"stdin\\\"]\": {\n                \"color\": theme.palette.info.main\n            },\n            \"&[data-stream=\\\"stderr\\\"]\": {\n                \"color\": theme.palette.error.main\n            },\n            \"&[data-updateresult=\\\"FAILED\\\"]\": {\n                \"color\": theme.palette.error.main\n            },\n        },\n    }))();\n\n    const getLoglevel = (line) => {\n        let parts = line.split(\" \");\n        return parts[5];\n    }\n\n    const getStream = (line) => {\n        const prefix = line.charAt(24);\n        switch (prefix) {\n            case \" \": return \"stdin\";\n            case \">\": return \"stdout\";\n            case \"!\": return \"stderr\";\n            default: return \"plain\";\n        }\n    }\n\n    const getUpdateResult = (line) => {\n        if (line.includes(\"- FAILED -\")) {\n            return \"FAILED\";\n        } else if (line.includes(\"- SUCCESS -\")) {\n            return \"SUCCESS\";\n        } else {\n            return \"PLAIN\";\n        }\n    }\n\n    const matchesQuery = (line) => {\n        return query && line && line.toLowerCase().includes(queryLower);\n    }\n\n    const LogLine = ({ index, style }) => (\n        <span data-matched={matchesQuery(lines[index])} style={style} className={classes.linewrap}><span data-linenumber={index + 1} data-loglevel={getLoglevel(lines[index])} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    const CliLine = ({ index, style }) => (\n        <span data-matched={matchesQuery(lines[index])} style={style} className={classes.linewrap}><span data-linenumber={index + 1} data-stream={getStream(lines[index])} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    const UpdatelogLine = ({ index, style }) => (\n        <span data-matched={matchesQuery(lines[index])} style={style} className={classes.linewrap}><span data-linenumber={index + 1} data-updateresult={getUpdateResult(lines[index])} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    const PlainLine = ({ index, style }) => (\n        <span data-matched={matchesQuery(lines[index])} style={style} className={classes.linewrap}><span data-linenumber={index + 1} className={classes.line}>{lines[index]}</span></span>\n    );\n\n    let Line;\n    switch (props.language) {\n        case \"log\": {\n            Line = LogLine;\n            break;\n        }\n        case \"cli\": {\n            Line = CliLine;\n            break;\n        }\n        case \"updatelog\": {\n            Line = UpdatelogLine;\n            break;\n        }\n        default: {\n            Line = PlainLine;\n            break;\n        }\n    }\n\n    return (\n        <code className={classes.log}>\n            <pre className={classes.pre}>\n                <FixedSizeList \n                    height={500}\n                    itemCount={lineCount}\n                    itemSize={20}\n                    style={{overflow: \"scroll\"}}\n                    ref={listRef}\n                >\n                    {Line}\n                </FixedSizeList>\n            </pre>\n        </code>\n    )\n};","import React, { useState } from \"react\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport Typography from \"@mui/material/Typography\";\nimport SearchBar from \"./SearchBar\";\nimport LogLines from \"./LogLines\";\n\nimport ErrorIcon from \"mdi-react/ErrorIcon\";\nimport ThrottledIcon from \"mdi-react/SpeedometerSlowIcon\";\n\nimport { useSnackbar } from \"notistack\";\n\nimport millify from \"millify\";\n\nconst languages = [\n    { language: \"cli\", patterns: [/^.*_console.*\\.log$/]},\n    { language: \"updatelog\", patterns: [/^.*_update\\.log$/] },\n    { language: \"log\", patterns: [/^.*\\.log$/] },\n]\n\nconst guessLanguage = (filename) => {\n    for (const { language, patterns } of languages) {\n        for (const pattern of patterns) {\n            if (filename.match(pattern)) {\n                console.log(`Match! ${pattern} vs ${filename}`)\n                return language;\n            }\n        }\n    }\n    return \"plain\";\n}\n\nexport default function LogView(props) {\n    const { enqueueSnackbar } = useSnackbar();\n\n    const log = props.log;\n    const content = props.content;\n    const lines = content.trim().split(\"\\n\").map((line) => (line.trimEnd() + \"\\n\"));\n    const lineCount = lines.length;\n\n    const [query, setQuery] = useState(\"\");\n    const [scrollTo, setScrollTo] = useState(0);\n\n    const [cursor, setCursor] = useState(0);\n    const [indices, setIndices] = useState([]);\n\n    const classes = makeStyles(theme => ({\n        background: {\n        },\n        accordionbar: {\n            display: \"flex\",\n            flexGrow: 1,\n            alignItems: \"center\",\n            [theme.breakpoints.down('lg')]: {\n                flexWrap: \"wrap\",\n            },\n        },\n        accordiondetails: {\n            display: \"flex\",\n            flexGrow: 1,\n            flexDirection: \"column\"\n        },\n        grow: {\n            flexGrow: 1,\n        },\n        icon: {\n            padding: theme.spacing(0, 1),\n            fontSize: \"1.5rem\",\n        },\n        secondaryHeading: {\n            fontSize: theme.typography.pxToRem(12),\n            color: theme.palette.text.secondary,\n            padding: theme.spacing(0, 1),\n            textAlign: \"right\",\n            [theme.breakpoints.down('lg')]: {\n                textAlign: \"left\",\n                padding: theme.spacing(0, 0),\n            },\n        },\n        title: {\n            flexGrow: 1,\n            alignItems: \"center\",\n            [theme.breakpoints.down('lg')]: {\n                flexBasis: \"100%\"\n            }\n        },\n        info: {\n            [theme.breakpoints.down('lg')]: {\n                flexBasis: \"100%\"\n            }\n        }\n    }))();\n\n    const onCancelQuery = () => {\n        setIndices([]);\n        setCursor(0);\n        setQuery(\"\");\n    }\n\n    const onPerformQuery = (q) => {\n        if (!q) return;\n\n        console.log(\"Starting query:\", q);\n        if (q !== query) {\n            console.log(\"... calculate matches\");\n            const qLower = q.toLowerCase();\n            const ind = lines.reduce((a, c, i) => {\n                if (c.toLowerCase().includes(qLower)) {\n                    a.push(i);\n                }\n                return a;\n            }, []);\n\n            if (ind.length) {\n                setScrollTo(ind[0]);\n            }\n\n            setIndices(ind);\n            setCursor(0);\n            setQuery(q);\n            console.log(\"Indices:\", ind, \", cursor:\", 0);\n        } else {\n            nextResult();\n        }\n    }\n\n    const nextResult = () => {\n        if (indices.length) {\n            const c = cursor < indices.length - 1 ? cursor + 1 : 0;\n            setScrollTo(indices[c]);\n            setCursor(c);\n        }\n    };\n    const previousResult = () => {\n        if (indices.length) {\n            const c = cursor > 0 ? (cursor - 1) : (indices.length - 1);\n            setScrollTo(indices[c]);\n            setCursor(c);\n        }\n    };\n\n    const serialAndDisabled = (log === \"serial.log\" && lineCount === 1 && lines[0].includes(\"serial.log is currently not enabled\"));\n    const undervoltage = content.includes(\"!!! UNDERVOLTAGE REPORTED !!!\");\n    const overheating = content.includes(\"!!! FREQUENCY CAPPING DUE TO OVERHEATING REPORTED !!!\");\n    const throttled = undervoltage || overheating;\n\n    const piSupportLines = lines.filter(line => line.includes(\"|  Pi Support Plugin\") || line.includes(\"| !Pi Support Plugin\"));\n    const piSupportDisabled = piSupportLines.length && piSupportLines[piSupportLines.length - 1].includes(\"| !Pi Support Plugin\");\n\n    if (serialAndDisabled) {\n        enqueueSnackbar(\"Serial log is currently not enabled. Should be enabled when reporting issues with the printer.\", { variant: \"info\" });\n    }\n    if (piSupportDisabled) {\n        enqueueSnackbar(\"Pi Support Plugin disabled in the log, there might be an undetected undervoltage or overheating situation!\", { variant: \"error\", persist: true, key: \"pi_support_disabled\" });\n    }\n    if (throttled) {\n        enqueueSnackbar(\"System is or was throttled, system may behave erratically. Fix before further debugging.\", { variant: \"error\", persist: true, key: \"throttled\" });\n    }\n\n    return (\n        <Accordion key={log} defaultExpanded={props.expanded}>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />} aria-controls={\"panel-log-\" + props.index + \"-content\"} id={\"panel-log-\" + props.index + \"-header\"}>\n                <div className={classes.accordionbar}>\n                    <div className={classes.title}>\n                        <Typography className={classes.heading} style={{ display: \"flex\", alignItems: \"center\" }}>\n                            {log}\n                            {throttled ? <ThrottledIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                            {serialAndDisabled ? <ErrorIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                        </Typography>\n                    </div>\n                    <div className={classes.info}>\n                        <Typography className={classes.secondaryHeading}>\n                            {millify(content.length) + \" \" + (content.length === 1 ? \"char\" : \"chars\")}\n                        </Typography>\n                        <Typography className={classes.secondaryHeading}>\n                            {millify(lineCount) + \" \" + (lineCount === 1 ? \"line\" : \"lines\")}\n                        </Typography>\n                    </div>\n                </div>\n            </AccordionSummary>\n            <AccordionDetails className={classes.accordiondetails}>\n                <SearchBar \n                    className={classes.grow} \n                    pos={cursor + 1} \n                    count={indices.length} \n                    onNext={nextResult} \n                    onPrev={previousResult} \n                    onCancel={onCancelQuery}\n                    handlePerformQuery={onPerformQuery} \n                />\n                <LogLines lines={lines} query={query} scrollTo={scrollTo} language={props.language || guessLanguage(log)} />\n            </AccordionDetails>\n        </Accordion>\n    )\n}","\nfunction diffInSeconds(d1, d2) {\n    return Math.floor(Math.abs(d1 - d2) / 1000);\n}\n\nfunction formatTimeDiff(seconds) {\n    const conversion = [\n        { factor: 60 * 60 * 24 * 365, unit1: \"year\", unitn: \"years\" },\n        { factor: 60 * 60 * 24 * 30, unit1: \"month\", unitn: \"months\" },\n        { factor: 60 * 60 * 24 * 7, unit1: \"week\", unitn: \"weeks\" },\n        { factor: 60 * 60 * 24, unit1: \"day\", unitn: \"days\" },\n        { factor: 60 * 60, unit1: \"hour\", unitn: \"hours\" },\n        { factor: 60, unit1: \"minute\", unitn: \"minutes\" },\n    ]\n\n    for (const c of conversion) {\n        const n = Math.floor(seconds / c.factor);\n        if (n > 0) {\n            return n + \" \" + (n === 1 ? c.unit1 : c.unitn);\n        }\n    }\n    return seconds + \" \" + (seconds === 1 ? \"second\" : \"seconds\");\n}\n\nconst utils = {\n    diffInSeconds: diffInSeconds,\n    formatTimeDiff: formatTimeDiff\n}\nexport default utils;","import React from \"react\";\n\nimport Accordion from \"@mui/material/Accordion\";\nimport AccordionSummary from \"@mui/material/AccordionSummary\";\nimport AccordionDetails from \"@mui/material/AccordionDetails\";\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\nimport Typography from \"@mui/material/Typography\";\n\nimport ThrottledIcon from \"mdi-react/SpeedometerSlowIcon\";\nimport BugfixIcon from \"mdi-react/BugCheckIcon\";\nimport SafeModeIcon from \"mdi-react/LockCheckIcon\";\n\nimport { useSnackbar } from \"notistack\";\n\nimport makeStyles from '@mui/styles/makeStyles';\n\nimport semver from \"semver\";\n\nimport timeutils from \"../util/time\";\n\nconst UNRECOMMENDED_MODELS = [\"Zero\", \"Zero W\"]\n\nconst useStyles = makeStyles((theme) => ({\n    accordionbar: {\n        display: \"flex\",\n        flexGrow: 1,\n        alignItems: \"center\",\n        [theme.breakpoints.down('lg')]: {\n            flexWrap: \"wrap\",\n        },\n    },\n    grow: {\n        flexGrow: 1,\n    },\n    icon: {\n        padding: theme.spacing(0, 1),\n        fontSize: \"1.5rem\",\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(12),\n        color: theme.palette.text.secondary,\n        padding: theme.spacing(0, 1),\n        textAlign: \"right\",\n        [theme.breakpoints.down('lg')]: {\n            textAlign: \"left\",\n            padding: theme.spacing(0, 0),\n        },\n    },\n    title: {\n        flexGrow: 1,\n        alignItems: \"center\",\n        [theme.breakpoints.down('lg')]: {\n            flexBasis: \"100%\"\n        }\n    },\n    info: {\n        [theme.breakpoints.down('lg')]: {\n            flexBasis: \"100%\"\n        }\n    }\n}));\n\nexport default function SystemInfo(props) {\n    const { enqueueSnackbar } = useSnackbar();\n\n    const lines = props.info.split(\"\\n\").filter(l => l.trim() !== \"\").map(l => {\n        const [key, ...value] = l.split(\":\");\n        return { key: key, value: value.join(\":\") }\n    });\n\n    const info = {};\n    for (const p of lines) {\n        info[p.key] = p.value;\n    }\n\n    const classes = useStyles();\n\n    const InfoField = (title, key) => {\n        const value = info[key];\n\n        if (value) {\n            return (\n                <Typography className={classes.secondaryHeading}>{title + \" \" + value}</Typography>\n            );\n        } else {\n            return (null);\n        }\n    }\n\n    const checkField = (key, func) => {\n        return (info[key] && func(info[key]));\n    }\n    const checkModel = (model) => {\n        model = model.toLowerCase();\n        for (const arg of UNRECOMMENDED_MODELS.map(m => m.toLowerCase())) {\n            if (model.includes(`${arg} rev`) || model.endsWith(arg)) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    const checkLastSafeMode = () => {\n        const last_safe_mode_date = info[\"octoprint.last_safe_mode.date\"];\n        const generation_date = info[\"systeminfo.generated\"];\n\n        if (!last_safe_mode_date || !generation_date) {\n            return;\n        }\n\n        if (last_safe_mode_date === \"unknown\") {\n            enqueueSnackbar(\"Last start in safe mode is unknown.\", { key: \"last_safe_mode\", variant: \"warning\", persist: true });\n            return;\n        }\n\n        const last_safe_mode_date_obj = new Date();\n        const generation_date_obj = new Date();\n\n        last_safe_mode_date_obj.setTime(Date.parse(last_safe_mode_date.trim()));\n        generation_date_obj.setTime(Date.parse(generation_date.trim()));\n\n        const formattedDiff = timeutils.formatTimeDiff(timeutils.diffInSeconds(last_safe_mode_date_obj, generation_date_obj));\n\n        enqueueSnackbar(`Last start in safe mode was ${formattedDiff} before bundle creation.`, { key: \"last_safe_mode\", variant: \"info\", persist: true });\n    }\n\n    const safemode = checkField(\"octoprint.safe_mode\", value => (value === \"true\"));\n    const throttled = checkField(\"env.plugins.pi_support.throttle_state\", value => (value.trim() !== \"0x0\"));\n    const marlin_bugfix = checkField(\"printer.firmware\", value => (value.includes(\"Marlin bugfix-\")));\n    const unrecommended_model = checkField(\"env.plugins.pi_support.model\", value => (checkModel(value)));\n    const python_too_old = checkField(\"env.python.version\", value => (!semver.satisfies(value, \">=2.7.13 <3 || >=3.6\")));\n    const pip_too_old = checkField(\"env.python.pip\", value => (!semver.satisfies(value, \">=19.0.1\")));\n    const setuptools_too_old = checkField(\"env.python.setuptools\", value => (!semver.satisfies(value, \">=40.7.1\")));\n\n    if (safemode) {\n        enqueueSnackbar(\"Safe mode enabled.\", { key: \"safemode\" });\n    }\n    if (throttled) {\n        enqueueSnackbar(\"System is or was throttled, system may behave erratically. Fix before further debugging.\", { variant: \"error\", persist: true, key: \"throttled\" });\n    }\n    if (marlin_bugfix) {\n        enqueueSnackbar(\"Marlin-Bugfix firmware development build detected, firmware may be unstable.\", { key: \"marlin_bugfix\" });\n    }\n    if (unrecommended_model) {\n        enqueueSnackbar(\"Unrecommended Raspberry Pi model detected.\", { key: \"unrecommended_model\", variant: \"error\", persist: true });\n    }\n    if (python_too_old) {\n        enqueueSnackbar(\"Python version is too old for automatic updating.\", { key: \"python_too_old\", variant: \"error\", persist: true });\n    }\n    if (pip_too_old) {\n        enqueueSnackbar(\"Pip version is too old for automatic updating.\", { key: \"pip_too_old\", variant: \"error\", persist: true });\n    }\n    if (setuptools_too_old) {\n        enqueueSnackbar(\"Setuptools version is too old for automatic updating.\", { key: \"setuptools_too_old\", variant: \"error\", persist: true });\n    }\n    checkLastSafeMode();\n\n    return (\n        <Accordion defaultExpanded>\n            <AccordionSummary expandIcon={<ExpandMoreIcon />} aria-controls=\"panel-sysinfo-content\" id=\"panel-sysinfo-header\">\n                <div className={classes.accordionbar}>\n                    <div className={classes.title}>\n                        <Typography className={classes.heading} style={{ display: \"flex\", alignItems: \"center\" }}>\n                            System Information\n                            {safemode ? <SafeModeIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                            {throttled ? <ThrottledIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                            {marlin_bugfix ? <BugfixIcon className={classes.icon} size=\"1.5em\" /> : (null)}\n                        </Typography>\n                    </div>\n                    <div className={classes.info}>\n                        {InfoField(\"OctoPrint\", \"octoprint.version\")}\n                        {InfoField(\"Python\", \"env.python.version\")}\n                        {InfoField(\"OctoPi\", \"env.plugins.pi_support.octopi_version\")}\n                        {InfoField(\"Firmware\", \"printer.firmware\")}\n                    </div>\n                </div>\n            </AccordionSummary>\n\n            <AccordionDetails>\n                <div className={classes.list}>\n                {lines.map((line, index) => (\n                    <div key={line.key}>\n                        <strong>{line.key}</strong>: {line.value}\n                    </div>\n                ))}\n                </div>\n            </AccordionDetails>\n        </Accordion>\n    )\n}","import React from \"react\";\n\nimport LogView from \"./LogView\";\nimport SystemInfo from \"./SystemInfo\";\n\nexport default function BundleView(props) {\n    return (\n      <>\n            { props.bundle.systeminfo ? <SystemInfo info={props.bundle.systeminfo} /> : (null)}\n            {props.bundle.logs.map((log, index) => (\n                <LogView key={\"log-\" + index} expanded={ !props.bundle.systeminfo && index === 0 } log={log.log} content={log.content} index={index} />\n            ))}\n      </>\n    )\n}","import React from \"react\";\n\nimport { DropzoneArea } from \"material-ui-dropzone\";\n\nexport default function NothingLoaded(props) {\n    console.log(\"Rendering NothingChanged...\");\n\n    const handleChange = (files) => {\n        console.log(\"Entered NothingLoaded.handleChange...\");\n        if (files.length > 0) {\n            console.log(\"File:\", files[0]);\n            props.onUpload(files[0]);\n        }\n        console.log(\"Exiting NothingLoaded.handleChange...\");\n    };\n\n    return (\n        <div style={{ display: \"flex\", justifyContent: \"center\", flexDirection: \"column\" }}>\n            <DropzoneArea\n                style={{\"flex-basis\": \"100%\"}}\n                dropzoneText=\"Enter an URL above and press Enter, or drag and drop a file here or click to upload one\"\n                onChange={handleChange}\n                filesLimit={1} \n                acceptedFiles={[\".zip\", \".log\", \".txt\"]}\n                maxFileSize={30000000}\n                showPreviewsInDropzone={false}\n                showAlerts={false}\n                />\n        </div>\n    )\n}","import contentdispositionutils from \"content-disposition\";\n\nasync function loadRemote(url) {\n    const response = await fetch(url, {mode: 'cors',});\n    if (!response.ok) {\n        throw new Error(`Could not load file from ${url}: ${response.status}`);\n    }\n    const blob = await response.blob();\n\n    let filename;\n    const header = response.headers.get(\"content-disposition\");\n    if (header) {\n        filename = contentdispositionutils.parse(header).parameters?.filename || \"unknown\";\n    } else {\n        filename = url.substring(url.lastIndexOf(\"/\") + 1);\n    }\n    blob.name = filename;\n    \n    return blob;\n}\n\nconst utils = {\n    loadRemote: loadRemote\n}\nexport default utils;","import JSZip from \"jszip\";\nimport remoteutils from \"./remote\"\n\nasync function loadRemoteZip(url) {\n    const { blob } = await remoteutils.loadRemote(url);\n    return await loadZip(blob);\n}\n\nasync function loadZip(blob) {\n    return await JSZip.loadAsync(blob);\n}\n\nasync function containsFile(zip, filename) {\n    return (await zip.file(filename)) !== null;\n}\n\nasync function getFileContents(zip, filename, format) {\n    format = format || \"blob\";\n    return await zip.file(filename).async(format);\n}\n\nconst utils = {\n    loadZip: loadZip,\n    loadRemoteZip: loadRemoteZip,\n    containsFile: containsFile,\n    getFileContents: getFileContents\n}\n\nexport default utils;","import ziputils from \"./zip\";\n\nasync function loadBundle(zip) {\n    const files = [\"octoprint.log\", \"serial.log\", \"terminal.txt\", \"plugin_softwareupdate_console.log\", \"plugin_pluginmanager_console.log\"];\n\n    let systeminfo = false;\n    try {\n        systeminfo = await ziputils.getFileContents(zip, \"systeminfo.txt\", \"string\");\n    } catch(error) {\n        console.log(\"Could not read systeminfo.txt from zip, probably not a bundle...\");\n    }\n\n    const contents = {};\n    for (const f of zip.file(/\\.(log|txt|gcode|gco|g)$/i)) {\n        if (f.name.startsWith(\".\") || f.name.startsWith(\"__\") || f.name === \"systeminfo.txt\") continue;\n        try {\n            contents[f.name] = await f.async(\"string\");\n        } catch(error) {\n            console.log(`Could not read {f.name} from zip...`);\n        }\n    }\n\n    const logs = [];\n    for (const filename of files) {\n        if (contents[filename]) {\n            logs.push({ log: filename, content: contents[filename] });\n        }\n    }\n    for (const filename of Object.keys(contents).sort()) {\n        if (!files.includes(filename)) {\n            logs.push({ log: filename, content: contents[filename] });\n        }\n    }\n\n    return {\n        hasContent: true,\n        systeminfo: systeminfo,\n        logs: logs\n    };\n}\n\nasync function loadLog(blob) {\n    return {\n        hasContent: true,\n        logs: [\n            { log: blob.name || \"unknown\", content: await blob.text() }\n        ]\n    }\n}\n\n\nconst defaultBundle = {\n    hasContent: false,\n    systeminfo: \"\",\n    logs: []\n};\n\nconst utils = {\n    loadBundle: loadBundle,\n    loadLog: loadLog,\n    defaultBundle: defaultBundle\n}\n\nexport default utils;\n","import React, { useState, useEffect } from \"react\";\n\nimport useMediaQuery from \"@mui/material/useMediaQuery\";\nimport { adaptV4Theme } from \"@mui/material/styles\";\nimport makeStyles from '@mui/styles/makeStyles';\nimport { createTheme, ThemeProvider, StyledEngineProvider } from \"@mui/material/styles\";\nimport { CssBaseline } from \"@mui/material\";\nimport AppBar from \"@mui/material/AppBar\";\nimport Toolbar from \"@mui/material/Toolbar\";\nimport Container from \"@mui/material/Container\";\nimport Button from \"@mui/material/Button\";\nimport IconButton from \"@mui/material/IconButton\";\nimport Hidden from \"@mui/material/Hidden\";\nimport HomeIcon from \"@mui/icons-material/Home\";\nimport { Alert, AlertTitle } from '@mui/material';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Link from \"@mui/material/Link\";\n\nimport { SnackbarProvider } from \"notistack\";\n\nimport CacheBuster from \"react-cache-buster\";\nimport { version } from \"../package.json\";\n\nimport DarkModeToggle from \"./components/DarkModeToggle\";\nimport UrlBar from \"./components/UrlBar\";\nimport ShareButton from \"./components/ShareButton\";\nimport InfoButton from \"./components/InfoButton\";\nimport DebugButton from \"./components/DebugButton\";\nimport BundleView from \"./components/BundleView\";\nimport NothingLoaded from \"./components/NothingLoaded\";\n\nimport useLocalStorage from \"./hooks/useLocalStorage\";\n\nimport remoteutils from \"./util/remote\";\nimport ziputils from \"./util/zip\";\nimport bundleutils from \"./util/bundle\";\nimport contenttypeutils from \"content-type\";\n\nconst useStyles = makeStyles(theme => ({\n    root: {\n        display: \"flex\",\n        overflow: \"auto\"\n    },\n    grow: {\n      flexGrow: 1\n    },\n\n    appBar: {\n    },\n    toolbar: {\n      [theme.breakpoints.down('lg')]: {\n        \"justify-content\": \"flex-end\",\n        \"flex-wrap\": \"wrap\",\n      }\n    },\n    urlbar: {\n      flexGrow: 1,\n      [theme.breakpoints.down('lg')]: {\n        \"flex-basis\": \"100%\",\n        order: 99,\n        paddingBottom: theme.spacing(2)\n      },\n    },\n    title: {\n      \"justify-item\": \"left\",\n    },\n\n    offset: theme.mixins.toolbar,\n\n    content: {\n      flexGrow: 1,\n      overflow: \"auto\",\n      \"padding-top\": theme.mixins.toolbar.minHeight,\n      [theme.breakpoints.down('lg')]: {\n        \"padding-top\": theme.mixins.toolbar.minHeight * 2,\n      }\n    },\n    container: {\n      minHeight: \"100%\", \n      display: \"flex\", \n      flexDirection: \"column\",\n      paddingTop: theme.spacing(4),\n      [theme.breakpoints.down('lg')]: {\n        paddingTop: 0,\n      },\n      paddingBottom: theme.spacing(4)\n    },\n    footer: {\n      textAlign: \"center\",\n      padding: \"1em\",\n    }\n}));\n\nfunction corsRewrite(url) {\n  const githubRegex = /^https:\\/\\/github\\.com\\/[a-zA-Z0-9_-]+\\/[a-zA-Z0-9_-]+\\/files\\//\n  const forumRegex = /^https:\\/\\/community\\.octoprint\\.org\\/uploads\\/short-url\\//\n  if (url.match(githubRegex)) {\n      return url.replace(\"https://github.com\", \"https://bundleviewer.octoprint.org/bundles\");\n  } else if (url.match(forumRegex)) {\n      return url.replace(\"https://community.octoprint.org/uploads/short-url\", \"https://bundleviewer.octoprint.org/bundles/forum\");\n  }\n  return url;\n}\n\nexport default function App(props) {\n    const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)', { noSsr: true });\n    const [darkMode, setDarkMode] = useLocalStorage(\"enableDarkMode\", prefersDarkMode);\n\n    const [url, setUrl] = useState(props.url);\n    const [filename, setFilename] = useState(\"\");\n  \n    const [bundle, setBundle] = useState(bundleutils.defaultBundle);\n    const [error, setError] = useState(false);\n    const [loading, setLoading] = useState(false);\n\n    const pallet = darkMode ? \"dark\" : \"light\";\n    const darkModeTheme = createTheme(adaptV4Theme({\n        palette: {\n            mode: pallet\n        }\n    }));\n\n    const isProduction = process.env.NODE_ENV === \"production\";\n\n    const handleDarkModeToggle = () => {\n        setDarkMode(!darkMode);\n    }\n\n    useEffect(() => {\n      handleUrlChange(props.url);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const notistackRef = React.createRef();\n    const dismissSnack = (key) => () => {\n      notistackRef.current.closeSnackbar(key);\n    }\n\n    const handleUrlChange = (newUrl) => {\n      if (!newUrl) {\n        handleReset();\n      } else {\n        setError(false);\n        setLoading(true);\n  \n        setUrl(newUrl);\n        updateHistory(newUrl);\n        setFilename(\"\");\n  \n        const url = corsRewrite(newUrl);\n\n        remoteutils.loadRemote(url).then(handleFileChange).catch(handleError);\n      }\n    }\n\n    const handleUpload = (blob) => {\n      setError(false);\n      setLoading(true);\n\n      setFilename(blob.name);\n      setUrl(\"\");\n\n      handleFileChange(blob);\n    }\n\n    const handleFileChange = (blob) => {\n      ziputils.loadZip(blob)\n        .then(handleZipChange)\n        .catch((error) => {\n          let contentType;\n          try {\n            contentType = contenttypeutils.parse(blob.type).type;\n          } catch (err) {\n            contentType = \"\";\n          }\n\n          if (contentType === \"\" || contentType.startsWith(\"text/\")) {\n            bundleutils.loadLog(blob).then((bundle) => {\n              setBundle(bundle);\n              setLoading(false);\n            }).catch(handleError);\n          } else {\n            handleError(error);\n          }\n        })\n    }\n\n    const handleZipChange = (zip) => {\n      bundleutils.loadBundle(zip).then((bundle) => {\n        setBundle(bundle);\n        setLoading(false);\n        console.log(\"Loading complete\");\n      }).catch(handleError);\n    }\n\n    const handleError = (error) => {\n      console.log(error);\n      setError(true);\n    }\n\n    const handleReset = () => {\n      setUrl(\"\");\n      setFilename(\"\");\n      setError(false);\n      setLoading(false);\n      setBundle(bundleutils.defaultBundle);\n      updateHistory();\n      if (notistackRef.current) notistackRef.current.closeSnackbar();\n    }\n\n    const updateHistory = (newUrl) => {\n      const windowUrl = new URL(window.location);\n      if (newUrl) {\n        windowUrl.searchParams.set(\"url\", newUrl);\n      } else {\n        windowUrl.searchParams.delete(\"url\");\n      }\n      window.history.replaceState({}, '', windowUrl);\n    }\n\n    return (\n      <CacheBuster currentVersion={version} isEnabled={isProduction} isVerboseMode={true}>\n        <StyledEngineProvider injectFirst>\n          <ThemeProvider theme={darkModeTheme}>\n            <SnackbarProvider\n              ref={notistackRef}\n              action={(key) => (\n                <Button onClick={dismissSnack(key)}>\n                  Close\n                </Button>\n              )}\n              maxSnack={10}\n              anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n              }}\n              dense\n              preventDuplicate>\n              <Main \n                bundle={bundle}\n                url={url}\n                filename={filename}\n                error={error}\n                loading={loading}\n                shared={props.shared}\n                handleUpload={handleUpload}\n                handleReset={handleReset}\n                handleUrlChange={handleUrlChange}\n                darkMode={darkMode}\n                handleDarkModeToggle={handleDarkModeToggle}\n                />\n            </SnackbarProvider>\n          </ThemeProvider>\n        </StyledEngineProvider>\n      </CacheBuster>\n    );\n}\n\nfunction Main({  bundle, url, filename, error, loading, shared, handleUpload, handleReset, handleUrlChange, darkMode, handleDarkModeToggle }) {\n  const classes = useStyles();\n\n  const MainView = () => {\n    if (error) {\n      console.log(\"Rendering error screen\");\n      return (\n        <Alert severity=\"error\">\n            <AlertTitle>Error</AlertTitle>\n            Could not load file. Make sure you are trying to load either an OctoPrint \n            systeminfo bundle, a zip containing logs, or a plain text log file. \n            Other files are not supported.\n        </Alert>\n      )\n    } else if (loading) {\n      console.log(\"Rendering loading screen\");\n      return (\n        <div style={{ display: \"flex\", justifyContent: \"center\", }}>\n            <CircularProgress />\n        </div>\n      )\n    } else if (bundle.hasContent) {\n      console.log(\"Rendering bundle\");\n      return (\n        <BundleView bundle={bundle} />\n      )\n    } else {\n      console.log(\"Rendering empty\");\n      return (\n        <NothingLoaded onUpload={handleUpload} />\n      )\n    }\n  }\n\n  const Navbar = () => {\n    return (\n      <AppBar className={classes.appBar}>\n        <Toolbar className={classes.toolbar}>\n          <IconButton onClick={handleReset} color=\"inherit\" size=\"large\">\n            <HomeIcon />\n          </IconButton>\n          <Hidden mdUp>\n            <div className={classes.grow} />\n          </Hidden>\n          <div className={classes.urlbar}>\n            <UrlBar url={url} filename={filename} handleUrlChange={handleUrlChange} />\n          </div>\n          {url ? <ShareButton url={url} /> : null}\n          <InfoButton />\n          <DebugButton url={url} shared={shared} />\n          <DarkModeToggle darkMode={darkMode} onChange={handleDarkModeToggle} />\n        </Toolbar>\n      </AppBar>\n    );\n  }\n\n\n  return (\n    <div className={classes.root} style={{display: \"flex\", minHeight: \"100vh\", flexDirection: \"column\"}}>\n      <CssBaseline />\n      <Navbar />\n      <main className={classes.content}>\n        <Container maxWidth=\"lg\" className={classes.container}>\n          <MainView />\n        </Container>\n      </main>\n      <footer className={classes.footer}>\n        © 2021 <Link href=\"https://octoprint.org\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">OctoPrint</Link> &middot; <Link href=\"https://octoprint.org/imprint/\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">Imprint</Link> &middot; <Link href=\"https://octoprint.org/privacy/\" target=\"_blank\" rel=\"noreferrer noopener\" color=\"inherit\" underline=\"always\">Privacy Policy</Link>\n      </footer>\n    </div>\n  );\n}","import { useState } from \"react\";\n\nexport default function useLocalStorage(key, initialValue) {\n  // Source: https://usehooks.com/useLocalStorage/\n\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n\n  // Return a wrapped version of useState's setter function that\n  // persists the new value to localStorage.\n  const setValue = (value) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n\n      // Save state\n      setStoredValue(valueToStore);\n\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n\n  return [storedValue, setValue];\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n    window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.0/8 are considered localhost for IPv4.\n      window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\n  );\n  \n  export function register(config) {\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n      // The URL constructor is available in all browsers that support SW.\n      const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n      if (publicUrl.origin !== window.location.origin) {\n        // Our service worker won't work if PUBLIC_URL is on a different origin\n        // from what our page is served on. This might happen if a CDN is used to\n        // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n        return;\n      }\n  \n      window.addEventListener('load', () => {\n        const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n  \n        if (isLocalhost) {\n          // This is running on localhost. Let's check if a service worker still exists or not.\n          checkValidServiceWorker(swUrl, config);\n  \n          // Add some additional logging to localhost, pointing developers to the\n          // service worker/PWA documentation.\n          navigator.serviceWorker.ready.then(() => {\n            console.log(\n              'This web app is being served cache-first by a service ' +\n                'worker. To learn more, visit https://cra.link/PWA'\n            );\n          });\n        } else {\n          // Is not localhost. Just register service worker\n          registerValidSW(swUrl, config);\n        }\n      });\n    }\n  }\n  \n  function registerValidSW(swUrl, config) {\n    navigator.serviceWorker\n      .register(swUrl)\n      .then((registration) => {\n        registration.onupdatefound = () => {\n          const installingWorker = registration.installing;\n          if (installingWorker == null) {\n            return;\n          }\n          installingWorker.onstatechange = () => {\n            if (installingWorker.state === 'installed') {\n              if (navigator.serviceWorker.controller) {\n                // At this point, the updated precached content has been fetched,\n                // but the previous service worker will still serve the older\n                // content until all client tabs are closed.\n                console.log(\n                  'New content is available and will be used when all ' +\n                    'tabs for this page are closed. See https://cra.link/PWA.'\n                );\n  \n                // Execute callback\n                if (config && config.onUpdate) {\n                  config.onUpdate(registration);\n                }\n              } else {\n                // At this point, everything has been precached.\n                // It's the perfect time to display a\n                // \"Content is cached for offline use.\" message.\n                console.log('Content is cached for offline use.');\n  \n                // Execute callback\n                if (config && config.onSuccess) {\n                  config.onSuccess(registration);\n                }\n              }\n            }\n          };\n        };\n      })\n      .catch((error) => {\n        console.error('Error during service worker registration:', error);\n      });\n  }\n  \n  function checkValidServiceWorker(swUrl, config) {\n    // Check if the service worker can be found. If it can't reload the page.\n    fetch(swUrl, {\n      headers: { 'Service-Worker': 'script' },\n    })\n      .then((response) => {\n        // Ensure service worker exists, and that we really are getting a JS file.\n        const contentType = response.headers.get('content-type');\n        if (\n          response.status === 404 ||\n          (contentType != null && contentType.indexOf('javascript') === -1)\n        ) {\n          // No service worker found. Probably a different app. Reload the page.\n          navigator.serviceWorker.ready.then((registration) => {\n            registration.unregister().then(() => {\n              window.location.reload();\n            });\n          });\n        } else {\n          // Service worker found. Proceed as normal.\n          registerValidSW(swUrl, config);\n        }\n      })\n      .catch(() => {\n        console.log('No internet connection found. App is running in offline mode.');\n      });\n  }\n  \n  export function unregister() {\n    if ('serviceWorker' in navigator) {\n      navigator.serviceWorker.ready\n        .then((registration) => {\n          registration.unregister();\n        })\n        .catch((error) => {\n          console.error(error.message);\n        });\n    }\n  }\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorkerRegistration from './serviceWorkerRegistration';\n\nconst search = window.location.search;\nconst params = new URLSearchParams(search);\n\nconst shared = {\n  url: params.get('url', ''),\n  text: params.get('text', ''),\n  title: params.get('title', '')\n}\n\nlet url = '';\nif (shared.url) {\n  url = shared.url;\n} else if (shared.text) {\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=789379\n  const match = shared.text.match(/https?:\\/\\/[^\\s]+/gi)\n  if (match) {\n    url = match[0];\n  }\n}\n\nconsole.log(\"URL\", url);\n\nReactDOM.render(\n  <App url={url} shared={shared} />,\n  document.querySelector('#root'),\n);\n\nserviceWorkerRegistration.register();"],"sourceRoot":""}